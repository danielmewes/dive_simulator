(()=>{"use strict";var t={127:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BvmModel=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t={}){super(),this.WATER_VAPOR_PRESSURE=.0627,this.PRESSURE_OTHER_GASES=.0526,this.NITROGEN_HALF_TIMES=[5,40,240],this.HELIUM_HALF_TIMES=[2.5,20,120],this.DIFFUSION_MODIFIERS=[1,.7,.3],this.MECHANICAL_RESISTANCE=[1,1.2,1.5],this.RISK_WEIGHTINGS=[.6,.3,.1],"number"==typeof t?(this.conservatismLevel=Math.max(0,Math.min(5,t)),this.maxDcsRisk=5):(this.conservatismLevel=Math.max(0,Math.min(5,t.conservatism||3)),this.maxDcsRisk=Math.max(.1,Math.min(100,t.maxDcsRisk||5))),this.bubbleVolumeParameters={criticalBubbleVolume:100,formationRateConstant:.1,resolutionRateConstant:.05,surfaceTensionFactor:.0179,temperatureFactor:310.15}}initializeTissueCompartments(){const t=[5,40,240],e=[2.5,20,120],i=[1,.7,.3],a=[1,1.2,1.5],s=[.6,.3,.1];this.tissueCompartments=[],this.bvmCompartments=[];for(let n=0;n<3;n++){const r=t[n],o=e[n],m=i[n],l=a[n],u=s[n];if(void 0===r||void 0===o||void 0===m||void 0===l||void 0===u)throw new Error(`Invalid compartment parameters for compartment ${n+1}`);const h={number:n+1,nitrogenHalfTime:r,heliumHalfTime:o,nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,get totalLoading(){return this.nitrogenLoading+this.heliumLoading}},c={number:n+1,nitrogenHalfTime:r,heliumHalfTime:o,nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,get totalLoading(){return this.nitrogenLoading+this.heliumLoading},bubbleVolume:0,bubbleFormationRate:0,bubbleResolutionRate:0,diffusionModifier:m,mechanicalResistance:l,riskWeighting:u};this.tissueCompartments.push(h),this.bvmCompartments.push(c)}}updateTissueLoadings(t){const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium);for(let a=0;a<this.bvmCompartments.length;a++){const s=this.bvmCompartments[a];if(!s)throw new Error(`Missing compartment data for index ${a}`);const n=s.nitrogenHalfTime/s.diffusionModifier;s.nitrogenLoading=this.calculateHaldaneLoading(s.nitrogenLoading,e,n,t);const r=s.heliumHalfTime/s.diffusionModifier;s.heliumLoading=this.calculateHaldaneLoading(s.heliumLoading,i,r,t);const o=this.tissueCompartments[a];o&&(o.nitrogenLoading=s.nitrogenLoading,o.heliumLoading=s.heliumLoading),this.updateBubbleVolume(s,t)}}calculateCeiling(){let t=0;for(const e of this.bvmCompartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateDCSRisk()<=this.maxDcsRisk}getModelName(){return`BVM(3)+${this.conservatismLevel}`}getMaxDcsRisk(){return this.maxDcsRisk}setMaxDcsRisk(t){this.maxDcsRisk=Math.max(.1,Math.min(100,t))}calculateTotalDcsRisk(){let t=0;for(const e of this.bvmCompartments)t+=this.calculateCompartmentRisk(e)*e.riskWeighting;return t}getBvmCompartmentData(t){if(t<1||t>3)throw new Error("BVM(3) compartment number must be between 1 and 3");const e=this.bvmCompartments[t-1];if(!e)throw new Error(`Compartment ${t} not found`);return{...e}}calculateBubbleVolume(t){if(t<1||t>3)throw new Error("BVM(3) compartment number must be between 1 and 3");const e=this.bvmCompartments[t-1];if(!e)throw new Error(`Compartment ${t} not found. Total compartments: ${this.bvmCompartments.length}`);return e.bubbleVolume}updateBubbleVolume(t,e){const i=t.nitrogenLoading+t.heliumLoading,a=this.currentDiveState.ambientPressure,s=Math.max(0,i-a);t.bubbleFormationRate=s>0?this.bubbleVolumeParameters.formationRateConstant*s*t.diffusionModifier:0,t.bubbleResolutionRate=this.bubbleVolumeParameters.resolutionRateConstant*t.bubbleVolume*t.mechanicalResistance;const n=(t.bubbleFormationRate-t.bubbleResolutionRate)*e;t.bubbleVolume=Math.max(0,t.bubbleVolume+n);const r=1+.1*this.conservatismLevel;t.bubbleVolume*=r}calculateCompartmentRisk(t){return Math.max(0,t.bubbleVolume-this.bubbleVolumeParameters.criticalBubbleVolume)/this.bubbleVolumeParameters.criticalBubbleVolume}calculateCompartmentCeiling(t){const e=(t.nitrogenLoading+t.heliumLoading-this.calculateAllowablePressureDrop(t)-this.surfacePressure)/.1;return Math.max(0,e)}calculateAllowablePressureDrop(t){const e=t.bubbleVolume/this.bubbleVolumeParameters.criticalBubbleVolume;return 1*(.5+.5*(1-this.maxDcsRisk/100))/(1+e)}calculateStopTime(t){if(t<=this.calculateCeiling())return 0;let e=0;for(const t of this.bvmCompartments){const i=this.maxDcsRisk/100,a=this.bubbleVolumeParameters.criticalBubbleVolume*(1+i);if(t.bubbleVolume>a){const i=(t.bubbleVolume-a)/(t.bubbleResolutionRate+.001);e=Math.max(e,i)}}return Math.max(1,Math.min(30,e))}getAcceptableRiskThreshold(){return.1*(1-.1*this.conservatismLevel)}calculateDCSRisk(){const t=this.calculateTotalDcsRisk(),e=Math.min(100,100*t);return Math.round(10*e)/10}resetToSurface(){super.resetToSurface(),this.bvmCompartments.forEach(t=>{t.bubbleVolume=0,t.bubbleFormationRate=0,t.bubbleResolutionRate=0})}}e.BvmModel=s},303:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecompressionModel=void 0,e.DecompressionModel=class{constructor(){this.tissueCompartments=[],this.surfacePressure=1.013,this.initializeTissueCompartments(),this.currentDiveState={depth:0,time:0,gasMix:{oxygen:.21,helium:0,get nitrogen(){return 1-this.oxygen-this.helium}},ambientPressure:this.surfacePressure}}updateDiveState(t){this.currentDiveState={...this.currentDiveState,...t},void 0!==t.depth&&(this.currentDiveState.ambientPressure=this.calculateAmbientPressure(t.depth))}getTissueCompartments(){return this.tissueCompartments}getDiveState(){return{...this.currentDiveState}}calculateAmbientPressure(t){return this.surfacePressure+.1*t}calculatePartialPressure(t,e){return t*(void 0!==e?this.calculateAmbientPressure(e):this.currentDiveState.ambientPressure)}calculateHaldaneLoading(t,e,i,a){const s=Math.log(2)/i;return e+(t-e)*Math.exp(-s*a)}resetToSurface(){this.tissueCompartments.forEach(t=>{t.nitrogenLoading=.79*this.surfacePressure,t.heliumLoading=0}),this.currentDiveState={depth:0,time:0,gasMix:{oxygen:.21,helium:0,get nitrogen(){return 1-this.oxygen-this.helium}},ambientPressure:this.surfacePressure}}}},381:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TbdmModel=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t={}){const e={bodyTemperature:37,atmosphericPressure:1.013,temperatureAdjustmentFactor:1,metabolicBubbleRate:.001,surfaceTensionParameter:.0728,conservatismFactor:1,...t};if(e.conservatismFactor<.5||e.conservatismFactor>2)throw new Error("TBDM conservatism factor must be between 0.5 and 2.0");super(),this.tbdmCompartments=[],this.NITROGEN_HALF_TIMES=[4,8.2,12.8,18.7,27.8,38.9,54.7,77.5,110,146.2,187.9,239.6,305.8,390.7,498.4,635.8],this.HELIUM_HALF_TIMES=[1.5,3.1,4.8,7.2,10.4,14.6,20.7,29.3,41.5,55.4,70.9,90.6,115.7,147.8,188.6,240.4],this.BUBBLE_NUCLEATION_THRESHOLDS=[2.8,2.6,2.4,2.2,2,1.9,1.8,1.7,1.6,1.5,1.4,1.35,1.3,1.25,1.2,1.15],this.BUBBLE_ELIMINATION_RATES=[.23,.18,.14,.11,.085,.065,.048,.035,.026,.019,.015,.012,.009,.007,.0055,.0045],this.TISSUE_PERFUSION_RATES=[850,650,480,350,260,190,140,100,75,55,42,32,25,19,15,12],this.BUBBLE_FORMATION_COEFFICIENTS=[1.8,1.6,1.4,1.3,1.2,1.15,1.1,1.05,1,.95,.9,.88,.85,.82,.8,.78],this.tbdmParameters=e,this.initializeTissueCompartments()}initializeTissueCompartments(){this.tissueCompartments=[],this.tbdmCompartments=[];const t=[4,8.2,12.8,18.7,27.8,38.9,54.7,77.5,110,146.2,187.9,239.6,305.8,390.7,498.4,635.8],e=[1.5,3.1,4.8,7.2,10.4,14.6,20.7,29.3,41.5,55.4,70.9,90.6,115.7,147.8,188.6,240.4],i=[2.8,2.6,2.4,2.2,2,1.9,1.8,1.7,1.6,1.5,1.4,1.35,1.3,1.25,1.2,1.15],a=[.23,.18,.14,.11,.085,.065,.048,.035,.026,.019,.015,.012,.009,.007,.0055,.0045],s=[850,650,480,350,260,190,140,100,75,55,42,32,25,19,15,12],n=[1.8,1.6,1.4,1.3,1.2,1.15,1.1,1.05,1,.95,.9,.88,.85,.82,.8,.78],r=this.tbdmParameters?.conservatismFactor||1,o=Math.min(16,t.length,e.length,i.length,a.length,s.length,n.length);for(let m=0;m<o;m++){const o={number:m+1,nitrogenHalfTime:t[m],heliumHalfTime:e[m],nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,bubbleNucleationThreshold:i[m]*r,bubbleVolumeFraction:0,bubbleEliminationRate:a[m],bubbleFormationCoefficient:n[m],maxBubbleVolumeFraction:.05,tissuePerfusion:s[m],metabolicCoefficient:1+.1*Math.exp(.2*-m),get totalLoading(){return this.nitrogenLoading+this.heliumLoading}};this.tissueCompartments.push(o),this.tbdmCompartments.push(o)}}updateTissueLoadings(t){const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium);for(const a of this.tbdmCompartments)a.nitrogenLoading=this.calculateHaldaneLoading(a.nitrogenLoading,e,a.nitrogenHalfTime,t),a.heliumLoading=this.calculateHaldaneLoading(a.heliumLoading,i,a.heliumHalfTime,t),this.updateBubbleDynamics(a,t)}calculateCeiling(){let t=0;for(const e of this.tbdmCompartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateCeiling()<=0&&this.calculateBubbleRisk()<.1}getModelName(){return`TBDM (Gernhardt-Lambertsen) CF:${this.tbdmParameters.conservatismFactor}`}calculateDCSRisk(){let t=0;for(const e of this.tbdmCompartments){const i=e.nitrogenLoading+e.heliumLoading,a=this.currentDiveState.ambientPressure,s=Math.max(0,i-a)/e.bubbleNucleationThreshold,n=e.bubbleVolumeFraction/e.maxBubbleVolumeFraction,r=Math.max(s,n)*(1+.02*(this.tbdmParameters.bodyTemperature-37))*e.metabolicCoefficient;t=Math.max(t,r)}const e=Math.min(100,t*t*45);return Math.round(10*e)/10}calculateBubbleRisk(){let t=0;for(const e of this.tbdmCompartments){const i=e.bubbleVolumeFraction/e.maxBubbleVolumeFraction;t=Math.max(t,i)}return t}getTbdmCompartmentData(t){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");const e=this.tbdmCompartments[t-1];if(!e)throw new Error(`TBDM Compartment ${t} not found`);return{...e}}updateParameters(t){if(this.tbdmParameters={...this.tbdmParameters,...t},this.tbdmParameters.conservatismFactor<.5||this.tbdmParameters.conservatismFactor>2)throw new Error("TBDM conservatism factor must be between 0.5 and 2.0");this.initializeTissueCompartments()}getParameters(){return{...this.tbdmParameters}}updateBubbleDynamics(t,e){const i=t.nitrogenLoading+t.heliumLoading,a=this.currentDiveState.ambientPressure,s=Math.max(0,i-a);if(s>t.bubbleNucleationThreshold){const i=(s-t.bubbleNucleationThreshold)*t.bubbleFormationCoefficient*this.tbdmParameters.metabolicBubbleRate*e;t.bubbleVolumeFraction=Math.min(t.maxBubbleVolumeFraction,t.bubbleVolumeFraction+i)}const n=t.bubbleEliminationRate*(t.tissuePerfusion/100)*(a/this.surfacePressure),r=t.bubbleVolumeFraction*n*e;if(t.bubbleVolumeFraction=Math.max(0,t.bubbleVolumeFraction-r),t.bubbleVolumeFraction<.001){const i=this.tbdmParameters.surfaceTensionParameter*e;t.bubbleVolumeFraction=Math.max(0,t.bubbleVolumeFraction-i)}}calculateCompartmentCeiling(t){const e=t.nitrogenLoading+t.heliumLoading;let i=t.bubbleNucleationThreshold;i-=2*t.bubbleVolumeFraction,i/=this.tbdmParameters.conservatismFactor;const a=(e-i-this.surfacePressure)/.1;return Math.max(0,a)}calculateStopTime(t){let e=0;for(const i of this.tbdmCompartments){const a=i.nitrogenLoading+i.heliumLoading,s=this.calculateAmbientPressure(t),n=i.nitrogenHalfTime*Math.log(a/s)/Math.log(2),r=i.bubbleVolumeFraction>.001&&i.bubbleEliminationRate>0?1/i.bubbleEliminationRate*Math.log(i.bubbleVolumeFraction/.001):0,o=Math.max(n,r);e=Math.max(e,o)}return Math.max(1,Math.min(30,e*this.tbdmParameters.conservatismFactor))}}e.TbdmModel=s},645:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VpmBModel=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t=3){super(),this.WATER_VAPOR_PRESSURE=.0627,this.SURFACE_TENSION_GRADIENT=.0179,this.PRESSURE_OTHER_GASES=.0526,this.NITROGEN_HALF_TIMES=[5,8,12.5,18.5,27,38.3,54.3,77,109,146,187,239,305,390,498,635],this.HELIUM_HALF_TIMES=[1.88,3.02,4.72,6.99,10.21,14.48,20.53,29.11,41.2,55.19,70.69,90.34,115.29,147.42,188.24,240.03],this.conservatismLevel=Math.max(0,Math.min(5,t)),this.bubbleParameters={surfaceTension:.0179,skinCompressionGamma:2,criticalVolumeLambda:750,regenerationTimeConstant:20160},this.initializeTissueCompartments()}initializeTissueCompartments(){const t=[5,8,12.5,18.5,27,38.3,54.3,77,109,146,187,239,305,390,498,635],e=[1.88,3.02,4.72,6.99,10.21,14.48,20.53,29.11,41.2,55.19,70.69,90.34,115.29,147.42,188.24,240.03];if(this.tissueCompartments=[],this.vpmBCompartments=[],this.NITROGEN_HALF_TIMES&&this.HELIUM_HALF_TIMES)for(let i=0;i<16;i++){const a=t[i],s=e[i];if(void 0===a||void 0===s)throw new Error(`Invalid half-time for compartment ${i+1}`);const n={number:i+1,nitrogenHalfTime:a,heliumHalfTime:s,nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,initialCriticalRadius:this.calculateInitialCriticalRadius(i+1),adjustedCriticalRadius:0,maxCrushingPressure:0,onsetOfImpermeability:0,get totalLoading(){return this.nitrogenLoading+this.heliumLoading}};n.adjustedCriticalRadius=n.initialCriticalRadius,this.tissueCompartments.push(n),this.vpmBCompartments.push(n)}}updateTissueLoadings(t){const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium);for(let a=0;a<this.tissueCompartments.length;a++){const s=this.tissueCompartments[a],n=this.vpmBCompartments[a];if(!s||!n)throw new Error(`Missing compartment data for index ${a}`);s.nitrogenLoading=this.calculateHaldaneLoading(s.nitrogenLoading,e,s.nitrogenHalfTime,t),s.heliumLoading=this.calculateHaldaneLoading(s.heliumLoading,i,s.heliumHalfTime,t),this.updateBubbleDynamics(n,t)}}calculateCeiling(){let t=0;for(const e of this.vpmBCompartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateCeiling()<=0}getModelName(){return`VPM-B+${this.conservatismLevel}`}calculateBubbleCount(t){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");const e=this.vpmBCompartments[t-1];if(!e)throw new Error(`Compartment ${t} not found`);const i=e.nitrogenLoading+e.heliumLoading,a=Math.max(0,i-this.currentDiveState.ambientPressure);if(a<=0)return 0;const s=e.adjustedCriticalRadius,n=this.calculateBubbleRadius(a,s),r=4/3*Math.PI*Math.pow(n/1e6,3),o=this.bubbleParameters.criticalVolumeLambda/r;return Math.max(0,o)}getVpmBCompartmentData(t){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");const e=this.vpmBCompartments[t-1];if(!e)throw new Error(`Compartment ${t} not found`);return{...e}}calculateInitialCriticalRadius(t){const e=[1.2599,1,.8618,.7562,.6667,.5933,.5282,.471,.4187,.3798,.3497,.3223,.2971,.2737,.2523,.2327][t-1];if(void 0===e)throw new Error(`Invalid compartment number: ${t}`);return 1e3*e}updateBubbleDynamics(t,e){const i=t.nitrogenLoading+t.heliumLoading,a=this.currentDiveState.ambientPressure;if(t.maxCrushingPressure=Math.max(t.maxCrushingPressure,a),t.adjustedCriticalRadius=Math.max(t.adjustedCriticalRadius,.001),t.onsetOfImpermeability=a+2*this.bubbleParameters.surfaceTension/t.adjustedCriticalRadius,i>a){const e=1+.1*(i-a);t.adjustedCriticalRadius=Math.min(t.adjustedCriticalRadius*e,2*t.initialCriticalRadius)}else{const i=Math.min(.99,e/this.bubbleParameters.regenerationTimeConstant);t.adjustedCriticalRadius=t.adjustedCriticalRadius*(1-i)+t.initialCriticalRadius*i}t.adjustedCriticalRadius=Math.max(Math.min(t.adjustedCriticalRadius,10*t.initialCriticalRadius),.1*t.initialCriticalRadius)}calculateCompartmentCeiling(t){const e=(t.nitrogenLoading+t.heliumLoading-this.calculateAllowableSupersaturation(t)-this.surfacePressure)/.1;return Math.max(0,e)}calculateAllowableSupersaturation(t){return 2*this.bubbleParameters.surfaceTension/Math.max(t.adjustedCriticalRadius,.001)/(1+.1*this.conservatismLevel)}calculateBubbleRadius(t,e){const i=this.bubbleParameters.surfaceTension,a=Math.max(e,.001),s=t/(2*i/a);return a*Math.pow(Math.max(s,.001),1/3)}calculateStopTime(t){const e=this.calculateCeiling();if(t<=e)return 0;const i=t-e;return Math.max(1,Math.min(30,2*i))}calculateDCSRisk(){let t=0;for(let e=1;e<=16;e++){const i=this.vpmBCompartments[e-1];if(!i)continue;const a=i.nitrogenLoading+i.heliumLoading,s=this.currentDiveState.ambientPressure,n=Math.max(0,a-s);if(n>0){const a=this.calculateAllowableSupersaturation(i),s=this.calculateBubbleCount(e),r=n/Math.max(a,.01)+Math.log10(Math.max(s,1))/10;t=Math.max(t,r)}}const e=Math.min(100,30*t);return Math.round(10*e)/10}}e.VpmBModel=s},678:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RgbmFoldedModel=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t={}){super(),this.rgbmCompartments=[],this.firstStopDepth=0,this.diveCount=1,this.lastSurfaceTime=0,this.maxDepthReached=0,this.totalBubbleVolume=0,this.NITROGEN_HALF_TIMES=[5,8,12.5,18.5,27,38.3,54.3,77,109,146,187,239,305,390,498,635],this.HELIUM_HALF_TIMES=[1.88,3.02,4.72,6.99,10.21,14.48,20.53,29.11,41.2,55.19,70.69,90.34,115.29,147.42,188.24,240.03],this.NITROGEN_M_VALUES_A=[1.2599,1,.8618,.7562,.6667,.5933,.5282,.471,.4187,.3798,.3497,.3223,.2971,.2737,.2523,.2327],this.NITROGEN_M_VALUES_B=[.505,.6514,.7222,.7825,.8126,.8434,.8693,.891,.9092,.9222,.9319,.9403,.9477,.9544,.9602,.9653],this.HELIUM_M_VALUES_A=[1.7424,1.383,1.1919,1.0458,.922,.8205,.7305,.6502,.595,.5545,.5333,.5189,.5181,.5176,.5172,.5119],this.HELIUM_M_VALUES_B=[.4245,.5747,.6527,.7223,.7582,.7957,.8279,.8553,.8757,.8903,.8997,.9073,.9122,.9171,.9217,.9267],this.BASE_BUBBLE_SEED_COUNT=1e3,this.BUBBLE_FORMATION_COEFFICIENT=.85,this.MICROBUBBLE_SURVIVAL_TIME=120,this.REPETITIVE_DIVE_THRESHOLD=6,this.settings={conservatism:t.conservatism??2,enableRepetitivePenalty:t.enableRepetitivePenalty??!0,...t},this.rgbmCompartments=[],this.firstStopDepth=0,this.diveCount=1,this.lastSurfaceTime=0,this.maxDepthReached=0,this.totalBubbleVolume=0,this.validateSettings(),this.initializeTissueCompartments()}validateSettings(){if(this.settings.conservatism<0||this.settings.conservatism>5)throw new Error("RGBM conservatism must be between 0 and 5")}initializeTissueCompartments(){if(this.tissueCompartments=[],this.rgbmCompartments=[],this.settings)for(let t=0;t<16;t++){const e={number:t+1,nitrogenHalfTime:this.NITROGEN_HALF_TIMES[t],heliumHalfTime:this.HELIUM_HALF_TIMES[t],nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,nitrogenMValueA:this.NITROGEN_M_VALUES_A[t],nitrogenMValueB:this.NITROGEN_M_VALUES_B[t],heliumMValueA:this.HELIUM_M_VALUES_A[t],heliumMValueB:this.HELIUM_M_VALUES_B[t],combinedMValueA:this.NITROGEN_M_VALUES_A[t],combinedMValueB:this.NITROGEN_M_VALUES_B[t],fFactor:1,maxTension:.79*this.surfacePressure,bubbleSeedCount:this.BASE_BUBBLE_SEED_COUNT,get totalLoading(){return this.nitrogenLoading+this.heliumLoading}};this.tissueCompartments.push(e),this.rgbmCompartments.push(e),this.updateCombinedMValues(e),this.updateFFactors(e)}}updateTissueLoadings(t){const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen,this.currentDiveState.ambientPressure),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium,this.currentDiveState.ambientPressure);this.maxDepthReached=Math.max(this.maxDepthReached,this.currentDiveState.depth);for(let a=0;a<this.tissueCompartments.length;a++){const s=this.tissueCompartments[a],n=this.rgbmCompartments[a];if(!s||!n)continue;const r=s.nitrogenLoading+s.heliumLoading;s.nitrogenLoading=this.calculateHaldaneLoading(s.nitrogenLoading,e,s.nitrogenHalfTime,t),s.heliumLoading=this.calculateHaldaneLoading(s.heliumLoading,i,s.heliumHalfTime,t);const o=s.nitrogenLoading+s.heliumLoading;n.maxTension=Math.max(n.maxTension,o),this.updateBubbleDynamics(n,t,r,o),this.updateCombinedMValues(n),this.updateFFactors(n)}this.updateTotalBubbleVolume()}calculateCeiling(){let t=0;0===this.firstStopDepth&&(this.firstStopDepth=this.calculateFirstStopDepth());for(const e of this.rgbmCompartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;this.firstStopDepth=this.calculateFirstStopDepth();let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateCeiling()<=0}getModelName(){return`RGBM (folded) - C${this.settings.conservatism}`}getRgbmSettings(){return{...this.settings}}setRgbmSettings(t){this.settings={...this.settings,...t},this.validateSettings(),this.firstStopDepth=0,this.rgbmCompartments.forEach(t=>{this.updateFFactors(t)})}getRgbmCompartmentData(t){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");const e=this.rgbmCompartments[t-1];if(!e)throw new Error(`RGBM compartment ${t} not found`);return{...e}}getTotalBubbleVolume(){return this.totalBubbleVolume}calculateDCSRisk(){let t=0;for(let e=1;e<=16;e++){const i=this.rgbmCompartments[e-1];if(!i)continue;const a=i.nitrogenLoading+i.heliumLoading,s=this.currentDiveState.ambientPressure,n=(i.combinedMValueA*s+i.combinedMValueB)*i.fFactor,r=Math.max(0,a-s)/n*(1+i.bubbleSeedCount/this.BASE_BUBBLE_SEED_COUNT*.1);t=Math.max(t,r)}const e=this.calculateRepetitiveDivePenalty(),i=Math.min(100,t*t*45*(1+e));return Math.round(10*i)/10}updateCombinedMValues(t){const e=t.nitrogenLoading+t.heliumLoading;if(e<=0)return t.combinedMValueA=t.nitrogenMValueA,void(t.combinedMValueB=t.nitrogenMValueB);const i=t.nitrogenLoading/e,a=t.heliumLoading/e;t.combinedMValueA=i*t.nitrogenMValueA+a*t.heliumMValueA,t.combinedMValueB=i*t.nitrogenMValueB+a*t.heliumMValueB}updateFFactors(t){const e=1-.05*this.settings.conservatism,i=t.bubbleSeedCount/this.BASE_BUBBLE_SEED_COUNT,a=Math.max(.7,1-.1*(i-1)),s=Math.max(.8,1-this.maxDepthReached/100*.1);t.fFactor=1*e*a*s,t.fFactor=Math.max(.6,Math.min(1,t.fFactor))}updateBubbleDynamics(t,e,i,a){const s=this.currentDiveState.ambientPressure,n=Math.max(0,a-s);if(n>0){const i=n*this.BUBBLE_FORMATION_COEFFICIENT*e;t.bubbleSeedCount+=i}else{const i=.01*t.bubbleSeedCount;t.bubbleSeedCount-=i*e,t.bubbleSeedCount=Math.max(this.BASE_BUBBLE_SEED_COUNT,t.bubbleSeedCount)}t.bubbleSeedCount=Math.min(t.bubbleSeedCount,10*this.BASE_BUBBLE_SEED_COUNT)}updateTotalBubbleVolume(){this.totalBubbleVolume=0,this.rgbmCompartments.forEach(t=>{const e=Math.max(0,t.bubbleSeedCount-this.BASE_BUBBLE_SEED_COUNT);this.totalBubbleVolume+=.001*e})}calculateCompartmentCeiling(t){const e=t.nitrogenLoading+t.heliumLoading,i=t.combinedMValueA,a=t.combinedMValueB,s=i*t.fFactor,n=((e-a*t.fFactor)/s-this.surfacePressure)/.1;return Math.max(0,n)}calculateFirstStopDepth(){let t=0;for(const e of this.rgbmCompartments){const i=e.nitrogenLoading+e.heliumLoading,a=e.combinedMValueA*e.fFactor,s=((i-e.combinedMValueB*e.fFactor)/a-this.surfacePressure)/.1;t=Math.max(t,s)}return Math.max(0,3*Math.ceil(t/3))}calculateStopTime(t){if(t<=this.calculateCeiling())return 0;let e=0,i=0;for(const a of this.rgbmCompartments){const s=(a.nitrogenLoading+a.heliumLoading)/((a.combinedMValueA*this.calculateAmbientPressure(t)+a.combinedMValueB)*a.fFactor)*100,n=a.bubbleSeedCount/this.BASE_BUBBLE_SEED_COUNT;e=Math.max(e,s),i=Math.max(i,n)}const a=Math.max(1,Math.floor(e/15)),s=Math.floor(2*i);return Math.min(30,a+s)}calculateRepetitiveDivePenalty(){if(!this.settings.enableRepetitivePenalty)return 0;if(this.diveCount>1&&this.lastSurfaceTime<this.REPETITIVE_DIVE_THRESHOLD){const t=.1*(this.diveCount-1)*(1-this.lastSurfaceTime/this.REPETITIVE_DIVE_THRESHOLD);return Math.min(.3,t)}return 0}setRepetitiveDiveParams(t,e){this.diveCount=Math.max(1,t),this.lastSurfaceTime=Math.max(0,e)}resetToSurface(){super.resetToSurface(),this.maxDepthReached=0,this.totalBubbleVolume=0,this.firstStopDepth=0,this.rgbmCompartments.forEach(t=>{t.fFactor=1,t.maxTension=.79*this.surfacePressure,t.bubbleSeedCount=this.BASE_BUBBLE_SEED_COUNT})}}e.RgbmFoldedModel=s},819:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BuhlmannModel=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t={low:30,high:85}){if(t.low<0||t.low>100)throw new Error("Gradient factor low must be between 0 and 100");if(t.high<0||t.high>100)throw new Error("Gradient factor high must be between 0 and 100");if(t.low>t.high)throw new Error("Gradient factor low cannot be greater than gradient factor high");super(),this.buhlmannCompartments=[],this.firstStopDepth=0,this.NITROGEN_HALF_TIMES=[5,8,12.5,18.5,27,38.3,54.3,77,109,146,187,239,305,390,498,635],this.HELIUM_HALF_TIMES=[1.88,3.02,4.72,6.99,10.21,14.48,20.53,29.11,41.2,55.19,70.69,90.34,115.29,147.42,188.24,240.03],this.NITROGEN_M_VALUES_A=[1.2599,1,.8618,.7562,.6667,.5933,.5282,.471,.4187,.3798,.3497,.3223,.2971,.2737,.2523,.2327],this.NITROGEN_M_VALUES_B=[.505,.6514,.7222,.7825,.8126,.8434,.8693,.891,.9092,.9222,.9319,.9403,.9477,.9544,.9602,.9653],this.HELIUM_M_VALUES_A=[1.7424,1.383,1.1919,1.0458,.922,.8205,.7305,.6502,.595,.5545,.5333,.5189,.5181,.5176,.5172,.5119],this.HELIUM_M_VALUES_B=[.4245,.5747,.6527,.7223,.7582,.7957,.8279,.8553,.8757,.8903,.8997,.9073,.9122,.9171,.9217,.9267],this.gradientFactors=t}initializeTissueCompartments(){this.tissueCompartments=[],this.buhlmannCompartments=[];const t=[5,8,12.5,18.5,27,38.3,54.3,77,109,146,187,239,305,390,498,635],e=[1.88,3.02,4.72,6.99,10.21,14.48,20.53,29.11,41.2,55.19,70.69,90.34,115.29,147.42,188.24,240.03],i=[1.2599,1,.8618,.7562,.6667,.5933,.5282,.471,.4187,.3798,.3497,.3223,.2971,.2737,.2523,.2327],a=[.505,.6514,.7222,.7825,.8126,.8434,.8693,.891,.9092,.9222,.9319,.9403,.9477,.9544,.9602,.9653],s=[1.7424,1.383,1.1919,1.0458,.922,.8205,.7305,.6502,.595,.5545,.5333,.5189,.5181,.5176,.5172,.5119],n=[.4245,.5747,.6527,.7223,.7582,.7957,.8279,.8553,.8757,.8903,.8997,.9073,.9122,.9171,.9217,.9267];for(let r=0;r<16;r++){const o={number:r+1,nitrogenHalfTime:t[r],heliumHalfTime:e[r],nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,nitrogenMValueA:i[r],nitrogenMValueB:a[r],heliumMValueA:s[r],heliumMValueB:n[r],combinedMValueA:i[r],combinedMValueB:a[r],get totalLoading(){return this.nitrogenLoading+this.heliumLoading}};this.tissueCompartments.push(o),this.buhlmannCompartments.push(o),this.updateCombinedMValues(o)}}updateTissueLoadings(t){this.tissueCompartments&&0!==this.tissueCompartments.length&&this.buhlmannCompartments&&0!==this.buhlmannCompartments.length||this.initializeTissueCompartments();const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium);for(let a=0;a<this.tissueCompartments.length;a++){const s=this.tissueCompartments[a],n=this.buhlmannCompartments[a];s&&n&&(s.nitrogenLoading=this.calculateHaldaneLoading(s.nitrogenLoading,e,s.nitrogenHalfTime,t),s.heliumLoading=this.calculateHaldaneLoading(s.heliumLoading,i,s.heliumHalfTime,t),this.updateCombinedMValues(n))}}calculateCeiling(){let t=0;0===this.firstStopDepth&&(this.firstStopDepth=this.calculateFirstStopDepth());for(const e of this.buhlmannCompartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;this.firstStopDepth=this.calculateFirstStopDepth();let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateCeiling()<=0}getModelName(){return`Buhlmann ZHL-16C (GF ${this.gradientFactors.low}/${this.gradientFactors.high})`}getGradientFactors(){return{...this.gradientFactors}}setGradientFactors(t){if(t.low<0||t.low>100)throw new Error("Gradient factor low must be between 0 and 100");if(t.high<0||t.high>100)throw new Error("Gradient factor high must be between 0 and 100");if(t.low>t.high)throw new Error("Gradient factor low cannot be greater than gradient factor high");this.gradientFactors=t,this.firstStopDepth=0}calculateMValue(t,e){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");this.buhlmannCompartments&&0!==this.buhlmannCompartments.length||this.initializeTissueCompartments();const i=this.buhlmannCompartments[t-1];if(!i)throw new Error(`Compartment ${t} not found. Available compartments: ${this.buhlmannCompartments.length}`);const a=this.calculateAmbientPressure(e);return i.combinedMValueA*a+i.combinedMValueB}calculateGradientFactorMValue(t,e){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");const i=this.calculateAmbientPressure(e),a=this.calculateMValue(t,e),s=i+this.getGradientFactorAtDepth(e)/100*(a-i);return Math.min(s,a)}getBuhlmannCompartmentData(t){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");this.buhlmannCompartments&&0!==this.buhlmannCompartments.length||this.initializeTissueCompartments();const e=this.buhlmannCompartments[t-1];if(!e)throw new Error(`Compartment ${t} not found. Available compartments: ${this.buhlmannCompartments.length}`);return{...e}}calculateSupersaturation(t){if(t<1||t>16)throw new Error("Compartment number must be between 1 and 16");this.buhlmannCompartments&&0!==this.buhlmannCompartments.length||this.initializeTissueCompartments();const e=this.buhlmannCompartments[t-1];if(!e)throw new Error(`Compartment ${t} not found. Available compartments: ${this.buhlmannCompartments.length}`);const i=this.calculateGradientFactorMValue(t,this.currentDiveState.depth),a=e.nitrogenLoading+e.heliumLoading;return Math.max(0,a/i*100)}updateCombinedMValues(t){if(!t)return;const e=t.nitrogenLoading+t.heliumLoading;if(e<=0)return t.combinedMValueA=t.nitrogenMValueA,void(t.combinedMValueB=t.nitrogenMValueB);const i=t.nitrogenLoading/e,a=t.heliumLoading/e;t.combinedMValueA=i*t.nitrogenMValueA+a*t.heliumMValueA,t.combinedMValueB=i*t.nitrogenMValueB+a*t.heliumMValueB}calculateCompartmentCeiling(t){const e=t.nitrogenLoading+t.heliumLoading,i=(this.getGradientFactorAtDepth(0),t.combinedMValueA),a=((e-t.combinedMValueB)/i-this.surfacePressure)/.1;return Math.max(0,a)}getGradientFactorAtDepth(t){if(this.firstStopDepth<=0)return this.gradientFactors.high;const e=t/this.firstStopDepth;return this.gradientFactors.high+(this.gradientFactors.low-this.gradientFactors.high)*e}calculateFirstStopDepth(){let t=0;for(const e of this.buhlmannCompartments){const i=e.nitrogenLoading+e.heliumLoading,a=e.combinedMValueA,s=((i-e.combinedMValueB)/a-this.surfacePressure)/.1;t=Math.max(t,s)}return Math.max(0,3*Math.ceil(t/3))}calculateStopTime(t){if(t<=this.calculateCeiling())return 0;let e=0;for(let t=1;t<=16;t++){const i=this.calculateSupersaturation(t);e=Math.max(e,i)}return e>120?Math.min(30,Math.max(3,Math.floor(e/10))):e>105?Math.min(15,Math.max(2,Math.floor(e/15))):e>100?Math.min(5,Math.max(1,Math.floor(e/20))):1}calculateDCSRisk(){let t=0;for(let e=1;e<=16;e++){const i=this.buhlmannCompartments[e-1];if(!i)continue;const a=i.nitrogenLoading+i.heliumLoading,s=this.currentDiveState.ambientPressure,n=(i.combinedMValueA*s+i.combinedMValueB)*(this.getGradientFactorAtDepth(this.currentDiveState.depth)/100),r=Math.max(0,a-s)/n;t=Math.max(t,r)}const e=Math.min(100,t*t*50);return Math.round(10*e)/10}}e.BuhlmannModel=s},865:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Nmri98Model=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t){super(),this.nmri98Compartments=[],this.NITROGEN_HALF_TIMES=[8,40,120],this.HELIUM_HALF_TIMES=[3,15.1,45.3],this.OXYGEN_HALF_TIMES=[6,30,90],this.M_VALUES=[1.6,1.2,1],this.LINEAR_SLOPES=[.8,.5,.3],this.CROSSOVER_PRESSURES=[.5,.3,.2],this.OXYGEN_THRESHOLDS=[1.4,1,.8],this.parameters={conservatism:3,maxDcsRisk:2,safetyFactor:1.2,enableOxygenTracking:!0,...t},this.parameters.conservatism=Math.max(0,Math.min(5,this.parameters.conservatism)),this.parameters.maxDcsRisk=Math.max(.1,Math.min(10,this.parameters.maxDcsRisk)),this.parameters.safetyFactor=Math.max(1,Math.min(2,this.parameters.safetyFactor)),this.initializeTissueCompartments()}initializeTissueCompartments(){if(this.tissueCompartments=[],this.nmri98Compartments=[],this.NITROGEN_HALF_TIMES&&this.HELIUM_HALF_TIMES&&this.OXYGEN_HALF_TIMES&&this.M_VALUES&&this.LINEAR_SLOPES&&this.CROSSOVER_PRESSURES&&this.OXYGEN_THRESHOLDS)for(let t=0;t<3;t++){const e=this.NITROGEN_HALF_TIMES[t],i=this.HELIUM_HALF_TIMES[t],a=this.OXYGEN_HALF_TIMES[t],s=this.M_VALUES[t],n=this.LINEAR_SLOPES[t],r=this.CROSSOVER_PRESSURES[t],o=this.OXYGEN_THRESHOLDS[t];if(void 0===e||void 0===i||void 0===a||void 0===s||void 0===n||void 0===r||void 0===o)continue;const m={number:t+1,nitrogenHalfTime:e,heliumHalfTime:i,nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,get totalLoading(){return this.nitrogenLoading+this.heliumLoading}},l={...m,oxygenLoading:.21*this.surfacePressure,linearSlope:n,crossoverPressure:r,mValue:s,oxygenThreshold:o,get totalLoading(){return this.nitrogenLoading+this.heliumLoading}};this.tissueCompartments.push(m),this.nmri98Compartments.push(l)}}updateTissueLoadings(t){const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium),a=this.calculatePartialPressure(this.currentDiveState.gasMix.oxygen);for(let s=0;s<this.tissueCompartments.length;s++){const n=this.tissueCompartments[s],r=this.nmri98Compartments[s];n.nitrogenLoading=this.calculateLinearExponentialLoading(n.nitrogenLoading,e,n.nitrogenHalfTime,r.linearSlope,r.crossoverPressure,t),n.heliumLoading=this.calculateLinearExponentialLoading(n.heliumLoading,i,n.heliumHalfTime,r.linearSlope,r.crossoverPressure,t),this.parameters.enableOxygenTracking&&(r.oxygenLoading=this.calculateLinearExponentialLoading(r.oxygenLoading,a,this.OXYGEN_HALF_TIMES[s],r.linearSlope,r.crossoverPressure,t))}}calculateCeiling(){let t=0;for(const e of this.nmri98Compartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateCeiling()<=0}getModelName(){return`NMRI98 LEM (Conservatism: ${this.parameters.conservatism}, Risk: ${this.parameters.maxDcsRisk}%)`}calculateLinearExponentialLoading(t,e,i,a,s,n){const r=this.currentDiveState.ambientPressure,o=t-r;if(e>=t)return this.calculateHaldaneLoading(t,e,i,n);if(o>s){const e=t-a*(o-s)/i*n,m=r+s;return Math.max(e,m)}return this.calculateHaldaneLoading(t,e,i,n)}calculateCompartmentCeiling(t){let e=t.nitrogenLoading+t.heliumLoading;this.parameters.enableOxygenTracking&&t.oxygenLoading>t.oxygenThreshold&&(e+=.5*(t.oxygenLoading-t.oxygenThreshold));const i=1-.1*this.parameters.conservatism,a=1/this.parameters.safetyFactor,s=10*(e-t.mValue*i*a-this.surfacePressure);return Math.max(0,s)}calculateStopTime(t){const e=this.calculateAmbientPressure(t);let i=0;for(const t of this.nmri98Compartments){let a=t.nitrogenLoading+t.heliumLoading;this.parameters.enableOxygenTracking&&t.oxygenLoading>t.oxygenThreshold&&(a+=.5*(t.oxygenLoading-t.oxygenThreshold));const s=1-.1*this.parameters.conservatism,n=1/this.parameters.safetyFactor,r=t.mValue*s*n+e;if(a>r){const s=a-r,n=a-e;if(n>t.crossoverPressure){const e=s/(t.linearSlope*(n-t.crossoverPressure)/t.nitrogenHalfTime);i=Math.max(i,e)}else{const n=t.nitrogenHalfTime*Math.log(2)*(s/(a-e+.1));i=Math.max(i,n)}}}return Math.max(1,Math.min(30,Math.ceil(i)))}calculateDCSRisk(){let t=0,e=0;for(const i of this.nmri98Compartments){let a=i.nitrogenLoading+i.heliumLoading;const s=1-.1*this.parameters.conservatism,n=1/this.parameters.safetyFactor,r=i.mValue*s*n,o=this.currentDiveState.ambientPressure+r;if(a>o){const e=(a-o)/r;t=Math.max(t,e)}if(this.parameters.enableOxygenTracking&&i.oxygenLoading>i.oxygenThreshold){const t=(i.oxygenLoading-i.oxygenThreshold)/i.oxygenThreshold;e=Math.max(e,t)}}const i=t+.3*e,a=Math.min(100,i*this.parameters.maxDcsRisk*100);return Math.round(10*a)/10}getNmri98CompartmentData(t){if(t<1||t>3)throw new Error("NMRI98 has only 3 compartments (1-3)");return{...this.nmri98Compartments[t-1]}}getAllNmri98Compartments(){return this.nmri98Compartments.map(t=>({...t}))}getParameters(){return{...this.parameters}}updateParameters(t){this.parameters={...this.parameters,...t},this.parameters.conservatism=Math.max(0,Math.min(5,this.parameters.conservatism)),this.parameters.maxDcsRisk=Math.max(.1,Math.min(10,this.parameters.maxDcsRisk)),this.parameters.safetyFactor=Math.max(1,Math.min(2,this.parameters.safetyFactor))}getModelStatus(){return{compartments:this.getAllNmri98Compartments(),parameters:this.getParameters(),ceiling:this.calculateCeiling(),dcsRisk:this.calculateDCSRisk(),canAscend:this.canAscendDirectly()}}}e.Nmri98Model=s},971:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VVal18ThalmannModel=void 0;const a=i(303);class s extends a.DecompressionModel{constructor(t){super(),this.vval18Compartments=[],this.COMPARTMENT_HALF_TIMES=[1.5,51,488],this.HELIUM_HALF_TIMES=[.57,19.2,184.2],this.M_VALUES=[1.6,1,.65],this.CROSSOVER_PRESSURES=[.4,.2,.1],this.LINEAR_SLOPES=[.5,.3,.7],this.parameters={maxDcsRisk:3.5,safetyFactor:1,gradientFactorLow:.3,gradientFactorHigh:.85,...t},this.initializeTissueCompartments()}initializeTissueCompartments(){if(this.tissueCompartments=[],this.vval18Compartments=[],this.COMPARTMENT_HALF_TIMES&&this.HELIUM_HALF_TIMES&&this.CROSSOVER_PRESSURES&&this.M_VALUES&&this.LINEAR_SLOPES)for(let t=0;t<3;t++){const e=this.COMPARTMENT_HALF_TIMES[t],i=this.HELIUM_HALF_TIMES[t],a=this.CROSSOVER_PRESSURES[t],s=this.M_VALUES[t],n=this.LINEAR_SLOPES[t];if(void 0===e||void 0===i||void 0===a||void 0===s||void 0===n)continue;const r={number:t+1,nitrogenHalfTime:e,heliumHalfTime:i,nitrogenLoading:.79*this.surfacePressure,heliumLoading:0,get totalLoading(){return this.nitrogenLoading+this.heliumLoading}},o={...r,crossoverPressure:a,mValue:s,linearSlope:n};this.tissueCompartments.push(r),this.vval18Compartments.push(o)}}updateTissueLoadings(t){const e=this.calculatePartialPressure(this.currentDiveState.gasMix.nitrogen),i=this.calculatePartialPressure(this.currentDiveState.gasMix.helium);for(let a=0;a<this.tissueCompartments.length;a++){const s=this.tissueCompartments[a],n=this.vval18Compartments[a];s.nitrogenLoading=this.calculateLinearExponentialLoading(s.nitrogenLoading,e,s.nitrogenHalfTime,n.crossoverPressure,n.linearSlope,t),s.heliumLoading=this.calculateLinearExponentialLoading(s.heliumLoading,i,s.heliumHalfTime,n.crossoverPressure,n.linearSlope,t)}}calculateCeiling(){let t=0;for(const e of this.vval18Compartments){const i=this.calculateCompartmentCeiling(e);t=Math.max(t,i)}return Math.max(0,t)}calculateDecompressionStops(){const t=[],e=this.calculateCeiling();if(e<=0)return t;let i=3*Math.ceil(e/3);for(;i>0;){const e=this.calculateStopTime(i);e>0&&t.push({depth:i,time:e,gasMix:this.currentDiveState.gasMix}),i-=3}return t}canAscendDirectly(){return this.calculateCeiling()<=0}getModelName(){return`VVal-18 Thalmann (Risk: ${this.parameters.maxDcsRisk}%)`}calculateLinearExponentialLoading(t,e,i,a,s,n){const r=this.currentDiveState.ambientPressure,o=t-r;if(e>=t)return this.calculateHaldaneLoading(t,e,i,n);if(o>a){const e=t-s*(o-a)/i*n,m=r+a;return Math.max(e,m)}return this.calculateHaldaneLoading(t,e,i,n)}calculateCompartmentCeiling(t){const e=t.nitrogenLoading+t.heliumLoading,i=this.interpolateGradientFactor(),a=(e-t.mValue*i*this.parameters.safetyFactor-this.surfacePressure)/.1;return Math.max(0,a)}interpolateGradientFactor(){return this.currentDiveState.depth,this.parameters.gradientFactorHigh}calculateStopTime(t){if(t<=this.calculateCeiling())return 0;const e=this.vval18Compartments[1],i=e.totalLoading-this.calculateAmbientPressure(t);if(i>e.crossoverPressure){const t=e.linearSlope*(i-e.crossoverPressure)/e.nitrogenHalfTime;return Math.max(1,Math.min(30,i/t))}return Math.max(1,Math.min(15,10*i))}getVVal18CompartmentData(t){if(t<1||t>3)throw new Error("VVal-18 has only 3 compartments (1-3)");return{...this.vval18Compartments[t-1]}}getAllVVal18Compartments(){return this.vval18Compartments.map(t=>({...t}))}getParameters(){return{...this.parameters}}updateParameters(t){this.parameters={...this.parameters,...t}}calculateDCSRisk(){let t=0;for(const e of this.vval18Compartments){const i=e.nitrogenLoading+e.heliumLoading,a=this.interpolateGradientFactor(),s=e.mValue*a*this.parameters.safetyFactor,n=this.currentDiveState.ambientPressure+s;if(i>n){const e=(i-n)/s;t=Math.max(t,e)}}const e=Math.min(100,t*this.parameters.maxDcsRisk);return Math.round(10*e)/10}}e.VVal18ThalmannModel=s}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,i),n.exports}(()=>{const t=i(303),e=i(819),a=i(645),s=i(127),n=i(971),r=i(678),o=i(381),m=i(865);window.DecompressionSimulator={},window.DecompressionSimulator.DecompressionModel=t.DecompressionModel,window.DecompressionSimulator.BuhlmannModel=e.BuhlmannModel,window.DecompressionSimulator.VpmBModel=a.VpmBModel,window.DecompressionSimulator.BvmModel=s.BvmModel,window.DecompressionSimulator.VVal18ThalmannModel=n.VVal18ThalmannModel,window.DecompressionSimulator.RgbmFoldedModel=r.RgbmFoldedModel,window.DecompressionSimulator.TbdmModel=o.TbdmModel,window.DecompressionSimulator.Nmri98Model=m.Nmri98Model,window.DecompressionSimulator.createModel=function(t,i={}){switch(t.toLowerCase()){case"buhlmann":return new e.BuhlmannModel({low:i.gradientFactorLow||30,high:i.gradientFactorHigh||85});case"vpmb":return new a.VpmBModel(i.conservatism||2);case"bvm":return new s.BvmModel({conservatism:i.conservatism||2,maxDcsRisk:i.maxDcsRisk||5});case"vval18":return new n.VVal18ThalmannModel({maxDcsRisk:i.dcsRiskPercent||2.3,gradientFactorLow:i.gradientFactorLow||.3,gradientFactorHigh:i.gradientFactorHigh||.85});case"rgbm":return new r.RgbmFoldedModel({conservatism:i.conservatism||2});case"tbdm":return new o.TbdmModel({conservatismFactor:i.conservatismFactor||1,bodyTemperature:i.bodyTemperature||37});case"nmri98":return new m.Nmri98Model({conservatism:i.conservatism||3,maxDcsRisk:i.maxDcsRisk||2,safetyFactor:i.safetyFactor||1.2,enableOxygenTracking:!1!==i.enableOxygenTracking});default:throw new Error("Unknown model type: "+t)}},window.DecompressionSimulator.createGasMix=function(t,e){const i=t/100,a=e/100;return{oxygen:i,helium:a,nitrogen:1-i-a}},window.DecompressionSimulator.depthToPressure=function(t){return 1.013+t/10},window.DecompressionSimulator.formatTime=function(t){const e=Math.floor(t/60),i=Math.round(t%60);return e>0?e+":"+i.toString().padStart(2,"0"):i+" min"},window.DecompressionSimulator.formatTimeHHMM=function(t){const e=Math.floor(t/60),i=Math.round(t%60);return e.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")},console.log("🤿 Decompression Simulator loaded successfully from TypeScript build"),console.log("Available models:",Object.keys(window.DecompressionSimulator).filter(t=>t.endsWith("Model")))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dm1Nb2RlbC50cyIsIndlYnBhY2s6Ly9zY3ViYS1kZWNvbXByZXNzaW9uLXNpbXVsYXRvci8uL3NyYy9tb2RlbHMvRGVjb21wcmVzc2lvbk1vZGVsLnRzIiwid2VicGFjazovL3NjdWJhLWRlY29tcHJlc3Npb24tc2ltdWxhdG9yLy4vc3JjL21vZGVscy9UYmRtTW9kZWwudHMiLCJ3ZWJwYWNrOi8vc2N1YmEtZGVjb21wcmVzc2lvbi1zaW11bGF0b3IvLi9zcmMvbW9kZWxzL1ZwbUJNb2RlbC50cyIsIndlYnBhY2s6Ly9zY3ViYS1kZWNvbXByZXNzaW9uLXNpbXVsYXRvci8uL3NyYy9tb2RlbHMvUmdibUZvbGRlZE1vZGVsLnRzIiwid2VicGFjazovL3NjdWJhLWRlY29tcHJlc3Npb24tc2ltdWxhdG9yLy4vc3JjL21vZGVscy9CdWhsbWFubk1vZGVsLnRzIiwid2VicGFjazovL3NjdWJhLWRlY29tcHJlc3Npb24tc2ltdWxhdG9yLy4vc3JjL21vZGVscy9ObXJpOThNb2RlbC50cyIsIndlYnBhY2s6Ly9zY3ViYS1kZWNvbXByZXNzaW9uLXNpbXVsYXRvci8uL3NyYy9tb2RlbHMvVlZhbDE4VGhhbG1hbm5Nb2RlbC50cyIsIndlYnBhY2s6Ly9zY3ViYS1kZWNvbXByZXNzaW9uLXNpbXVsYXRvci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zY3ViYS1kZWNvbXByZXNzaW9uLXNpbXVsYXRvci8uL3NyYy9icm93c2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBCVk0oMykgKEJ1YmJsZSBWb2x1bWUgTW9kZWwgMy1Db21wYXJ0bWVudCkgRGVjb21wcmVzc2lvbiBBbGdvcml0aG1cbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgQlZNKDMpIGRlY29tcHJlc3Npb24gbW9kZWwsIHdoaWNoIGlzIGEgdGhyZWUtY29tcGFydG1lbnRcbiAqIGJ1YmJsZSB2b2x1bWUgbW9kZWwgdGhhdCBkZWZpbmVzIHJpc2sgYXMgYSBmdW5jdGlvbiBvZiBidWJibGUgdm9sdW1lIHJhdGhlciB0aGFuXG4gKiBnYXMgY29udGVudCwgYXMgZGV2ZWxvcGVkIGF0IER1a2UgVW5pdmVyc2l0eS5cbiAqXG4gKiBCYXNlZCBvbiB0aGUgd29yayBvZjpcbiAqIC0gR2VydGgsIFcuQS4sIGFuZCBWYW5uLCBSLkQuICgxOTk3KSAtIFByb2JhYmlsaXN0aWMgZ2FzIGFuZCBidWJibGUgZHluYW1pY3MgbW9kZWxzXG4gKiAgIG9mIGRlY29tcHJlc3Npb24gc2lja25lc3Mgb2NjdXJyZW5jZSBpbiBhaXIgYW5kIG5pdHJvZ2VuLW94eWdlbiBkaXZpbmdcbiAqIC0gVXNlZCBpbiB0aGUgTkVEVSBkZWVwIHN0b3BzIHN0dWR5IGFzIHRoZSBidWJibGUgbW9kZWwgY29tcGFyaXNvblxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJ2bU1vZGVsID0gdm9pZCAwO1xuY29uc3QgRGVjb21wcmVzc2lvbk1vZGVsXzEgPSByZXF1aXJlKFwiLi9EZWNvbXByZXNzaW9uTW9kZWxcIik7XG4vKipcbiAqIEJWTSgzKSBEZWNvbXByZXNzaW9uIE1vZGVsIEltcGxlbWVudGF0aW9uXG4gKiBUaHJlZS1jb21wYXJ0bWVudCBidWJibGUgdm9sdW1lIG1vZGVsXG4gKi9cbmNsYXNzIEJ2bU1vZGVsIGV4dGVuZHMgRGVjb21wcmVzc2lvbk1vZGVsXzEuRGVjb21wcmVzc2lvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gQlZNKDMpIHNwZWNpZmljIGNvbnN0YW50c1xuICAgICAgICB0aGlzLldBVEVSX1ZBUE9SX1BSRVNTVVJFID0gMC4wNjI3OyAvLyBiYXIgYXQgMzfCsENcbiAgICAgICAgdGhpcy5QUkVTU1VSRV9PVEhFUl9HQVNFUyA9IDAuMDUyNjsgLy8gYmFyIChDTzIsIGV0Yy4pXG4gICAgICAgIC8vIEJWTSgzKSB1c2VzIDMgY29tcGFydG1lbnRzIHdpdGggZGlmZmVyZW50IGNoYXJhY3RlcmlzdGljc1xuICAgICAgICAvLyBGYXN0LCBNZWRpdW0sIGFuZCBTbG93IGNvbXBhcnRtZW50c1xuICAgICAgICB0aGlzLk5JVFJPR0VOX0hBTEZfVElNRVMgPSBbNS4wLCA0MC4wLCAyNDAuMF07IC8vIEZhc3QsIE1lZGl1bSwgU2xvd1xuICAgICAgICB0aGlzLkhFTElVTV9IQUxGX1RJTUVTID0gWzIuNSwgMjAuMCwgMTIwLjBdOyAvLyBGYXN0LCBNZWRpdW0sIFNsb3dcbiAgICAgICAgLy8gQ29tcGFydG1lbnQtc3BlY2lmaWMgcGFyYW1ldGVycyBmb3IgYnViYmxlIGR5bmFtaWNzXG4gICAgICAgIHRoaXMuRElGRlVTSU9OX01PRElGSUVSUyA9IFsxLjAsIDAuNywgMC4zXTsgLy8gRmFzdCBkaWZmdXNpb24gc2lnbmlmaWNhbnRseSBzbG93ZWQgaW4gc2xvdyBjb21wYXJ0bWVudFxuICAgICAgICB0aGlzLk1FQ0hBTklDQUxfUkVTSVNUQU5DRSA9IFsxLjAsIDEuMiwgMS41XTsgLy8gTWVjaGFuaWNhbCByZXNpc3RhbmNlIGFjY2VsZXJhdGVzIHJlc29sdXRpb25cbiAgICAgICAgdGhpcy5SSVNLX1dFSUdIVElOR1MgPSBbMC42LCAwLjMsIDAuMV07IC8vIFdlaWdodGluZyBmYWN0b3JzIGZvciByaXNrIGNhbGN1bGF0aW9uXG4gICAgICAgIC8vIEhhbmRsZSBsZWdhY3kgc2luZ2xlIHBhcmFtZXRlciBvciBuZXcgb3B0aW9ucyBvYmplY3RcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy5jb25zZXJ2YXRpc21MZXZlbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIHRoaXMubWF4RGNzUmlzayA9IDUuMDsgLy8gRGVmYXVsdCB2YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb25zZXJ2YXRpc21MZXZlbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIG9wdGlvbnMuY29uc2VydmF0aXNtIHx8IDMpKTtcbiAgICAgICAgICAgIHRoaXMubWF4RGNzUmlzayA9IE1hdGgubWF4KDAuMSwgTWF0aC5taW4oMTAwLCBvcHRpb25zLm1heERjc1Jpc2sgfHwgNS4wKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWJibGVWb2x1bWVQYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgY3JpdGljYWxCdWJibGVWb2x1bWU6IDEwMC4wLCAvLyBBcmJpdHJhcnkgdW5pdHNcbiAgICAgICAgICAgIGZvcm1hdGlvblJhdGVDb25zdGFudDogMC4xLFxuICAgICAgICAgICAgcmVzb2x1dGlvblJhdGVDb25zdGFudDogMC4wNSxcbiAgICAgICAgICAgIHN1cmZhY2VUZW5zaW9uRmFjdG9yOiAwLjAxNzksIC8vIE4vbVxuICAgICAgICAgICAgdGVtcGVyYXR1cmVGYWN0b3I6IDMxMC4xNSAvLyBCb2R5IHRlbXBlcmF0dXJlIGluIEtlbHZpblxuICAgICAgICB9O1xuICAgIH1cbiAgICBpbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCkge1xuICAgICAgICAvLyBEZWZpbmUgY29uc3RhbnRzIGxvY2FsbHkgdG8gYXZvaWQgJ3RoaXMnIGFjY2VzcyBiZWZvcmUgc3VwZXIoKVxuICAgICAgICBjb25zdCBOSVRST0dFTl9IQUxGX1RJTUVTID0gWzUuMCwgNDAuMCwgMjQwLjBdOyAvLyBGYXN0LCBNZWRpdW0sIFNsb3dcbiAgICAgICAgY29uc3QgSEVMSVVNX0hBTEZfVElNRVMgPSBbMi41LCAyMC4wLCAxMjAuMF07IC8vIEZhc3QsIE1lZGl1bSwgU2xvd1xuICAgICAgICBjb25zdCBESUZGVVNJT05fTU9ESUZJRVJTID0gWzEuMCwgMC43LCAwLjNdOyAvLyBGYXN0IGRpZmZ1c2lvbiBzaWduaWZpY2FudGx5IHNsb3dlZCBpbiBzbG93IGNvbXBhcnRtZW50XG4gICAgICAgIGNvbnN0IE1FQ0hBTklDQUxfUkVTSVNUQU5DRSA9IFsxLjAsIDEuMiwgMS41XTsgLy8gTWVjaGFuaWNhbCByZXNpc3RhbmNlIGFjY2VsZXJhdGVzIHJlc29sdXRpb25cbiAgICAgICAgY29uc3QgUklTS19XRUlHSFRJTkdTID0gWzAuNiwgMC4zLCAwLjFdOyAvLyBXZWlnaHRpbmcgZmFjdG9ycyBmb3IgcmlzayBjYWxjdWxhdGlvblxuICAgICAgICAvLyBJbml0aWFsaXplIGFycmF5c1xuICAgICAgICB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmJ2bUNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICAvLyBJbml0aWFsaXplIEJWTSgzKSBjb21wYXJ0bWVudHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5pdHJvZ2VuSGFsZlRpbWUgPSBOSVRST0dFTl9IQUxGX1RJTUVTW2ldO1xuICAgICAgICAgICAgY29uc3QgaGVsaXVtSGFsZlRpbWUgPSBIRUxJVU1fSEFMRl9USU1FU1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZ1c2lvbk1vZGlmaWVyID0gRElGRlVTSU9OX01PRElGSUVSU1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG1lY2hhbmljYWxSZXNpc3RhbmNlID0gTUVDSEFOSUNBTF9SRVNJU1RBTkNFW2ldO1xuICAgICAgICAgICAgY29uc3Qgcmlza1dlaWdodGluZyA9IFJJU0tfV0VJR0hUSU5HU1tpXTtcbiAgICAgICAgICAgIGlmIChuaXRyb2dlbkhhbGZUaW1lID09PSB1bmRlZmluZWQgfHwgaGVsaXVtSGFsZlRpbWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGRpZmZ1c2lvbk1vZGlmaWVyID09PSB1bmRlZmluZWQgfHwgbWVjaGFuaWNhbFJlc2lzdGFuY2UgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHJpc2tXZWlnaHRpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjb21wYXJ0bWVudCBwYXJhbWV0ZXJzIGZvciBjb21wYXJ0bWVudCAke2kgKyAxfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmFzZUNvbXBhcnRtZW50ID0ge1xuICAgICAgICAgICAgICAgIG51bWJlcjogaSArIDEsXG4gICAgICAgICAgICAgICAgbml0cm9nZW5IYWxmVGltZSxcbiAgICAgICAgICAgICAgICBoZWxpdW1IYWxmVGltZSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkxvYWRpbmc6IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSwgLy8gU3VyZmFjZSBlcXVpbGlicml1bVxuICAgICAgICAgICAgICAgIGhlbGl1bUxvYWRpbmc6IDAuMCxcbiAgICAgICAgICAgICAgICBnZXQgdG90YWxMb2FkaW5nKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uaXRyb2dlbkxvYWRpbmcgKyB0aGlzLmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJ2bUNvbXBhcnRtZW50ID0ge1xuICAgICAgICAgICAgICAgIG51bWJlcjogaSArIDEsXG4gICAgICAgICAgICAgICAgbml0cm9nZW5IYWxmVGltZSxcbiAgICAgICAgICAgICAgICBoZWxpdW1IYWxmVGltZSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkxvYWRpbmc6IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSxcbiAgICAgICAgICAgICAgICBoZWxpdW1Mb2FkaW5nOiAwLjAsXG4gICAgICAgICAgICAgICAgZ2V0IHRvdGFsTG9hZGluZygpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubml0cm9nZW5Mb2FkaW5nICsgdGhpcy5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnViYmxlVm9sdW1lOiAwLjAsXG4gICAgICAgICAgICAgICAgYnViYmxlRm9ybWF0aW9uUmF0ZTogMC4wLFxuICAgICAgICAgICAgICAgIGJ1YmJsZVJlc29sdXRpb25SYXRlOiAwLjAsXG4gICAgICAgICAgICAgICAgZGlmZnVzaW9uTW9kaWZpZXIsXG4gICAgICAgICAgICAgICAgbWVjaGFuaWNhbFJlc2lzdGFuY2UsXG4gICAgICAgICAgICAgICAgcmlza1dlaWdodGluZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudGlzc3VlQ29tcGFydG1lbnRzLnB1c2goYmFzZUNvbXBhcnRtZW50KTtcbiAgICAgICAgICAgIHRoaXMuYnZtQ29tcGFydG1lbnRzLnB1c2goYnZtQ29tcGFydG1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVRpc3N1ZUxvYWRpbmdzKHRpbWVTdGVwKSB7XG4gICAgICAgIGNvbnN0IG5pdHJvZ2VuUFAgPSB0aGlzLmNhbGN1bGF0ZVBhcnRpYWxQcmVzc3VyZSh0aGlzLmN1cnJlbnREaXZlU3RhdGUuZ2FzTWl4Lm5pdHJvZ2VuKTtcbiAgICAgICAgY29uc3QgaGVsaXVtUFAgPSB0aGlzLmNhbGN1bGF0ZVBhcnRpYWxQcmVzc3VyZSh0aGlzLmN1cnJlbnREaXZlU3RhdGUuZ2FzTWl4LmhlbGl1bSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idm1Db21wYXJ0bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ2bUNvbXBhcnRtZW50ID0gdGhpcy5idm1Db21wYXJ0bWVudHNbaV07XG4gICAgICAgICAgICBpZiAoIWJ2bUNvbXBhcnRtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGNvbXBhcnRtZW50IGRhdGEgZm9yIGluZGV4ICR7aX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBuaXRyb2dlbiBsb2FkaW5nIHVzaW5nIG1vZGlmaWVkIEhhbGRhbmUgZXF1YXRpb25cbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkTml0cm9nZW5IYWxmVGltZSA9IGJ2bUNvbXBhcnRtZW50Lm5pdHJvZ2VuSGFsZlRpbWUgLyBidm1Db21wYXJ0bWVudC5kaWZmdXNpb25Nb2RpZmllcjtcbiAgICAgICAgICAgIGJ2bUNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyA9IHRoaXMuY2FsY3VsYXRlSGFsZGFuZUxvYWRpbmcoYnZtQ29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nLCBuaXRyb2dlblBQLCBtb2RpZmllZE5pdHJvZ2VuSGFsZlRpbWUsIHRpbWVTdGVwKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBoZWxpdW0gbG9hZGluZyB1c2luZyBtb2RpZmllZCBIYWxkYW5lIGVxdWF0aW9uXG4gICAgICAgICAgICBjb25zdCBtb2RpZmllZEhlbGl1bUhhbGZUaW1lID0gYnZtQ29tcGFydG1lbnQuaGVsaXVtSGFsZlRpbWUgLyBidm1Db21wYXJ0bWVudC5kaWZmdXNpb25Nb2RpZmllcjtcbiAgICAgICAgICAgIGJ2bUNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGJ2bUNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcsIGhlbGl1bVBQLCBtb2RpZmllZEhlbGl1bUhhbGZUaW1lLCB0aW1lU3RlcCk7XG4gICAgICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgYmFzZSBjb21wYXJ0bWVudHMgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGNvbnN0IGJhc2VDb21wYXJ0bWVudCA9IHRoaXMudGlzc3VlQ29tcGFydG1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKGJhc2VDb21wYXJ0bWVudCkge1xuICAgICAgICAgICAgICAgIGJhc2VDb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgPSBidm1Db21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmc7XG4gICAgICAgICAgICAgICAgYmFzZUNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcgPSBidm1Db21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVXBkYXRlIGJ1YmJsZSBkeW5hbWljc1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCdWJibGVWb2x1bWUoYnZtQ29tcGFydG1lbnQsIHRpbWVTdGVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVDZWlsaW5nKCkge1xuICAgICAgICBsZXQgbWF4Q2VpbGluZyA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgYnZtQ29tcGFydG1lbnQgb2YgdGhpcy5idm1Db21wYXJ0bWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlaWxpbmcgPSB0aGlzLmNhbGN1bGF0ZUNvbXBhcnRtZW50Q2VpbGluZyhidm1Db21wYXJ0bWVudCk7XG4gICAgICAgICAgICBtYXhDZWlsaW5nID0gTWF0aC5tYXgobWF4Q2VpbGluZywgY2VpbGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIG1heENlaWxpbmcpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVEZWNvbXByZXNzaW9uU3RvcHMoKSB7XG4gICAgICAgIGNvbnN0IHN0b3BzID0gW107XG4gICAgICAgIGNvbnN0IGNlaWxpbmcgPSB0aGlzLmNhbGN1bGF0ZUNlaWxpbmcoKTtcbiAgICAgICAgaWYgKGNlaWxpbmcgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0b3BzOyAvLyBObyBkZWNvbXByZXNzaW9uIHJlcXVpcmVkXG4gICAgICAgIH1cbiAgICAgICAgLy8gQlZNKDMpIHRlbmRzIHRvIGZhdm9yIGRlZXBlciBzdG9wcyBpbml0aWFsbHkgKGJ1YmJsZSBtb2RlbCBjaGFyYWN0ZXJpc3RpYylcbiAgICAgICAgbGV0IGN1cnJlbnREZXB0aCA9IE1hdGguY2VpbChjZWlsaW5nIC8gMykgKiAzO1xuICAgICAgICB3aGlsZSAoY3VycmVudERlcHRoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcFRpbWUgPSB0aGlzLmNhbGN1bGF0ZVN0b3BUaW1lKGN1cnJlbnREZXB0aCk7XG4gICAgICAgICAgICBpZiAoc3RvcFRpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoOiBjdXJyZW50RGVwdGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHN0b3BUaW1lLFxuICAgICAgICAgICAgICAgICAgICBnYXNNaXg6IHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnREZXB0aCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdG9wcztcbiAgICB9XG4gICAgY2FuQXNjZW5kRGlyZWN0bHkoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSaXNrUGVyY2VudGFnZSA9IHRoaXMuY2FsY3VsYXRlRENTUmlzaygpO1xuICAgICAgICByZXR1cm4gY3VycmVudFJpc2tQZXJjZW50YWdlIDw9IHRoaXMubWF4RGNzUmlzaztcbiAgICB9XG4gICAgZ2V0TW9kZWxOYW1lKCkge1xuICAgICAgICByZXR1cm4gYEJWTSgzKSske3RoaXMuY29uc2VydmF0aXNtTGV2ZWx9YDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb25maWd1cmVkIG1heGltdW0gRENTIHJpc2sgcGVyY2VudGFnZVxuICAgICAqL1xuICAgIGdldE1heERjc1Jpc2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heERjc1Jpc2s7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtYXhpbXVtIERDUyByaXNrIHBlcmNlbnRhZ2VcbiAgICAgKi9cbiAgICBzZXRNYXhEY3NSaXNrKG1heERjc1Jpc2spIHtcbiAgICAgICAgdGhpcy5tYXhEY3NSaXNrID0gTWF0aC5tYXgoMC4xLCBNYXRoLm1pbigxMDAsIG1heERjc1Jpc2spKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSB0b3RhbCBEQ1MgcmlzayBiYXNlZCBvbiBidWJibGUgdm9sdW1lc1xuICAgICAqIFRoaXMgaXMgdGhlIGtleSBmZWF0dXJlIG9mIHRoZSBCVk0oMykgbW9kZWxcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVUb3RhbERjc1Jpc2soKSB7XG4gICAgICAgIGxldCB3ZWlnaHRlZFJpc2sgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMuYnZtQ29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wYXJ0bWVudFJpc2sgPSB0aGlzLmNhbGN1bGF0ZUNvbXBhcnRtZW50Umlzayhjb21wYXJ0bWVudCk7XG4gICAgICAgICAgICB3ZWlnaHRlZFJpc2sgKz0gY29tcGFydG1lbnRSaXNrICogY29tcGFydG1lbnQucmlza1dlaWdodGluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2VpZ2h0ZWRSaXNrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgQlZNKDMpIHNwZWNpZmljIGNvbXBhcnRtZW50IGRhdGFcbiAgICAgKi9cbiAgICBnZXRCdm1Db21wYXJ0bWVudERhdGEoY29tcGFydG1lbnROdW1iZXIpIHtcbiAgICAgICAgaWYgKGNvbXBhcnRtZW50TnVtYmVyIDwgMSB8fCBjb21wYXJ0bWVudE51bWJlciA+IDMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQlZNKDMpIGNvbXBhcnRtZW50IG51bWJlciBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBhcnRtZW50ID0gdGhpcy5idm1Db21wYXJ0bWVudHNbY29tcGFydG1lbnROdW1iZXIgLSAxXTtcbiAgICAgICAgaWYgKCFjb21wYXJ0bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wYXJ0bWVudCAke2NvbXBhcnRtZW50TnVtYmVyfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5jb21wYXJ0bWVudCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgYnViYmxlIHZvbHVtZSBmb3IgYSBjb21wYXJ0bWVudFxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUJ1YmJsZVZvbHVtZShjb21wYXJ0bWVudE51bWJlcikge1xuICAgICAgICBpZiAoY29tcGFydG1lbnROdW1iZXIgPCAxIHx8IGNvbXBhcnRtZW50TnVtYmVyID4gMykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCVk0oMykgY29tcGFydG1lbnQgbnVtYmVyIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLmJ2bUNvbXBhcnRtZW50c1tjb21wYXJ0bWVudE51bWJlciAtIDFdO1xuICAgICAgICBpZiAoIWNvbXBhcnRtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBhcnRtZW50ICR7Y29tcGFydG1lbnROdW1iZXJ9IG5vdCBmb3VuZC4gVG90YWwgY29tcGFydG1lbnRzOiAke3RoaXMuYnZtQ29tcGFydG1lbnRzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGFydG1lbnQuYnViYmxlVm9sdW1lO1xuICAgIH1cbiAgICB1cGRhdGVCdWJibGVWb2x1bWUoY29tcGFydG1lbnQsIHRpbWVTdGVwKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsTG9hZGluZyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcmVzc3VyZSA9IHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmU7XG4gICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9IE1hdGgubWF4KDAsIHRvdGFsTG9hZGluZyAtIGN1cnJlbnRQcmVzc3VyZSk7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBidWJibGUgZm9ybWF0aW9uIHJhdGUgKHdoZW4gc3VwZXJzYXR1cmF0ZWQpXG4gICAgICAgIGlmIChzdXBlcnNhdHVyYXRpb24gPiAwKSB7XG4gICAgICAgICAgICBjb21wYXJ0bWVudC5idWJibGVGb3JtYXRpb25SYXRlID0gdGhpcy5idWJibGVWb2x1bWVQYXJhbWV0ZXJzLmZvcm1hdGlvblJhdGVDb25zdGFudCAqXG4gICAgICAgICAgICAgICAgc3VwZXJzYXR1cmF0aW9uICogY29tcGFydG1lbnQuZGlmZnVzaW9uTW9kaWZpZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb21wYXJ0bWVudC5idWJibGVGb3JtYXRpb25SYXRlID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxjdWxhdGUgYnViYmxlIHJlc29sdXRpb24gcmF0ZSAoYWx3YXlzIGFjdGl2ZSwgZW5oYW5jZWQgYnkgbWVjaGFuaWNhbCByZXNpc3RhbmNlKVxuICAgICAgICBjb21wYXJ0bWVudC5idWJibGVSZXNvbHV0aW9uUmF0ZSA9IHRoaXMuYnViYmxlVm9sdW1lUGFyYW1ldGVycy5yZXNvbHV0aW9uUmF0ZUNvbnN0YW50ICpcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmJ1YmJsZVZvbHVtZSAqIGNvbXBhcnRtZW50Lm1lY2hhbmljYWxSZXNpc3RhbmNlO1xuICAgICAgICAvLyBVcGRhdGUgYnViYmxlIHZvbHVtZSBiYXNlZCBvbiBmb3JtYXRpb24gYW5kIHJlc29sdXRpb24gcmF0ZXNcbiAgICAgICAgY29uc3Qgdm9sdW1lQ2hhbmdlID0gKGNvbXBhcnRtZW50LmJ1YmJsZUZvcm1hdGlvblJhdGUgLSBjb21wYXJ0bWVudC5idWJibGVSZXNvbHV0aW9uUmF0ZSkgKiB0aW1lU3RlcDtcbiAgICAgICAgY29tcGFydG1lbnQuYnViYmxlVm9sdW1lID0gTWF0aC5tYXgoMCwgY29tcGFydG1lbnQuYnViYmxlVm9sdW1lICsgdm9sdW1lQ2hhbmdlKTtcbiAgICAgICAgLy8gQXBwbHkgY29uc2VydmF0aXNtIGZhY3RvclxuICAgICAgICBjb25zdCBjb25zZXJ2YXRpc21GYWN0b3IgPSAxLjAgKyAodGhpcy5jb25zZXJ2YXRpc21MZXZlbCAqIDAuMSk7XG4gICAgICAgIGNvbXBhcnRtZW50LmJ1YmJsZVZvbHVtZSAqPSBjb25zZXJ2YXRpc21GYWN0b3I7XG4gICAgfVxuICAgIGNhbGN1bGF0ZUNvbXBhcnRtZW50Umlzayhjb21wYXJ0bWVudCkge1xuICAgICAgICAvLyBSaXNrIGlzIHByb3BvcnRpb25hbCB0byBidWJibGUgdm9sdW1lIGFib3ZlIGNyaXRpY2FsIHRocmVzaG9sZFxuICAgICAgICBjb25zdCBleGNlc3NWb2x1bWUgPSBNYXRoLm1heCgwLCBjb21wYXJ0bWVudC5idWJibGVWb2x1bWUgLSB0aGlzLmJ1YmJsZVZvbHVtZVBhcmFtZXRlcnMuY3JpdGljYWxCdWJibGVWb2x1bWUpO1xuICAgICAgICByZXR1cm4gZXhjZXNzVm9sdW1lIC8gdGhpcy5idWJibGVWb2x1bWVQYXJhbWV0ZXJzLmNyaXRpY2FsQnViYmxlVm9sdW1lO1xuICAgIH1cbiAgICBjYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpIHtcbiAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgLy8gQlZNKDMpIGNlaWxpbmcgYmFzZWQgb24gYnViYmxlIHZvbHVtZSByYXRoZXIgdGhhbiBzdXBlcnNhdHVyYXRpb25cbiAgICAgICAgY29uc3QgYWxsb3dhYmxlUHJlc3N1cmVEcm9wID0gdGhpcy5jYWxjdWxhdGVBbGxvd2FibGVQcmVzc3VyZURyb3AoY29tcGFydG1lbnQpO1xuICAgICAgICBjb25zdCBjZWlsaW5nUHJlc3N1cmUgPSB0b3RhbExvYWRpbmcgLSBhbGxvd2FibGVQcmVzc3VyZURyb3A7XG4gICAgICAgIGNvbnN0IGNlaWxpbmdEZXB0aCA9IChjZWlsaW5nUHJlc3N1cmUgLSB0aGlzLnN1cmZhY2VQcmVzc3VyZSkgLyAwLjE7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBjZWlsaW5nRGVwdGgpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVBbGxvd2FibGVQcmVzc3VyZURyb3AoY29tcGFydG1lbnQpIHtcbiAgICAgICAgLy8gQWxsb3dhYmxlIHByZXNzdXJlIGRyb3AgYmFzZWQgb24gYnViYmxlIHZvbHVtZSBkeW5hbWljcyBhbmQgY29uZmlndXJlZCByaXNrIHRocmVzaG9sZFxuICAgICAgICBjb25zdCBjdXJyZW50QnViYmxlVm9sdW1lID0gY29tcGFydG1lbnQuYnViYmxlVm9sdW1lO1xuICAgICAgICBjb25zdCBjcml0aWNhbFZvbHVtZSA9IHRoaXMuYnViYmxlVm9sdW1lUGFyYW1ldGVycy5jcml0aWNhbEJ1YmJsZVZvbHVtZTtcbiAgICAgICAgLy8gSWYgYnViYmxlIHZvbHVtZSBpcyBhbHJlYWR5IGhpZ2gsIGFsbG93IGxlc3MgcHJlc3N1cmUgZHJvcFxuICAgICAgICBjb25zdCB2b2x1bWVSYXRpbyA9IGN1cnJlbnRCdWJibGVWb2x1bWUgLyBjcml0aWNhbFZvbHVtZTtcbiAgICAgICAgY29uc3QgYmFzZVByZXNzdXJlRHJvcCA9IDEuMDsgLy8gYmFyXG4gICAgICAgIC8vIEFkanVzdCBiYXNlZCBvbiBjb25maWd1cmVkIG1heGltdW0gRENTIHJpc2tcbiAgICAgICAgY29uc3Qgcmlza0ZhY3RvciA9IDEuMCAtICh0aGlzLm1heERjc1Jpc2sgLyAxMDAuMCk7IC8vIENvbnZlcnQgcGVyY2VudGFnZSB0byBmYWN0b3JcbiAgICAgICAgY29uc3Qgcmlza0FkanVzdG1lbnQgPSAwLjUgKyAocmlza0ZhY3RvciAqIDAuNSk7IC8vIFNjYWxlIGZyb20gMC41IHRvIDEuMFxuICAgICAgICByZXR1cm4gKGJhc2VQcmVzc3VyZURyb3AgKiByaXNrQWRqdXN0bWVudCkgLyAoMS4wICsgdm9sdW1lUmF0aW8pO1xuICAgIH1cbiAgICBjYWxjdWxhdGVTdG9wVGltZShkZXB0aCkge1xuICAgICAgICAvLyBCVk0oMykgc3RvcCB0aW1lIGNhbGN1bGF0aW9uIGJhc2VkIG9uIGJ1YmJsZSByZXNvbHV0aW9uIGFuZCByaXNrIHRocmVzaG9sZFxuICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCk7XG4gICAgICAgIGlmIChkZXB0aCA8PSBjZWlsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gMDsgLy8gTm8gc3RvcCBuZWVkZWQgYXQgdGhpcyBkZXB0aFxuICAgICAgICB9XG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aW1lIG5lZWRlZCBmb3IgYnViYmxlIHZvbHVtZXMgdG8gcmVkdWNlIHN1ZmZpY2llbnRseSB0byBtZWV0IHJpc2sgdGhyZXNob2xkXG4gICAgICAgIGxldCBtYXhUaW1lTmVlZGVkID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBjb21wYXJ0bWVudCBvZiB0aGlzLmJ2bUNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRhcmdldCBidWJibGUgdm9sdW1lIGJhc2VkIG9uIHJpc2sgdGhyZXNob2xkXG4gICAgICAgICAgICBjb25zdCByaXNrRmFjdG9yID0gdGhpcy5tYXhEY3NSaXNrIC8gMTAwLjA7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRCdWJibGVWb2x1bWUgPSB0aGlzLmJ1YmJsZVZvbHVtZVBhcmFtZXRlcnMuY3JpdGljYWxCdWJibGVWb2x1bWUgKiAoMS4wICsgcmlza0ZhY3Rvcik7XG4gICAgICAgICAgICBpZiAoY29tcGFydG1lbnQuYnViYmxlVm9sdW1lID4gdGFyZ2V0QnViYmxlVm9sdW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhjZXNzVm9sdW1lID0gY29tcGFydG1lbnQuYnViYmxlVm9sdW1lIC0gdGFyZ2V0QnViYmxlVm9sdW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVOZWVkZWQgPSBleGNlc3NWb2x1bWUgLyAoY29tcGFydG1lbnQuYnViYmxlUmVzb2x1dGlvblJhdGUgKyAwLjAwMSk7IC8vIFByZXZlbnQgZGl2aXNpb24gYnkgemVyb1xuICAgICAgICAgICAgICAgIG1heFRpbWVOZWVkZWQgPSBNYXRoLm1heChtYXhUaW1lTmVlZGVkLCB0aW1lTmVlZGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5taW4oMzAsIG1heFRpbWVOZWVkZWQpKTsgLy8gMS0zMCBtaW51dGVzLCBleHRlbmRlZCBmb3Igcmlzay1iYXNlZCBjYWxjdWxhdGlvblxuICAgIH1cbiAgICBnZXRBY2NlcHRhYmxlUmlza1RocmVzaG9sZCgpIHtcbiAgICAgICAgLy8gQ29uc2VydmF0aXZlIHJpc2sgdGhyZXNob2xkIGJhc2VkIG9uIGNvbnNlcnZhdGlzbSBsZXZlbFxuICAgICAgICBjb25zdCBiYXNlVGhyZXNob2xkID0gMC4xO1xuICAgICAgICBjb25zdCBjb25zZXJ2YXRpc21GYWN0b3IgPSAxLjAgLSAodGhpcy5jb25zZXJ2YXRpc21MZXZlbCAqIDAuMSk7XG4gICAgICAgIHJldHVybiBiYXNlVGhyZXNob2xkICogY29uc2VydmF0aXNtRmFjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgRENTIHJpc2sgYXMgYSBwZXJjZW50YWdlIGJhc2VkIG9uIGJ1YmJsZSB2b2x1bWVzXG4gICAgICogVGhpcyBpbXBsZW1lbnRzIHRoZSBsaXRlcmF0dXJlLWJhc2VkIEJWTSgzKSByaXNrIGNhbGN1bGF0aW9uXG4gICAgICogQHJldHVybnMgRENTIHJpc2sgYXMgYSBwZXJjZW50YWdlICgwLTEwMClcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVEQ1NSaXNrKCkge1xuICAgICAgICBjb25zdCB0b3RhbFJpc2sgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsRGNzUmlzaygpO1xuICAgICAgICAvLyBDb252ZXJ0IHRoZSB0b3RhbCByaXNrIHRvIGEgcGVyY2VudGFnZSAoMC0xMDApXG4gICAgICAgIC8vIFRoZSBCVk0oMykgbW9kZWwgcmlzayBpcyB0eXBpY2FsbHkgZXhwcmVzc2VkIGFzIGEgZnJhY3Rpb25cbiAgICAgICAgLy8gU2NhbGUgdG8gcGVyY2VudGFnZSB3aXRoIGEgcmVhc29uYWJsZSBtYXhpbXVtXG4gICAgICAgIGNvbnN0IHJpc2tQZXJjZW50YWdlID0gTWF0aC5taW4oMTAwLCB0b3RhbFJpc2sgKiAxMDApO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChyaXNrUGVyY2VudGFnZSAqIDEwKSAvIDEwOyAvLyBSb3VuZCB0byAxIGRlY2ltYWwgcGxhY2VcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgYWxsIGNvbXBhcnRtZW50cyB0byBzdXJmYWNlIGVxdWlsaWJyaXVtXG4gICAgICovXG4gICAgcmVzZXRUb1N1cmZhY2UoKSB7XG4gICAgICAgIHN1cGVyLnJlc2V0VG9TdXJmYWNlKCk7XG4gICAgICAgIC8vIFJlc2V0IEJWTSgzKSBzcGVjaWZpYyBwYXJhbWV0ZXJzXG4gICAgICAgIHRoaXMuYnZtQ29tcGFydG1lbnRzLmZvckVhY2goY29tcGFydG1lbnQgPT4ge1xuICAgICAgICAgICAgY29tcGFydG1lbnQuYnViYmxlVm9sdW1lID0gMC4wO1xuICAgICAgICAgICAgY29tcGFydG1lbnQuYnViYmxlRm9ybWF0aW9uUmF0ZSA9IDAuMDtcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmJ1YmJsZVJlc29sdXRpb25SYXRlID0gMC4wO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkJ2bU1vZGVsID0gQnZtTW9kZWw7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgZGVjb21wcmVzc2lvbiBtb2RlbHNcbiAqXG4gKiBUaGlzIGNsYXNzIGRlZmluZXMgdGhlIGNvbW1vbiBpbnRlcmZhY2UgdGhhdCBhbGwgZGVjb21wcmVzc2lvbiBhbGdvcml0aG1zXG4gKiBtdXN0IGltcGxlbWVudCwgaW5jbHVkaW5nIHRpc3N1ZSBjb21wYXJ0bWVudCBtYW5hZ2VtZW50LCBnYXMgaGFuZGxpbmcsXG4gKiBhbmQgY29yZSBkZWNvbXByZXNzaW9uIGNhbGN1bGF0aW9ucy5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWNvbXByZXNzaW9uTW9kZWwgPSB2b2lkIDA7XG4vKipcbiAqIEFic3RyYWN0IGRlY29tcHJlc3Npb24gbW9kZWwgYmFzZSBjbGFzc1xuICovXG5jbGFzcyBEZWNvbXByZXNzaW9uTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnN1cmZhY2VQcmVzc3VyZSA9IDEuMDEzOyAvLyBiYXIgYXQgc2VhIGxldmVsXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpO1xuICAgICAgICB0aGlzLmN1cnJlbnREaXZlU3RhdGUgPSB7XG4gICAgICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICBnYXNNaXg6IHsgb3h5Z2VuOiAwLjIxLCBoZWxpdW06IDAuMCwgZ2V0IG5pdHJvZ2VuKCkgeyByZXR1cm4gMSAtIHRoaXMub3h5Z2VuIC0gdGhpcy5oZWxpdW07IH0gfSxcbiAgICAgICAgICAgIGFtYmllbnRQcmVzc3VyZTogdGhpcy5zdXJmYWNlUHJlc3N1cmVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBjdXJyZW50IGRpdmUgc3RhdGVcbiAgICAgKiBAcGFyYW0gbmV3U3RhdGUgTmV3IGRpdmUgc3RhdGVcbiAgICAgKi9cbiAgICB1cGRhdGVEaXZlU3RhdGUobmV3U3RhdGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50RGl2ZVN0YXRlID0ge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJyZW50RGl2ZVN0YXRlLFxuICAgICAgICAgICAgLi4ubmV3U3RhdGVcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVXBkYXRlIGFtYmllbnQgcHJlc3N1cmUgYmFzZWQgb24gZGVwdGhcbiAgICAgICAgaWYgKG5ld1N0YXRlLmRlcHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmUgPSB0aGlzLmNhbGN1bGF0ZUFtYmllbnRQcmVzc3VyZShuZXdTdGF0ZS5kZXB0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgdGlzc3VlIGNvbXBhcnRtZW50IHN0YXRlc1xuICAgICAqL1xuICAgIGdldFRpc3N1ZUNvbXBhcnRtZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlzc3VlQ29tcGFydG1lbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBkaXZlIHN0YXRlXG4gICAgICovXG4gICAgZ2V0RGl2ZVN0YXRlKCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLmN1cnJlbnREaXZlU3RhdGUgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGFtYmllbnQgcHJlc3N1cmUgYXQgZ2l2ZW4gZGVwdGhcbiAgICAgKiBAcGFyYW0gZGVwdGggRGVwdGggaW4gbWV0ZXJzXG4gICAgICogQHJldHVybnMgUHJlc3N1cmUgaW4gYmFyXG4gICAgICovXG4gICAgY2FsY3VsYXRlQW1iaWVudFByZXNzdXJlKGRlcHRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cmZhY2VQcmVzc3VyZSArIChkZXB0aCAqIDAuMSk7IC8vIDAuMSBiYXIgcGVyIG1ldGVyXG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBwYXJ0aWFsIHByZXNzdXJlIG9mIGEgZ2FzIGF0IGN1cnJlbnQgZGVwdGhcbiAgICAgKiBAcGFyYW0gZ2FzRnJhY3Rpb24gRnJhY3Rpb24gb2YgZ2FzIGluIGJyZWF0aGluZyBtaXggKDAuMCB0byAxLjApXG4gICAgICogQHBhcmFtIGRlcHRoIERlcHRoIGluIG1ldGVycyAob3B0aW9uYWwsIHVzZXMgY3VycmVudCBkZXB0aCBpZiBub3QgcHJvdmlkZWQpXG4gICAgICogQHJldHVybnMgUGFydGlhbCBwcmVzc3VyZSBpbiBiYXJcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUoZ2FzRnJhY3Rpb24sIGRlcHRoKSB7XG4gICAgICAgIGNvbnN0IHByZXNzdXJlID0gZGVwdGggIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB0aGlzLmNhbGN1bGF0ZUFtYmllbnRQcmVzc3VyZShkZXB0aClcbiAgICAgICAgICAgIDogdGhpcy5jdXJyZW50RGl2ZVN0YXRlLmFtYmllbnRQcmVzc3VyZTtcbiAgICAgICAgcmV0dXJuIGdhc0ZyYWN0aW9uICogcHJlc3N1cmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aXNzdWUgY29tcGFydG1lbnQgbG9hZGluZyB1c2luZyBIYWxkYW5lIGVxdWF0aW9uXG4gICAgICogQHBhcmFtIGluaXRpYWxMb2FkaW5nIEluaXRpYWwgbG9hZGluZyBpbiBiYXJcbiAgICAgKiBAcGFyYW0gcGFydGlhbFByZXNzdXJlIFBhcnRpYWwgcHJlc3N1cmUgb2YgaW5zcGlyZWQgZ2FzIGluIGJhclxuICAgICAqIEBwYXJhbSBoYWxmVGltZSBIYWxmLXRpbWUgaW4gbWludXRlc1xuICAgICAqIEBwYXJhbSB0aW1lU3RlcCBUaW1lIHN0ZXAgaW4gbWludXRlc1xuICAgICAqIEByZXR1cm5zIE5ldyBsb2FkaW5nIGluIGJhclxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGluaXRpYWxMb2FkaW5nLCBwYXJ0aWFsUHJlc3N1cmUsIGhhbGZUaW1lLCB0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCBrID0gTWF0aC5sb2coMikgLyBoYWxmVGltZTtcbiAgICAgICAgcmV0dXJuIHBhcnRpYWxQcmVzc3VyZSArIChpbml0aWFsTG9hZGluZyAtIHBhcnRpYWxQcmVzc3VyZSkgKiBNYXRoLmV4cCgtayAqIHRpbWVTdGVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgYWxsIHRpc3N1ZSBjb21wYXJ0bWVudHMgdG8gc3VyZmFjZSBlcXVpbGlicml1bVxuICAgICAqL1xuICAgIHJlc2V0VG9TdXJmYWNlKCkge1xuICAgICAgICB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cy5mb3JFYWNoKGNvbXBhcnRtZW50ID0+IHtcbiAgICAgICAgICAgIC8vIFJlc2V0IHRvIG5pdHJvZ2VuIGxvYWRpbmcgYXQgc3VyZmFjZSBwcmVzc3VyZSAoMC43OSAqIDEuMDEzIGJhcilcbiAgICAgICAgICAgIGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyA9IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZTtcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcgPSAwLjA7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmN1cnJlbnREaXZlU3RhdGUgPSB7XG4gICAgICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICBnYXNNaXg6IHsgb3h5Z2VuOiAwLjIxLCBoZWxpdW06IDAuMCwgZ2V0IG5pdHJvZ2VuKCkgeyByZXR1cm4gMSAtIHRoaXMub3h5Z2VuIC0gdGhpcy5oZWxpdW07IH0gfSxcbiAgICAgICAgICAgIGFtYmllbnRQcmVzc3VyZTogdGhpcy5zdXJmYWNlUHJlc3N1cmVcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLkRlY29tcHJlc3Npb25Nb2RlbCA9IERlY29tcHJlc3Npb25Nb2RlbDtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBUaXNzdWUtQnViYmxlIERpZmZ1c2lvbiBNb2RlbCAoVEJETSkgYnkgR2VybmhhcmR0IGFuZCBMYW1iZXJ0c2VuXG4gKlxuICogSW1wbGVtZW50YXRpb24gb2YgdGhlIFRpc3N1ZS1CdWJibGUgRGlmZnVzaW9uIE1vZGVsLCB3aGljaCBjb21iaW5lc1xuICogdHJhZGl0aW9uYWwgdGlzc3VlIGNvbXBhcnRtZW50IG1vZGVsaW5nIHdpdGggYnViYmxlIG51Y2xlYXRpb24gYW5kXG4gKiBncm93dGggZHluYW1pY3MgaW4gdGlzc3VlIGFuZCBibG9vZC5cbiAqXG4gKiBCYXNlZCBvbiB0aGUgd29yayBvZjpcbiAqIC0gR2VybmhhcmR0LCBNLkwuIGFuZCBMYW1iZXJ0c2VuLCBDLkouICgxOTkwKSAtIE9yaWdpbmFsIFRCRE0gZGV2ZWxvcG1lbnRcbiAqIC0gR2VybmhhcmR0LCBNLkwuICgxOTk0KSAtIFRCRE0gdmFsaWRhdGlvbiBhbmQgcmVmaW5lbWVudHNcbiAqIC0gTkFTQSBKb2huc29uIFNwYWNlIENlbnRlciBkZWNvbXByZXNzaW9uIHN0dWRpZXNcbiAqXG4gKiBUaGUgVEJETSBtb2RlbCBpbmNvcnBvcmF0ZXM6XG4gKiAtIE11bHRpLWNvbXBhcnRtZW50IHRpc3N1ZSBnYXMgZXhjaGFuZ2VcbiAqIC0gQnViYmxlIG51Y2xlYXRpb24gdGhyZXNob2xkc1xuICogLSBCdWJibGUgZ3Jvd3RoIGFuZCBlbGltaW5hdGlvbiBraW5ldGljc1xuICogLSBUaXNzdWUtc3BlY2lmaWMgYnViYmxlIGZvcm1hdGlvbiBwYXJhbWV0ZXJzXG4gKiAtIFRlbXBlcmF0dXJlIGFuZCBtZXRhYm9saWMgZWZmZWN0cyBvbiBidWJibGUgZHluYW1pY3NcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5UYmRtTW9kZWwgPSB2b2lkIDA7XG5jb25zdCBEZWNvbXByZXNzaW9uTW9kZWxfMSA9IHJlcXVpcmUoXCIuL0RlY29tcHJlc3Npb25Nb2RlbFwiKTtcbi8qKlxuICogVGlzc3VlLUJ1YmJsZSBEaWZmdXNpb24gTW9kZWwgKFRCRE0pIEltcGxlbWVudGF0aW9uXG4gKi9cbmNsYXNzIFRiZG1Nb2RlbCBleHRlbmRzIERlY29tcHJlc3Npb25Nb2RlbF8xLkRlY29tcHJlc3Npb25Nb2RlbCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIC8vIEluaXRpYWxpemUgcGFyYW1ldGVycyBiZWZvcmUgY2FsbGluZyBzdXBlcigpIHNpbmNlIHN1cGVyKCkgY2FsbHMgaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpXG4gICAgICAgIGNvbnN0IHRiZG1QYXJhbXMgPSB7XG4gICAgICAgICAgICBib2R5VGVtcGVyYXR1cmU6IDM3LjAsIC8vIMKwQ1xuICAgICAgICAgICAgYXRtb3NwaGVyaWNQcmVzc3VyZTogMS4wMTMsIC8vIGJhclxuICAgICAgICAgICAgdGVtcGVyYXR1cmVBZGp1c3RtZW50RmFjdG9yOiAxLjAsXG4gICAgICAgICAgICBtZXRhYm9saWNCdWJibGVSYXRlOiAwLjAwMSwgLy8gYnViYmxlcy9taW4gYmFzZWxpbmVcbiAgICAgICAgICAgIHN1cmZhY2VUZW5zaW9uUGFyYW1ldGVyOiAwLjA3MjgsIC8vIE4vbSBhdCBib2R5IHRlbXBlcmF0dXJlXG4gICAgICAgICAgICBjb25zZXJ2YXRpc21GYWN0b3I6IDEuMCwgLy8gU3RhbmRhcmQgY29uc2VydmF0aXNtXG4gICAgICAgICAgICAuLi5wYXJhbWV0ZXJzXG4gICAgICAgIH07XG4gICAgICAgIC8vIFZhbGlkYXRlIHBhcmFtZXRlcnNcbiAgICAgICAgaWYgKHRiZG1QYXJhbXMuY29uc2VydmF0aXNtRmFjdG9yIDwgMC41IHx8IHRiZG1QYXJhbXMuY29uc2VydmF0aXNtRmFjdG9yID4gMi4wKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RCRE0gY29uc2VydmF0aXNtIGZhY3RvciBtdXN0IGJlIGJldHdlZW4gMC41IGFuZCAyLjAnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRiZG1Db21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgLy8gVEJETSB0aXNzdWUgY29tcGFydG1lbnQgaGFsZi10aW1lcyAobWludXRlcykgLSBiYXNlZCBvbiBHZXJuaGFyZHQncyB3b3JrXG4gICAgICAgIHRoaXMuTklUUk9HRU5fSEFMRl9USU1FUyA9IFtcbiAgICAgICAgICAgIDQuMCwgOC4yLCAxMi44LCAxOC43LCAyNy44LCAzOC45LCA1NC43LCA3Ny41LFxuICAgICAgICAgICAgMTEwLjAsIDE0Ni4yLCAxODcuOSwgMjM5LjYsIDMwNS44LCAzOTAuNywgNDk4LjQsIDYzNS44XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuSEVMSVVNX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICAxLjUsIDMuMSwgNC44LCA3LjIsIDEwLjQsIDE0LjYsIDIwLjcsIDI5LjMsXG4gICAgICAgICAgICA0MS41LCA1NS40LCA3MC45LCA5MC42LCAxMTUuNywgMTQ3LjgsIDE4OC42LCAyNDAuNFxuICAgICAgICBdO1xuICAgICAgICAvLyBUQkRNLXNwZWNpZmljIGJ1YmJsZSBudWNsZWF0aW9uIHRocmVzaG9sZHMgKGJhcikgZm9yIGVhY2ggY29tcGFydG1lbnRcbiAgICAgICAgdGhpcy5CVUJCTEVfTlVDTEVBVElPTl9USFJFU0hPTERTID0gW1xuICAgICAgICAgICAgMi44LCAyLjYsIDIuNCwgMi4yLCAyLjAsIDEuOSwgMS44LCAxLjcsXG4gICAgICAgICAgICAxLjYsIDEuNSwgMS40LCAxLjM1LCAxLjMsIDEuMjUsIDEuMiwgMS4xNVxuICAgICAgICBdO1xuICAgICAgICAvLyBCdWJibGUgZWxpbWluYXRpb24gcmF0ZXMgKDEvbWluKSAtIGZhc3RlciByYXRlcyBmb3IgZmFzdGVyIGNvbXBhcnRtZW50c1xuICAgICAgICB0aGlzLkJVQkJMRV9FTElNSU5BVElPTl9SQVRFUyA9IFtcbiAgICAgICAgICAgIDAuMjMsIDAuMTgsIDAuMTQsIDAuMTEsIDAuMDg1LCAwLjA2NSwgMC4wNDgsIDAuMDM1LFxuICAgICAgICAgICAgMC4wMjYsIDAuMDE5LCAwLjAxNSwgMC4wMTIsIDAuMDA5LCAwLjAwNywgMC4wMDU1LCAwLjAwNDVcbiAgICAgICAgXTtcbiAgICAgICAgLy8gVGlzc3VlIHBlcmZ1c2lvbiByYXRlcyAobUwvbWluLzEwMGcgdGlzc3VlKSAtIGhpZ2hlciBmb3IgZmFzdGVyIGNvbXBhcnRtZW50c1xuICAgICAgICB0aGlzLlRJU1NVRV9QRVJGVVNJT05fUkFURVMgPSBbXG4gICAgICAgICAgICA4NTAsIDY1MCwgNDgwLCAzNTAsIDI2MCwgMTkwLCAxNDAsIDEwMCxcbiAgICAgICAgICAgIDc1LCA1NSwgNDIsIDMyLCAyNSwgMTksIDE1LCAxMlxuICAgICAgICBdO1xuICAgICAgICAvLyBCdWJibGUgZm9ybWF0aW9uIGNvZWZmaWNpZW50cyAtIHRpc3N1ZS1zcGVjaWZpYyBzZW5zaXRpdml0eSB0byBidWJibGUgZm9ybWF0aW9uXG4gICAgICAgIHRoaXMuQlVCQkxFX0ZPUk1BVElPTl9DT0VGRklDSUVOVFMgPSBbXG4gICAgICAgICAgICAxLjgsIDEuNiwgMS40LCAxLjMsIDEuMiwgMS4xNSwgMS4xLCAxLjA1LFxuICAgICAgICAgICAgMS4wLCAwLjk1LCAwLjksIDAuODgsIDAuODUsIDAuODIsIDAuOCwgMC43OFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLnRiZG1QYXJhbWV0ZXJzID0gdGJkbVBhcmFtcztcbiAgICAgICAgLy8gUmUtaW5pdGlhbGl6ZSBjb21wYXJ0bWVudHMgd2l0aCB0aGUgY29ycmVjdCBwYXJhbWV0ZXJzXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpO1xuICAgIH1cbiAgICBpbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCkge1xuICAgICAgICB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnRiZG1Db21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgLy8gVXNlIGxvY2FsIGFycmF5cyB0byBhdm9pZCBpbml0aWFsaXphdGlvbiBpc3N1ZXMgKHNhbWUgcGF0dGVybiBhcyBCdWhsbWFubk1vZGVsKVxuICAgICAgICBjb25zdCBuaXRyb2dlblRpbWVzID0gW1xuICAgICAgICAgICAgNC4wLCA4LjIsIDEyLjgsIDE4LjcsIDI3LjgsIDM4LjksIDU0LjcsIDc3LjUsXG4gICAgICAgICAgICAxMTAuMCwgMTQ2LjIsIDE4Ny45LCAyMzkuNiwgMzA1LjgsIDM5MC43LCA0OTguNCwgNjM1LjhcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaGVsaXVtVGltZXMgPSBbXG4gICAgICAgICAgICAxLjUsIDMuMSwgNC44LCA3LjIsIDEwLjQsIDE0LjYsIDIwLjcsIDI5LjMsXG4gICAgICAgICAgICA0MS41LCA1NS40LCA3MC45LCA5MC42LCAxMTUuNywgMTQ3LjgsIDE4OC42LCAyNDAuNFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBidWJibGVOdWNsZWF0aW9uVGhyZXNob2xkcyA9IFtcbiAgICAgICAgICAgIDIuOCwgMi42LCAyLjQsIDIuMiwgMi4wLCAxLjksIDEuOCwgMS43LFxuICAgICAgICAgICAgMS42LCAxLjUsIDEuNCwgMS4zNSwgMS4zLCAxLjI1LCAxLjIsIDEuMTVcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYnViYmxlRWxpbWluYXRpb25SYXRlcyA9IFtcbiAgICAgICAgICAgIDAuMjMsIDAuMTgsIDAuMTQsIDAuMTEsIDAuMDg1LCAwLjA2NSwgMC4wNDgsIDAuMDM1LFxuICAgICAgICAgICAgMC4wMjYsIDAuMDE5LCAwLjAxNSwgMC4wMTIsIDAuMDA5LCAwLjAwNywgMC4wMDU1LCAwLjAwNDVcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgdGlzc3VlUGVyZnVzaW9uUmF0ZXMgPSBbXG4gICAgICAgICAgICA4NTAsIDY1MCwgNDgwLCAzNTAsIDI2MCwgMTkwLCAxNDAsIDEwMCxcbiAgICAgICAgICAgIDc1LCA1NSwgNDIsIDMyLCAyNSwgMTksIDE1LCAxMlxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBidWJibGVGb3JtYXRpb25Db2VmZmljaWVudHMgPSBbXG4gICAgICAgICAgICAxLjgsIDEuNiwgMS40LCAxLjMsIDEuMiwgMS4xNSwgMS4xLCAxLjA1LFxuICAgICAgICAgICAgMS4wLCAwLjk1LCAwLjksIDAuODgsIDAuODUsIDAuODIsIDAuOCwgMC43OFxuICAgICAgICBdO1xuICAgICAgICAvLyBEZWZhdWx0IGNvbnNlcnZhdGlzbSBmYWN0b3IgZm9yIGluaXRpYWxpemF0aW9uIChpZiBjYWxsZWQgZnJvbSBzdXBlcigpIGJlZm9yZSB0YmRtUGFyYW1ldGVycyBpcyBzZXQpXG4gICAgICAgIGNvbnN0IGNvbnNlcnZhdGlzbUZhY3RvciA9IHRoaXMudGJkbVBhcmFtZXRlcnM/LmNvbnNlcnZhdGlzbUZhY3RvciB8fCAxLjA7XG4gICAgICAgIC8vIEVuc3VyZSB3ZSBkb24ndCBleGNlZWQgYXJyYXkgYm91bmRzXG4gICAgICAgIGNvbnN0IG51bUNvbXBhcnRtZW50cyA9IE1hdGgubWluKDE2LCBuaXRyb2dlblRpbWVzLmxlbmd0aCwgaGVsaXVtVGltZXMubGVuZ3RoLCBidWJibGVOdWNsZWF0aW9uVGhyZXNob2xkcy5sZW5ndGgsIGJ1YmJsZUVsaW1pbmF0aW9uUmF0ZXMubGVuZ3RoLCB0aXNzdWVQZXJmdXNpb25SYXRlcy5sZW5ndGgsIGJ1YmJsZUZvcm1hdGlvbkNvZWZmaWNpZW50cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvbXBhcnRtZW50czsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0YmRtQ29tcGFydG1lbnQgPSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBpICsgMSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkhhbGZUaW1lOiBuaXRyb2dlblRpbWVzW2ldLFxuICAgICAgICAgICAgICAgIGhlbGl1bUhhbGZUaW1lOiBoZWxpdW1UaW1lc1tpXSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkxvYWRpbmc6IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSwgLy8gU3VyZmFjZSBlcXVpbGlicml1bVxuICAgICAgICAgICAgICAgIGhlbGl1bUxvYWRpbmc6IDAuMCxcbiAgICAgICAgICAgICAgICBidWJibGVOdWNsZWF0aW9uVGhyZXNob2xkOiBidWJibGVOdWNsZWF0aW9uVGhyZXNob2xkc1tpXSAqIGNvbnNlcnZhdGlzbUZhY3RvcixcbiAgICAgICAgICAgICAgICBidWJibGVWb2x1bWVGcmFjdGlvbjogMC4wLFxuICAgICAgICAgICAgICAgIGJ1YmJsZUVsaW1pbmF0aW9uUmF0ZTogYnViYmxlRWxpbWluYXRpb25SYXRlc1tpXSxcbiAgICAgICAgICAgICAgICBidWJibGVGb3JtYXRpb25Db2VmZmljaWVudDogYnViYmxlRm9ybWF0aW9uQ29lZmZpY2llbnRzW2ldLFxuICAgICAgICAgICAgICAgIG1heEJ1YmJsZVZvbHVtZUZyYWN0aW9uOiAwLjA1LCAvLyA1JSBtYXhpbXVtIGJ1YmJsZSB2b2x1bWUgZnJhY3Rpb25cbiAgICAgICAgICAgICAgICB0aXNzdWVQZXJmdXNpb246IHRpc3N1ZVBlcmZ1c2lvblJhdGVzW2ldLFxuICAgICAgICAgICAgICAgIG1ldGFib2xpY0NvZWZmaWNpZW50OiAxLjAgKyAoMC4xICogTWF0aC5leHAoLWkgKiAwLjIpKSwgLy8gRGVjcmVhc2luZyB3aXRoIGNvbXBhcnRtZW50IG51bWJlclxuICAgICAgICAgICAgICAgIGdldCB0b3RhbExvYWRpbmcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5pdHJvZ2VuTG9hZGluZyArIHRoaXMuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMucHVzaCh0YmRtQ29tcGFydG1lbnQpO1xuICAgICAgICAgICAgdGhpcy50YmRtQ29tcGFydG1lbnRzLnB1c2godGJkbUNvbXBhcnRtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVUaXNzdWVMb2FkaW5ncyh0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCBuaXRyb2dlblBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5uaXRyb2dlbik7XG4gICAgICAgIGNvbnN0IGhlbGl1bVBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5oZWxpdW0pO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMudGJkbUNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGNvbnZlbnRpb25hbCBnYXMgbG9hZGluZyB1c2luZyBIYWxkYW5lIGVxdWF0aW9uXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZywgbml0cm9nZW5QUCwgY29tcGFydG1lbnQubml0cm9nZW5IYWxmVGltZSwgdGltZVN0ZXApO1xuICAgICAgICAgICAgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZyA9IHRoaXMuY2FsY3VsYXRlSGFsZGFuZUxvYWRpbmcoY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZywgaGVsaXVtUFAsIGNvbXBhcnRtZW50LmhlbGl1bUhhbGZUaW1lLCB0aW1lU3RlcCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgYnViYmxlIGR5bmFtaWNzXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1YmJsZUR5bmFtaWNzKGNvbXBhcnRtZW50LCB0aW1lU3RlcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FsY3VsYXRlQ2VpbGluZygpIHtcbiAgICAgICAgbGV0IG1heENlaWxpbmcgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMudGJkbUNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ29tcGFydG1lbnRDZWlsaW5nKGNvbXBhcnRtZW50KTtcbiAgICAgICAgICAgIG1heENlaWxpbmcgPSBNYXRoLm1heChtYXhDZWlsaW5nLCBjZWlsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgbWF4Q2VpbGluZyk7XG4gICAgfVxuICAgIGNhbGN1bGF0ZURlY29tcHJlc3Npb25TdG9wcygpIHtcbiAgICAgICAgY29uc3Qgc3RvcHMgPSBbXTtcbiAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ2VpbGluZygpO1xuICAgICAgICBpZiAoY2VpbGluZyA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcHM7IC8vIE5vIGRlY29tcHJlc3Npb24gcmVxdWlyZWRcbiAgICAgICAgfVxuICAgICAgICAvLyBHZW5lcmF0ZSBzdG9wcyBhdCAzbSBpbnRlcnZhbHMgc3RhcnRpbmcgZnJvbSBjZWlsaW5nXG4gICAgICAgIGxldCBjdXJyZW50RGVwdGggPSBNYXRoLmNlaWwoY2VpbGluZyAvIDMpICogMztcbiAgICAgICAgd2hpbGUgKGN1cnJlbnREZXB0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3BUaW1lID0gdGhpcy5jYWxjdWxhdGVTdG9wVGltZShjdXJyZW50RGVwdGgpO1xuICAgICAgICAgICAgaWYgKHN0b3BUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIHN0b3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkZXB0aDogY3VycmVudERlcHRoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBzdG9wVGltZSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzTWl4OiB0aGlzLmN1cnJlbnREaXZlU3RhdGUuZ2FzTWl4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50RGVwdGggLT0gMztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcHM7XG4gICAgfVxuICAgIGNhbkFzY2VuZERpcmVjdGx5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCkgPD0gMCAmJiB0aGlzLmNhbGN1bGF0ZUJ1YmJsZVJpc2soKSA8IDAuMTtcbiAgICB9XG4gICAgZ2V0TW9kZWxOYW1lKCkge1xuICAgICAgICByZXR1cm4gYFRCRE0gKEdlcm5oYXJkdC1MYW1iZXJ0c2VuKSBDRjoke3RoaXMudGJkbVBhcmFtZXRlcnMuY29uc2VydmF0aXNtRmFjdG9yfWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBEQ1MgcmlzayBiYXNlZCBvbiB0aXNzdWUgc3VwZXJzYXR1cmF0aW9uIGFuZCBidWJibGUgZm9ybWF0aW9uXG4gICAgICogQ29tYmluZXMgdHJhZGl0aW9uYWwgTS12YWx1ZSBhcHByb2FjaCB3aXRoIGJ1YmJsZSB2b2x1bWUgYXNzZXNzbWVudFxuICAgICAqIEByZXR1cm5zIERDUyByaXNrIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApXG4gICAgICovXG4gICAgY2FsY3VsYXRlRENTUmlzaygpIHtcbiAgICAgICAgbGV0IG1heFJpc2sgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMudGJkbUNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHN1cGVyc2F0dXJhdGlvbiByaXNrXG4gICAgICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgY29uc3QgYW1iaWVudFByZXNzdXJlID0gdGhpcy5jdXJyZW50RGl2ZVN0YXRlLmFtYmllbnRQcmVzc3VyZTtcbiAgICAgICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9IE1hdGgubWF4KDAsIHRvdGFsTG9hZGluZyAtIGFtYmllbnRQcmVzc3VyZSk7XG4gICAgICAgICAgICAvLyBUQkRNLXNwZWNpZmljIHJpc2sgY2FsY3VsYXRpb24gaW5jb3Jwb3JhdGluZyBidWJibGUgZHluYW1pY3NcbiAgICAgICAgICAgIGNvbnN0IG51Y2xlYXRpb25SaXNrID0gc3VwZXJzYXR1cmF0aW9uIC8gY29tcGFydG1lbnQuYnViYmxlTnVjbGVhdGlvblRocmVzaG9sZDtcbiAgICAgICAgICAgIGNvbnN0IGJ1YmJsZVZvbHVtZVJpc2sgPSBjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiAvIGNvbXBhcnRtZW50Lm1heEJ1YmJsZVZvbHVtZUZyYWN0aW9uO1xuICAgICAgICAgICAgLy8gQ29tYmluZWQgcmlzayBhc3Nlc3NtZW50XG4gICAgICAgICAgICBjb25zdCB0aXNzdWVSaXNrID0gTWF0aC5tYXgobnVjbGVhdGlvblJpc2ssIGJ1YmJsZVZvbHVtZVJpc2spO1xuICAgICAgICAgICAgLy8gVGVtcGVyYXR1cmUgYW5kIG1ldGFib2xpYyBhZGp1c3RtZW50c1xuICAgICAgICAgICAgY29uc3QgdGVtcGVyYXR1cmVBZGp1c3RtZW50ID0gMS4wICsgKCh0aGlzLnRiZG1QYXJhbWV0ZXJzLmJvZHlUZW1wZXJhdHVyZSAtIDM3LjApICogMC4wMik7XG4gICAgICAgICAgICBjb25zdCBtZXRhYm9saWNBZGp1c3RtZW50ID0gY29tcGFydG1lbnQubWV0YWJvbGljQ29lZmZpY2llbnQ7XG4gICAgICAgICAgICBjb25zdCBhZGp1c3RlZFJpc2sgPSB0aXNzdWVSaXNrICogdGVtcGVyYXR1cmVBZGp1c3RtZW50ICogbWV0YWJvbGljQWRqdXN0bWVudDtcbiAgICAgICAgICAgIG1heFJpc2sgPSBNYXRoLm1heChtYXhSaXNrLCBhZGp1c3RlZFJpc2spO1xuICAgICAgICB9XG4gICAgICAgIC8vIENvbnZlcnQgdG8gcGVyY2VudGFnZSB3aXRoIFRCRE0tc3BlY2lmaWMgc2NhbGluZ1xuICAgICAgICBjb25zdCByaXNrUGVyY2VudGFnZSA9IE1hdGgubWluKDEwMCwgbWF4UmlzayAqIG1heFJpc2sgKiA0NSk7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJpc2tQZXJjZW50YWdlICogMTApIC8gMTA7IC8vIFJvdW5kIHRvIDEgZGVjaW1hbCBwbGFjZVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgYnViYmxlIGZvcm1hdGlvbiByaXNrXG4gICAgICogQHJldHVybnMgQnViYmxlIHJpc2sgZmFjdG9yICgwLTEpXG4gICAgICovXG4gICAgY2FsY3VsYXRlQnViYmxlUmlzaygpIHtcbiAgICAgICAgbGV0IG1heEJ1YmJsZVJpc2sgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMudGJkbUNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgY29uc3QgYnViYmxlUmlzayA9IGNvbXBhcnRtZW50LmJ1YmJsZVZvbHVtZUZyYWN0aW9uIC8gY29tcGFydG1lbnQubWF4QnViYmxlVm9sdW1lRnJhY3Rpb247XG4gICAgICAgICAgICBtYXhCdWJibGVSaXNrID0gTWF0aC5tYXgobWF4QnViYmxlUmlzaywgYnViYmxlUmlzayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heEJ1YmJsZVJpc2s7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBUQkRNLXNwZWNpZmljIGNvbXBhcnRtZW50IGRhdGFcbiAgICAgKi9cbiAgICBnZXRUYmRtQ29tcGFydG1lbnREYXRhKGNvbXBhcnRtZW50TnVtYmVyKSB7XG4gICAgICAgIGlmIChjb21wYXJ0bWVudE51bWJlciA8IDEgfHwgY29tcGFydG1lbnROdW1iZXIgPiAxNikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb21wYXJ0bWVudCBudW1iZXIgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDE2Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLnRiZG1Db21wYXJ0bWVudHNbY29tcGFydG1lbnROdW1iZXIgLSAxXTtcbiAgICAgICAgaWYgKCFjb21wYXJ0bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUQkRNIENvbXBhcnRtZW50ICR7Y29tcGFydG1lbnROdW1iZXJ9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IC4uLmNvbXBhcnRtZW50IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBUQkRNIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICB1cGRhdGVQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy50YmRtUGFyYW1ldGVycyA9IHsgLi4udGhpcy50YmRtUGFyYW1ldGVycywgLi4ucGFyYW1ldGVycyB9O1xuICAgICAgICAvLyBWYWxpZGF0ZSB1cGRhdGVkIHBhcmFtZXRlcnNcbiAgICAgICAgaWYgKHRoaXMudGJkbVBhcmFtZXRlcnMuY29uc2VydmF0aXNtRmFjdG9yIDwgMC41IHx8IHRoaXMudGJkbVBhcmFtZXRlcnMuY29uc2VydmF0aXNtRmFjdG9yID4gMi4wKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RCRE0gY29uc2VydmF0aXNtIGZhY3RvciBtdXN0IGJlIGJldHdlZW4gMC41IGFuZCAyLjAnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZS1pbml0aWFsaXplIGNvbXBhcnRtZW50cyB3aXRoIG5ldyBwYXJhbWV0ZXJzXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBUQkRNIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICBnZXRQYXJhbWV0ZXJzKCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnRiZG1QYXJhbWV0ZXJzIH07XG4gICAgfVxuICAgIHVwZGF0ZUJ1YmJsZUR5bmFtaWNzKGNvbXBhcnRtZW50LCB0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICBjb25zdCBhbWJpZW50UHJlc3N1cmUgPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuYW1iaWVudFByZXNzdXJlO1xuICAgICAgICBjb25zdCBzdXBlcnNhdHVyYXRpb24gPSBNYXRoLm1heCgwLCB0b3RhbExvYWRpbmcgLSBhbWJpZW50UHJlc3N1cmUpO1xuICAgICAgICAvLyBCdWJibGUgZm9ybWF0aW9uIHdoZW4gc3VwZXJzYXR1cmF0aW9uIGV4Y2VlZHMgbnVjbGVhdGlvbiB0aHJlc2hvbGRcbiAgICAgICAgaWYgKHN1cGVyc2F0dXJhdGlvbiA+IGNvbXBhcnRtZW50LmJ1YmJsZU51Y2xlYXRpb25UaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdGlvblJhdGUgPSAoc3VwZXJzYXR1cmF0aW9uIC0gY29tcGFydG1lbnQuYnViYmxlTnVjbGVhdGlvblRocmVzaG9sZCkgKlxuICAgICAgICAgICAgICAgIGNvbXBhcnRtZW50LmJ1YmJsZUZvcm1hdGlvbkNvZWZmaWNpZW50ICpcbiAgICAgICAgICAgICAgICB0aGlzLnRiZG1QYXJhbWV0ZXJzLm1ldGFib2xpY0J1YmJsZVJhdGU7XG4gICAgICAgICAgICBjb25zdCBidWJibGVGb3JtYXRpb24gPSBmb3JtYXRpb25SYXRlICogdGltZVN0ZXA7XG4gICAgICAgICAgICBjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiA9IE1hdGgubWluKGNvbXBhcnRtZW50Lm1heEJ1YmJsZVZvbHVtZUZyYWN0aW9uLCBjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiArIGJ1YmJsZUZvcm1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnViYmxlIGVsaW1pbmF0aW9uIC0gYWx3YXlzIG9jY3VycmluZ1xuICAgICAgICBjb25zdCBlbGltaW5hdGlvblJhdGUgPSBjb21wYXJ0bWVudC5idWJibGVFbGltaW5hdGlvblJhdGUgKlxuICAgICAgICAgICAgKGNvbXBhcnRtZW50LnRpc3N1ZVBlcmZ1c2lvbiAvIDEwMCkgKiAvLyBQZXJmdXNpb24gZW5oYW5jZW1lbnRcbiAgICAgICAgICAgIChhbWJpZW50UHJlc3N1cmUgLyB0aGlzLnN1cmZhY2VQcmVzc3VyZSk7IC8vIFByZXNzdXJlIGVuaGFuY2VtZW50XG4gICAgICAgIGNvbnN0IGJ1YmJsZUVsaW1pbmF0aW9uID0gY29tcGFydG1lbnQuYnViYmxlVm9sdW1lRnJhY3Rpb24gKiBlbGltaW5hdGlvblJhdGUgKiB0aW1lU3RlcDtcbiAgICAgICAgY29tcGFydG1lbnQuYnViYmxlVm9sdW1lRnJhY3Rpb24gPSBNYXRoLm1heCgwLCBjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiAtIGJ1YmJsZUVsaW1pbmF0aW9uKTtcbiAgICAgICAgLy8gU3VyZmFjZSB0ZW5zaW9uIGVmZmVjdHMgb24gc21hbGwgYnViYmxlcyAoZW5oYW5jZWQgZWxpbWluYXRpb24pXG4gICAgICAgIGlmIChjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiA8IDAuMDAxKSB7IC8vIFZlcnkgc21hbGwgYnViYmxlIHZvbHVtZXNcbiAgICAgICAgICAgIGNvbnN0IHN1cmZhY2VUZW5zaW9uRWZmZWN0ID0gdGhpcy50YmRtUGFyYW1ldGVycy5zdXJmYWNlVGVuc2lvblBhcmFtZXRlciAqIHRpbWVTdGVwO1xuICAgICAgICAgICAgY29tcGFydG1lbnQuYnViYmxlVm9sdW1lRnJhY3Rpb24gPSBNYXRoLm1heCgwLCBjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiAtIHN1cmZhY2VUZW5zaW9uRWZmZWN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpIHtcbiAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgLy8gVEJETSBjZWlsaW5nIGNhbGN1bGF0aW9uIGNvbnNpZGVycyBib3RoIGRpc3NvbHZlZCBnYXMgYW5kIGJ1YmJsZSB2b2x1bWVcbiAgICAgICAgbGV0IGFsbG93YWJsZVByZXNzdXJlID0gY29tcGFydG1lbnQuYnViYmxlTnVjbGVhdGlvblRocmVzaG9sZDtcbiAgICAgICAgLy8gQWRqdXN0IGZvciBleGlzdGluZyBidWJibGUgdm9sdW1lXG4gICAgICAgIGNvbnN0IGJ1YmJsZUFkanVzdG1lbnQgPSBjb21wYXJ0bWVudC5idWJibGVWb2x1bWVGcmFjdGlvbiAqIDIuMDsgLy8gQnViYmxlIHZvbHVtZSBwZW5hbHR5XG4gICAgICAgIGFsbG93YWJsZVByZXNzdXJlIC09IGJ1YmJsZUFkanVzdG1lbnQ7XG4gICAgICAgIC8vIEFwcGx5IGNvbnNlcnZhdGlzbSBmYWN0b3JcbiAgICAgICAgYWxsb3dhYmxlUHJlc3N1cmUgLz0gdGhpcy50YmRtUGFyYW1ldGVycy5jb25zZXJ2YXRpc21GYWN0b3I7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBjZWlsaW5nIGRlcHRoXG4gICAgICAgIGNvbnN0IGNlaWxpbmdQcmVzc3VyZSA9IHRvdGFsTG9hZGluZyAtIGFsbG93YWJsZVByZXNzdXJlO1xuICAgICAgICBjb25zdCBjZWlsaW5nRGVwdGggPSAoY2VpbGluZ1ByZXNzdXJlIC0gdGhpcy5zdXJmYWNlUHJlc3N1cmUpIC8gMC4xO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgY2VpbGluZ0RlcHRoKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlU3RvcFRpbWUoZGVwdGgpIHtcbiAgICAgICAgLy8gVEJETS1zcGVjaWZpYyBzdG9wIHRpbWUgY2FsY3VsYXRpb25cbiAgICAgICAgLy8gQ29uc2lkZXIgYm90aCB0aXNzdWUgb2ZmLWdhc3NpbmcgYW5kIGJ1YmJsZSBlbGltaW5hdGlvblxuICAgICAgICBsZXQgbWF4U3RvcFRpbWUgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMudGJkbUNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgLy8gVGlzc3VlIG9mZi1nYXNzaW5nIGNvbXBvbmVudFxuICAgICAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFByZXNzdXJlID0gdGhpcy5jYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUoZGVwdGgpO1xuICAgICAgICAgICAgY29uc3Qgb2ZmR2Fzc2luZ1RpbWUgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkhhbGZUaW1lICpcbiAgICAgICAgICAgICAgICBNYXRoLmxvZyh0b3RhbExvYWRpbmcgLyB0YXJnZXRQcmVzc3VyZSkgLyBNYXRoLmxvZygyKTtcbiAgICAgICAgICAgIC8vIEJ1YmJsZSBlbGltaW5hdGlvbiBjb21wb25lbnQgLSBwcm90ZWN0IGFnYWluc3QgZGl2aXNpb24gYnkgemVyb1xuICAgICAgICAgICAgY29uc3QgYnViYmxlRWxpbWluYXRpb25UaW1lID0gKGNvbXBhcnRtZW50LmJ1YmJsZVZvbHVtZUZyYWN0aW9uID4gMC4wMDEgJiYgY29tcGFydG1lbnQuYnViYmxlRWxpbWluYXRpb25SYXRlID4gMCkgP1xuICAgICAgICAgICAgICAgICgxIC8gY29tcGFydG1lbnQuYnViYmxlRWxpbWluYXRpb25SYXRlKSAqXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubG9nKGNvbXBhcnRtZW50LmJ1YmJsZVZvbHVtZUZyYWN0aW9uIC8gMC4wMDEpIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkU3RvcFRpbWUgPSBNYXRoLm1heChvZmZHYXNzaW5nVGltZSwgYnViYmxlRWxpbWluYXRpb25UaW1lKTtcbiAgICAgICAgICAgIG1heFN0b3BUaW1lID0gTWF0aC5tYXgobWF4U3RvcFRpbWUsIGNvbWJpbmVkU3RvcFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGx5IFRCRE0tc3BlY2lmaWMgbWluaW11bSBzdG9wIHRpbWVzIGFuZCBjb25zZXJ2YXRpc21cbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDEsIE1hdGgubWluKDMwLCBtYXhTdG9wVGltZSAqIHRoaXMudGJkbVBhcmFtZXRlcnMuY29uc2VydmF0aXNtRmFjdG9yKSk7XG4gICAgfVxufVxuZXhwb3J0cy5UYmRtTW9kZWwgPSBUYmRtTW9kZWw7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogVlBNLUIgKFZhcnlpbmcgUGVybWVhYmlsaXR5IE1vZGVsIHdpdGggQm95bGUgTGF3IENvbXBlbnNhdGlvbikgRGVjb21wcmVzc2lvbiBBbGdvcml0aG1cbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgVlBNLUIgZGVjb21wcmVzc2lvbiBtb2RlbCwgd2hpY2ggaXMgYSBkdWFsLXBoYXNlIG1vZGVsXG4gKiB0aGF0IGFjY291bnRzIGZvciBib3RoIGRpc3NvbHZlZCBnYXMga2luZXRpY3MgYW5kIGJ1YmJsZSBtZWNoYW5pY3Mgd2l0aFxuICogQm95bGUncyBMYXcgZXhwYW5zaW9uIGNvbXBlbnNhdGlvbi5cbiAqXG4gKiBCYXNlZCBvbiB0aGUgd29yayBvZjpcbiAqIC0gWW91bnQsIEQuRS4sIGFuZCBIb2ZmbWFuLCBELkMuICgxOTg2KVxuICogLSBCYWtlciwgRS5DLiAoMTk5OCkgLSBWUE0tQiBtb2RpZmljYXRpb25zXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVnBtQk1vZGVsID0gdm9pZCAwO1xuY29uc3QgRGVjb21wcmVzc2lvbk1vZGVsXzEgPSByZXF1aXJlKFwiLi9EZWNvbXByZXNzaW9uTW9kZWxcIik7XG4vKipcbiAqIFZQTS1CIERlY29tcHJlc3Npb24gTW9kZWwgSW1wbGVtZW50YXRpb25cbiAqL1xuY2xhc3MgVnBtQk1vZGVsIGV4dGVuZHMgRGVjb21wcmVzc2lvbk1vZGVsXzEuRGVjb21wcmVzc2lvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25zZXJ2YXRpc21MZXZlbCA9IDMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gVlBNLUIgc3BlY2lmaWMgY29uc3RhbnRzXG4gICAgICAgIHRoaXMuV0FURVJfVkFQT1JfUFJFU1NVUkUgPSAwLjA2Mjc7IC8vIGJhciBhdCAzN8KwQ1xuICAgICAgICB0aGlzLlNVUkZBQ0VfVEVOU0lPTl9HUkFESUVOVCA9IDAuMDE3OTsgLy8gTi9tL2JhclxuICAgICAgICB0aGlzLlBSRVNTVVJFX09USEVSX0dBU0VTID0gMC4wNTI2OyAvLyBiYXIgKENPMiwgZXRjLilcbiAgICAgICAgLy8gU3RhbmRhcmQgVlBNLUIgY29tcGFydG1lbnQgaGFsZi10aW1lcyAobWludXRlcylcbiAgICAgICAgdGhpcy5OSVRST0dFTl9IQUxGX1RJTUVTID0gW1xuICAgICAgICAgICAgNS4wLCA4LjAsIDEyLjUsIDE4LjUsIDI3LjAsIDM4LjMsIDU0LjMsIDc3LjAsXG4gICAgICAgICAgICAxMDkuMCwgMTQ2LjAsIDE4Ny4wLCAyMzkuMCwgMzA1LjAsIDM5MC4wLCA0OTguMCwgNjM1LjBcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5IRUxJVU1fSEFMRl9USU1FUyA9IFtcbiAgICAgICAgICAgIDEuODgsIDMuMDIsIDQuNzIsIDYuOTksIDEwLjIxLCAxNC40OCwgMjAuNTMsIDI5LjExLFxuICAgICAgICAgICAgNDEuMjAsIDU1LjE5LCA3MC42OSwgOTAuMzQsIDExNS4yOSwgMTQ3LjQyLCAxODguMjQsIDI0MC4wM1xuICAgICAgICBdO1xuICAgICAgICB0aGlzLmNvbnNlcnZhdGlzbUxldmVsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oNSwgY29uc2VydmF0aXNtTGV2ZWwpKTtcbiAgICAgICAgdGhpcy5idWJibGVQYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgc3VyZmFjZVRlbnNpb246IDAuMDE3OSwgLy8gTi9tXG4gICAgICAgICAgICBza2luQ29tcHJlc3Npb25HYW1tYTogMi4wLFxuICAgICAgICAgICAgY3JpdGljYWxWb2x1bWVMYW1iZGE6IDc1MC4wLFxuICAgICAgICAgICAgcmVnZW5lcmF0aW9uVGltZUNvbnN0YW50OiAyMDE2MC4wIC8vIDE0IGRheXMgaW4gbWludXRlc1xuICAgICAgICB9O1xuICAgICAgICAvLyBSZS1pbml0aWFsaXplIGNvbXBhcnRtZW50cyBub3cgdGhhdCBhbGwgcHJvcGVydGllcyBhcmUgc2V0XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpO1xuICAgIH1cbiAgICBpbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCkge1xuICAgICAgICAvLyBEZWZpbmUgY29uc3RhbnRzIGxvY2FsbHkgdG8gYXZvaWQgJ3RoaXMnIGFjY2VzcyBiZWZvcmUgc3VwZXIoKVxuICAgICAgICBjb25zdCBOSVRST0dFTl9IQUxGX1RJTUVTID0gW1xuICAgICAgICAgICAgNS4wLCA4LjAsIDEyLjUsIDE4LjUsIDI3LjAsIDM4LjMsIDU0LjMsIDc3LjAsXG4gICAgICAgICAgICAxMDkuMCwgMTQ2LjAsIDE4Ny4wLCAyMzkuMCwgMzA1LjAsIDM5MC4wLCA0OTguMCwgNjM1LjBcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgSEVMSVVNX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICAxLjg4LCAzLjAyLCA0LjcyLCA2Ljk5LCAxMC4yMSwgMTQuNDgsIDIwLjUzLCAyOS4xMSxcbiAgICAgICAgICAgIDQxLjIwLCA1NS4xOSwgNzAuNjksIDkwLjM0LCAxMTUuMjksIDE0Ny40MiwgMTg4LjI0LCAyNDAuMDNcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy52cG1CQ29tcGFydG1lbnRzID0gW107XG4gICAgICAgIC8vIEVuc3VyZSBhcnJheXMgYXJlIHByb3Blcmx5IGRlZmluZWRcbiAgICAgICAgaWYgKCF0aGlzLk5JVFJPR0VOX0hBTEZfVElNRVMgfHwgIXRoaXMuSEVMSVVNX0hBTEZfVElNRVMpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBpbml0aWFsaXphdGlvbiBpZiBhcnJheXMgYXJlIG5vdCByZWFkeVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbml0cm9nZW5IYWxmVGltZSA9IE5JVFJPR0VOX0hBTEZfVElNRVNbaV07XG4gICAgICAgICAgICBjb25zdCBoZWxpdW1IYWxmVGltZSA9IEhFTElVTV9IQUxGX1RJTUVTW2ldO1xuICAgICAgICAgICAgaWYgKG5pdHJvZ2VuSGFsZlRpbWUgPT09IHVuZGVmaW5lZCB8fCBoZWxpdW1IYWxmVGltZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhhbGYtdGltZSBmb3IgY29tcGFydG1lbnQgJHtpICsgMX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZwbUJDb21wYXJ0bWVudCA9IHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IGkgKyAxLFxuICAgICAgICAgICAgICAgIG5pdHJvZ2VuSGFsZlRpbWUsXG4gICAgICAgICAgICAgICAgaGVsaXVtSGFsZlRpbWUsXG4gICAgICAgICAgICAgICAgbml0cm9nZW5Mb2FkaW5nOiAwLjc5ICogdGhpcy5zdXJmYWNlUHJlc3N1cmUsIC8vIFN1cmZhY2UgZXF1aWxpYnJpdW1cbiAgICAgICAgICAgICAgICBoZWxpdW1Mb2FkaW5nOiAwLjAsXG4gICAgICAgICAgICAgICAgaW5pdGlhbENyaXRpY2FsUmFkaXVzOiB0aGlzLmNhbGN1bGF0ZUluaXRpYWxDcml0aWNhbFJhZGl1cyhpICsgMSksXG4gICAgICAgICAgICAgICAgYWRqdXN0ZWRDcml0aWNhbFJhZGl1czogMCxcbiAgICAgICAgICAgICAgICBtYXhDcnVzaGluZ1ByZXNzdXJlOiAwLFxuICAgICAgICAgICAgICAgIG9uc2V0T2ZJbXBlcm1lYWJpbGl0eTogMCxcbiAgICAgICAgICAgICAgICBnZXQgdG90YWxMb2FkaW5nKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uaXRyb2dlbkxvYWRpbmcgKyB0aGlzLmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFNldCBpbml0aWFsIGFkanVzdGVkIGNyaXRpY2FsIHJhZGl1c1xuICAgICAgICAgICAgdnBtQkNvbXBhcnRtZW50LmFkanVzdGVkQ3JpdGljYWxSYWRpdXMgPSB2cG1CQ29tcGFydG1lbnQuaW5pdGlhbENyaXRpY2FsUmFkaXVzO1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBzYW1lIG9iamVjdCBmb3IgYm90aCBhcnJheXMgdG8gbWFpbnRhaW4gc3luY1xuICAgICAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMucHVzaCh2cG1CQ29tcGFydG1lbnQpO1xuICAgICAgICAgICAgdGhpcy52cG1CQ29tcGFydG1lbnRzLnB1c2godnBtQkNvbXBhcnRtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVUaXNzdWVMb2FkaW5ncyh0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCBuaXRyb2dlblBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5uaXRyb2dlbik7XG4gICAgICAgIGNvbnN0IGhlbGl1bVBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5oZWxpdW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGlzc3VlQ29tcGFydG1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wYXJ0bWVudCA9IHRoaXMudGlzc3VlQ29tcGFydG1lbnRzW2ldO1xuICAgICAgICAgICAgY29uc3QgdnBtQkNvbXBhcnRtZW50ID0gdGhpcy52cG1CQ29tcGFydG1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKCFjb21wYXJ0bWVudCB8fCAhdnBtQkNvbXBhcnRtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGNvbXBhcnRtZW50IGRhdGEgZm9yIGluZGV4ICR7aX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBuaXRyb2dlbiBsb2FkaW5nXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZywgbml0cm9nZW5QUCwgY29tcGFydG1lbnQubml0cm9nZW5IYWxmVGltZSwgdGltZVN0ZXApO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGhlbGl1bSBsb2FkaW5nXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nID0gdGhpcy5jYWxjdWxhdGVIYWxkYW5lTG9hZGluZyhjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nLCBoZWxpdW1QUCwgY29tcGFydG1lbnQuaGVsaXVtSGFsZlRpbWUsIHRpbWVTdGVwKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBWUE0tQiBzcGVjaWZpYyBwYXJhbWV0ZXJzXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1YmJsZUR5bmFtaWNzKHZwbUJDb21wYXJ0bWVudCwgdGltZVN0ZXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbGN1bGF0ZUNlaWxpbmcoKSB7XG4gICAgICAgIGxldCBtYXhDZWlsaW5nID0gMDtcbiAgICAgICAgZm9yIChjb25zdCB2cG1CQ29tcGFydG1lbnQgb2YgdGhpcy52cG1CQ29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcodnBtQkNvbXBhcnRtZW50KTtcbiAgICAgICAgICAgIG1heENlaWxpbmcgPSBNYXRoLm1heChtYXhDZWlsaW5nLCBjZWlsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgbWF4Q2VpbGluZyk7XG4gICAgfVxuICAgIGNhbGN1bGF0ZURlY29tcHJlc3Npb25TdG9wcygpIHtcbiAgICAgICAgY29uc3Qgc3RvcHMgPSBbXTtcbiAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ2VpbGluZygpO1xuICAgICAgICBpZiAoY2VpbGluZyA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcHM7IC8vIE5vIGRlY29tcHJlc3Npb24gcmVxdWlyZWRcbiAgICAgICAgfVxuICAgICAgICAvLyBHZW5lcmF0ZSBzdG9wcyBhdCAzbSBpbnRlcnZhbHMgc3RhcnRpbmcgZnJvbSBjZWlsaW5nXG4gICAgICAgIGxldCBjdXJyZW50RGVwdGggPSBNYXRoLmNlaWwoY2VpbGluZyAvIDMpICogMztcbiAgICAgICAgd2hpbGUgKGN1cnJlbnREZXB0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3BUaW1lID0gdGhpcy5jYWxjdWxhdGVTdG9wVGltZShjdXJyZW50RGVwdGgpO1xuICAgICAgICAgICAgaWYgKHN0b3BUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIHN0b3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkZXB0aDogY3VycmVudERlcHRoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBzdG9wVGltZSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzTWl4OiB0aGlzLmN1cnJlbnREaXZlU3RhdGUuZ2FzTWl4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50RGVwdGggLT0gMztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcHM7XG4gICAgfVxuICAgIGNhbkFzY2VuZERpcmVjdGx5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCkgPD0gMDtcbiAgICB9XG4gICAgZ2V0TW9kZWxOYW1lKCkge1xuICAgICAgICByZXR1cm4gYFZQTS1CKyR7dGhpcy5jb25zZXJ2YXRpc21MZXZlbH1gO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBtaWNyb2J1YmJsZXMgZm9yIGEgZ2l2ZW4gY29tcGFydG1lbnRcbiAgICAgKiBUaGlzIGlzIGEga2V5IGZlYXR1cmUgb2YgdGhlIFZQTS1CIG1vZGVsXG4gICAgICovXG4gICAgY2FsY3VsYXRlQnViYmxlQ291bnQoY29tcGFydG1lbnROdW1iZXIpIHtcbiAgICAgICAgaWYgKGNvbXBhcnRtZW50TnVtYmVyIDwgMSB8fCBjb21wYXJ0bWVudE51bWJlciA+IDE2KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBhcnRtZW50IG51bWJlciBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTYnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2cG1CQ29tcGFydG1lbnQgPSB0aGlzLnZwbUJDb21wYXJ0bWVudHNbY29tcGFydG1lbnROdW1iZXIgLSAxXTtcbiAgICAgICAgaWYgKCF2cG1CQ29tcGFydG1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcGFydG1lbnQgJHtjb21wYXJ0bWVudE51bWJlcn0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gdnBtQkNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIHZwbUJDb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAvLyBDYWxjdWxhdGUgYnViYmxlIHZvbHVtZSB1c2luZyBjcml0aWNhbCB2b2x1bWUgaHlwb3RoZXNpc1xuICAgICAgICBjb25zdCBleGNlc3NQcmVzc3VyZSA9IE1hdGgubWF4KDAsIHRvdGFsTG9hZGluZyAtIHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmUpO1xuICAgICAgICBpZiAoZXhjZXNzUHJlc3N1cmUgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7IC8vIE5vIGJ1YmJsZXMgaWYgbm8gc3VwZXJzYXR1cmF0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLy8gVlBNLUIgYnViYmxlIGNvdW50IGNhbGN1bGF0aW9uXG4gICAgICAgIGNvbnN0IGNyaXRpY2FsUmFkaXVzID0gdnBtQkNvbXBhcnRtZW50LmFkanVzdGVkQ3JpdGljYWxSYWRpdXM7XG4gICAgICAgIGNvbnN0IGJ1YmJsZVJhZGl1cyA9IHRoaXMuY2FsY3VsYXRlQnViYmxlUmFkaXVzKGV4Y2Vzc1ByZXNzdXJlLCBjcml0aWNhbFJhZGl1cyk7XG4gICAgICAgIC8vIE51bWJlciBvZiBidWJibGVzIGJhc2VkIG9uIGNyaXRpY2FsIHZvbHVtZSBsYW1iZGFcbiAgICAgICAgY29uc3QgYnViYmxlVm9sdW1lID0gKDQuMCAvIDMuMCkgKiBNYXRoLlBJICogTWF0aC5wb3coYnViYmxlUmFkaXVzIC8gMTAwMDAwMCwgMyk7IC8vIENvbnZlcnQgbm0gdG8gbVxuICAgICAgICBjb25zdCBidWJibGVDb3VudCA9IHRoaXMuYnViYmxlUGFyYW1ldGVycy5jcml0aWNhbFZvbHVtZUxhbWJkYSAvIGJ1YmJsZVZvbHVtZTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGJ1YmJsZUNvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IFZQTS1CIHNwZWNpZmljIGNvbXBhcnRtZW50IGRhdGFcbiAgICAgKi9cbiAgICBnZXRWcG1CQ29tcGFydG1lbnREYXRhKGNvbXBhcnRtZW50TnVtYmVyKSB7XG4gICAgICAgIGlmIChjb21wYXJ0bWVudE51bWJlciA8IDEgfHwgY29tcGFydG1lbnROdW1iZXIgPiAxNikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb21wYXJ0bWVudCBudW1iZXIgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDE2Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLnZwbUJDb21wYXJ0bWVudHNbY29tcGFydG1lbnROdW1iZXIgLSAxXTtcbiAgICAgICAgaWYgKCFjb21wYXJ0bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wYXJ0bWVudCAke2NvbXBhcnRtZW50TnVtYmVyfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5jb21wYXJ0bWVudCB9O1xuICAgIH1cbiAgICBjYWxjdWxhdGVJbml0aWFsQ3JpdGljYWxSYWRpdXMoY29tcGFydG1lbnROdW1iZXIpIHtcbiAgICAgICAgLy8gVlBNLUIgaW5pdGlhbCBjcml0aWNhbCByYWRpdXMgdmFsdWVzIGluIG5hbm9tZXRlcnNcbiAgICAgICAgY29uc3QgaW5pdGlhbFJhZGlpID0gW1xuICAgICAgICAgICAgMS4yNTk5LCAxLjAwMDAsIDAuODYxOCwgMC43NTYyLCAwLjY2NjcsIDAuNTkzMywgMC41MjgyLCAwLjQ3MTAsXG4gICAgICAgICAgICAwLjQxODcsIDAuMzc5OCwgMC4zNDk3LCAwLjMyMjMsIDAuMjk3MSwgMC4yNzM3LCAwLjI1MjMsIDAuMjMyN1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCByYWRpdXMgPSBpbml0aWFsUmFkaWlbY29tcGFydG1lbnROdW1iZXIgLSAxXTtcbiAgICAgICAgaWYgKHJhZGl1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29tcGFydG1lbnQgbnVtYmVyOiAke2NvbXBhcnRtZW50TnVtYmVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByYWRpdXMgKiAxMDAwOyAvLyBDb252ZXJ0IHRvIG5tXG4gICAgfVxuICAgIHVwZGF0ZUJ1YmJsZUR5bmFtaWNzKGNvbXBhcnRtZW50LCB0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICBjb25zdCBjdXJyZW50UHJlc3N1cmUgPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuYW1iaWVudFByZXNzdXJlO1xuICAgICAgICAvLyBVcGRhdGUgbWF4aW11bSBjcnVzaGluZyBwcmVzc3VyZVxuICAgICAgICBjb21wYXJ0bWVudC5tYXhDcnVzaGluZ1ByZXNzdXJlID0gTWF0aC5tYXgoY29tcGFydG1lbnQubWF4Q3J1c2hpbmdQcmVzc3VyZSwgY3VycmVudFByZXNzdXJlKTtcbiAgICAgICAgLy8gRW5zdXJlIGNyaXRpY2FsIHJhZGl1cyBpcyBuZXZlciB6ZXJvIHRvIHByZXZlbnQgZGl2aXNpb24gYnkgemVyb1xuICAgICAgICBjb21wYXJ0bWVudC5hZGp1c3RlZENyaXRpY2FsUmFkaXVzID0gTWF0aC5tYXgoY29tcGFydG1lbnQuYWRqdXN0ZWRDcml0aWNhbFJhZGl1cywgMC4wMDEpO1xuICAgICAgICAvLyBDYWxjdWxhdGUgb25zZXQgb2YgaW1wZXJtZWFiaWxpdHlcbiAgICAgICAgY29tcGFydG1lbnQub25zZXRPZkltcGVybWVhYmlsaXR5ID0gY3VycmVudFByZXNzdXJlICtcbiAgICAgICAgICAgICgyLjAgKiB0aGlzLmJ1YmJsZVBhcmFtZXRlcnMuc3VyZmFjZVRlbnNpb24pIC8gY29tcGFydG1lbnQuYWRqdXN0ZWRDcml0aWNhbFJhZGl1cztcbiAgICAgICAgLy8gVXBkYXRlIGFkanVzdGVkIGNyaXRpY2FsIHJhZGl1cyBiYXNlZCBvbiBidWJibGUgZHluYW1pY3NcbiAgICAgICAgaWYgKHRvdGFsTG9hZGluZyA+IGN1cnJlbnRQcmVzc3VyZSkge1xuICAgICAgICAgICAgLy8gU3VwZXJzYXR1cmF0aW9uOiBidWJibGVzIG1heSBncm93XG4gICAgICAgICAgICBjb25zdCBzdXBlcnNhdHVyYXRpb24gPSB0b3RhbExvYWRpbmcgLSBjdXJyZW50UHJlc3N1cmU7XG4gICAgICAgICAgICBjb25zdCByYWRpdXNHcm93dGhGYWN0b3IgPSAxLjAgKyAoc3VwZXJzYXR1cmF0aW9uICogMC4xKTsgLy8gU2ltcGxpZmllZCBncm93dGggbW9kZWxcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmFkanVzdGVkQ3JpdGljYWxSYWRpdXMgPSBNYXRoLm1pbihjb21wYXJ0bWVudC5hZGp1c3RlZENyaXRpY2FsUmFkaXVzICogcmFkaXVzR3Jvd3RoRmFjdG9yLCBjb21wYXJ0bWVudC5pbml0aWFsQ3JpdGljYWxSYWRpdXMgKiAyLjAgLy8gTGltaXQgZ3Jvd3RoXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVW5kZXJzYXR1cmF0aW9uOiBidWJibGVzIHNocmluayBiYWNrIHRvd2FyZCBpbml0aWFsIHNpemVcbiAgICAgICAgICAgIGNvbnN0IHNocmlua2FnZVJhdGUgPSBNYXRoLm1pbigwLjk5LCB0aW1lU3RlcCAvIHRoaXMuYnViYmxlUGFyYW1ldGVycy5yZWdlbmVyYXRpb25UaW1lQ29uc3RhbnQpOyAvLyBMaW1pdCBzaHJpbmthZ2UgcmF0ZVxuICAgICAgICAgICAgY29tcGFydG1lbnQuYWRqdXN0ZWRDcml0aWNhbFJhZGl1cyA9IGNvbXBhcnRtZW50LmFkanVzdGVkQ3JpdGljYWxSYWRpdXMgKiAoMS4wIC0gc2hyaW5rYWdlUmF0ZSkgK1xuICAgICAgICAgICAgICAgIGNvbXBhcnRtZW50LmluaXRpYWxDcml0aWNhbFJhZGl1cyAqIHNocmlua2FnZVJhdGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW5zdXJlIGNyaXRpY2FsIHJhZGl1cyBzdGF5cyB3aXRoaW4gcmVhc29uYWJsZSBib3VuZHNcbiAgICAgICAgY29tcGFydG1lbnQuYWRqdXN0ZWRDcml0aWNhbFJhZGl1cyA9IE1hdGgubWF4KE1hdGgubWluKGNvbXBhcnRtZW50LmFkanVzdGVkQ3JpdGljYWxSYWRpdXMsIGNvbXBhcnRtZW50LmluaXRpYWxDcml0aWNhbFJhZGl1cyAqIDEwLjApLCBjb21wYXJ0bWVudC5pbml0aWFsQ3JpdGljYWxSYWRpdXMgKiAwLjEpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpIHtcbiAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGFsbG93YWJsZSBzdXBlcnNhdHVyYXRpb24gYmFzZWQgb24gVlBNLUIgbW9kZWxcbiAgICAgICAgY29uc3QgYWxsb3dhYmxlU3VwZXJzYXR1cmF0aW9uID0gdGhpcy5jYWxjdWxhdGVBbGxvd2FibGVTdXBlcnNhdHVyYXRpb24oY29tcGFydG1lbnQpO1xuICAgICAgICAvLyBDZWlsaW5nIGlzIGRlcHRoIHdoZXJlIGFtYmllbnQgcHJlc3N1cmUgZXF1YWxzIHRvdGFsIGxvYWRpbmcgbWludXMgYWxsb3dhYmxlIHN1cGVyc2F0dXJhdGlvblxuICAgICAgICBjb25zdCBjZWlsaW5nUHJlc3N1cmUgPSB0b3RhbExvYWRpbmcgLSBhbGxvd2FibGVTdXBlcnNhdHVyYXRpb247XG4gICAgICAgIGNvbnN0IGNlaWxpbmdEZXB0aCA9IChjZWlsaW5nUHJlc3N1cmUgLSB0aGlzLnN1cmZhY2VQcmVzc3VyZSkgLyAwLjE7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBjZWlsaW5nRGVwdGgpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVBbGxvd2FibGVTdXBlcnNhdHVyYXRpb24oY29tcGFydG1lbnQpIHtcbiAgICAgICAgLy8gVlBNLUIgYWxsb3dhYmxlIHN1cGVyc2F0dXJhdGlvbiBiYXNlZCBvbiBidWJibGUgbWVjaGFuaWNzXG4gICAgICAgIGNvbnN0IHN1cmZhY2VUZW5zaW9uID0gdGhpcy5idWJibGVQYXJhbWV0ZXJzLnN1cmZhY2VUZW5zaW9uO1xuICAgICAgICBjb25zdCBjcml0aWNhbFJhZGl1cyA9IE1hdGgubWF4KGNvbXBhcnRtZW50LmFkanVzdGVkQ3JpdGljYWxSYWRpdXMsIDAuMDAxKTsgLy8gUHJldmVudCBkaXZpc2lvbiBieSB6ZXJvXG4gICAgICAgIC8vIEJhc2ljIFZQTS1CIHN1cGVyc2F0dXJhdGlvbiBsaW1pdFxuICAgICAgICBjb25zdCBidWJibGVQcmVzc3VyZSA9ICgyLjAgKiBzdXJmYWNlVGVuc2lvbikgLyBjcml0aWNhbFJhZGl1cztcbiAgICAgICAgLy8gQXBwbHkgY29uc2VydmF0aXNtIGFkanVzdG1lbnRcbiAgICAgICAgY29uc3QgY29uc2VydmF0aXNtRmFjdG9yID0gMS4wICsgKHRoaXMuY29uc2VydmF0aXNtTGV2ZWwgKiAwLjEpO1xuICAgICAgICByZXR1cm4gYnViYmxlUHJlc3N1cmUgLyBjb25zZXJ2YXRpc21GYWN0b3I7XG4gICAgfVxuICAgIGNhbGN1bGF0ZUJ1YmJsZVJhZGl1cyhleGNlc3NQcmVzc3VyZSwgY3JpdGljYWxSYWRpdXMpIHtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGJ1YmJsZSByYWRpdXMgdW5kZXIgcHJlc3N1cmUgdXNpbmcgVlBNLUIgbW9kZWxcbiAgICAgICAgY29uc3Qgc3VyZmFjZVRlbnNpb24gPSB0aGlzLmJ1YmJsZVBhcmFtZXRlcnMuc3VyZmFjZVRlbnNpb247XG4gICAgICAgIGNvbnN0IHNhZmVDcml0aWNhbFJhZGl1cyA9IE1hdGgubWF4KGNyaXRpY2FsUmFkaXVzLCAwLjAwMSk7IC8vIFByZXZlbnQgZGl2aXNpb24gYnkgemVyb1xuICAgICAgICAvLyBTaW1wbGlmaWVkIGJ1YmJsZSByYWRpdXMgY2FsY3VsYXRpb25cbiAgICAgICAgY29uc3QgcHJlc3N1cmVSYXRpbyA9IGV4Y2Vzc1ByZXNzdXJlIC8gKCgyLjAgKiBzdXJmYWNlVGVuc2lvbikgLyBzYWZlQ3JpdGljYWxSYWRpdXMpO1xuICAgICAgICByZXR1cm4gc2FmZUNyaXRpY2FsUmFkaXVzICogTWF0aC5wb3coTWF0aC5tYXgocHJlc3N1cmVSYXRpbywgMC4wMDEpLCAxLjAgLyAzLjApO1xuICAgIH1cbiAgICBjYWxjdWxhdGVTdG9wVGltZShkZXB0aCkge1xuICAgICAgICAvLyBTaW1wbGlmaWVkIHN0b3AgdGltZSBjYWxjdWxhdGlvblxuICAgICAgICAvLyBJbiBhIGZ1bGwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgaW52b2x2ZSBpdGVyYXRpdmUgY2FsY3VsYXRpb25cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSB0aW1lIG5lZWRlZCBmb3IgdGlzc3VlcyB0byBvZmYtZ2FzIHN1ZmZpY2llbnRseVxuICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCk7XG4gICAgICAgIGlmIChkZXB0aCA8PSBjZWlsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gMDsgLy8gTm8gc3RvcCBuZWVkZWQgYXQgdGhpcyBkZXB0aFxuICAgICAgICB9XG4gICAgICAgIC8vIEJhc2ljIHN0b3AgdGltZSBlc3RpbWF0aW9uICh3b3VsZCBiZSBtb3JlIGNvbXBsZXggaW4gcmVhbCBpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgY29uc3QgZGVwdGhEaWZmZXJlbmNlID0gZGVwdGggLSBjZWlsaW5nO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5taW4oMzAsIGRlcHRoRGlmZmVyZW5jZSAqIDIpKTsgLy8gMS0zMCBtaW51dGVzXG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBEQ1MgcmlzayBhcyBhIHBlcmNlbnRhZ2UgYmFzZWQgb24gVlBNLUIgYnViYmxlIG1lY2hhbmljc1xuICAgICAqIFVzZXMgYnViYmxlIGNvdW50cyBhbmQgc3VwZXJzYXR1cmF0aW9uIHJhdGlvcyBhY3Jvc3MgYWxsIGNvbXBhcnRtZW50c1xuICAgICAqIEByZXR1cm5zIERDUyByaXNrIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApXG4gICAgICovXG4gICAgY2FsY3VsYXRlRENTUmlzaygpIHtcbiAgICAgICAgbGV0IG1heFJpc2tGYWN0b3IgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAxNjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wYXJ0bWVudCA9IHRoaXMudnBtQkNvbXBhcnRtZW50c1tpIC0gMV07XG4gICAgICAgICAgICBpZiAoIWNvbXBhcnRtZW50KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgIGNvbnN0IGFtYmllbnRQcmVzc3VyZSA9IHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmU7XG4gICAgICAgICAgICBjb25zdCBzdXBlcnNhdHVyYXRpb24gPSBNYXRoLm1heCgwLCB0b3RhbExvYWRpbmcgLSBhbWJpZW50UHJlc3N1cmUpO1xuICAgICAgICAgICAgaWYgKHN1cGVyc2F0dXJhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgcmlzayBiYXNlZCBvbiBidWJibGUgY291bnQgYW5kIGFsbG93YWJsZSBzdXBlcnNhdHVyYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2FibGVTdXBlcnNhdHVyYXRpb24gPSB0aGlzLmNhbGN1bGF0ZUFsbG93YWJsZVN1cGVyc2F0dXJhdGlvbihjb21wYXJ0bWVudCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnViYmxlQ291bnQgPSB0aGlzLmNhbGN1bGF0ZUJ1YmJsZUNvdW50KGkpO1xuICAgICAgICAgICAgICAgIC8vIFJpc2sgZmFjdG9yIGNvbWJpbmVzIHN1cGVyc2F0dXJhdGlvbiByYXRpbyBhbmQgYnViYmxlIGRlbnNpdHlcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBlcnNhdHVyYXRpb25SYXRpbyA9IHN1cGVyc2F0dXJhdGlvbiAvIE1hdGgubWF4KGFsbG93YWJsZVN1cGVyc2F0dXJhdGlvbiwgMC4wMSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnViYmxlUmlza0ZhY3RvciA9IE1hdGgubG9nMTAoTWF0aC5tYXgoYnViYmxlQ291bnQsIDEpKSAvIDEwOyAvLyBMb2cgc2NhbGUgZm9yIGJ1YmJsZSBjb3VudFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhcnRtZW50UmlzayA9IHN1cGVyc2F0dXJhdGlvblJhdGlvICsgYnViYmxlUmlza0ZhY3RvcjtcbiAgICAgICAgICAgICAgICBtYXhSaXNrRmFjdG9yID0gTWF0aC5tYXgobWF4Umlza0ZhY3RvciwgY29tcGFydG1lbnRSaXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDb252ZXJ0IHRvIHBlcmNlbnRhZ2Ugd2l0aCBWUE0tQiBzcGVjaWZpYyBzY2FsaW5nXG4gICAgICAgIGNvbnN0IHJpc2tQZXJjZW50YWdlID0gTWF0aC5taW4oMTAwLCBtYXhSaXNrRmFjdG9yICogMzApO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChyaXNrUGVyY2VudGFnZSAqIDEwKSAvIDEwOyAvLyBSb3VuZCB0byAxIGRlY2ltYWwgcGxhY2VcbiAgICB9XG59XG5leHBvcnRzLlZwbUJNb2RlbCA9IFZwbUJNb2RlbDtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBSR0JNIChSZWR1Y2VkIEdyYWRpZW50IEJ1YmJsZSBNb2RlbCkgLSBGb2xkZWQgSW1wbGVtZW50YXRpb25cbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgUkdCTSBkZWNvbXByZXNzaW9uIG1vZGVsIGFzIGZvbGRlZCBvdmVyIGEgSGFsZGFuZWFuXG4gKiBkaXNzb2x2ZWQgZ2FzIG1vZGVsIHVzaW5nIGYtZmFjdG9ycyBmb3IgbWljcm9idWJibGUgbW9kaWZpY2F0aW9uLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gZm9sbG93cyB0aGUgUkdCTSBhcHByb2FjaCBkZXZlbG9wZWQgYnkgQnJ1Y2UgV2llbmtlLFxuICogY29tYmluaW5nIHRyYWRpdGlvbmFsIEhhbGRhbmVhbiBraW5ldGljcyB3aXRoIGJ1YmJsZSBmb3JtYXRpb24gZmFjdG9ycy5cbiAqXG4gKiBLZXkgRmVhdHVyZXM6XG4gKiAtIDE2IHRpc3N1ZSBjb21wYXJ0bWVudHMgYmFzZWQgb24gQsO8aGxtYW5uIFpILUwxNkNcbiAqIC0gTWljcm9idWJibGUgZm9ybWF0aW9uIHRyYWNraW5nIHVzaW5nIGYtZmFjdG9yc1xuICogLSBSZXBldGl0aXZlIGRpdmUgYW5kIHJldmVyc2UgZGl2ZSBwZW5hbHRpZXNcbiAqIC0gQnViYmxlIGR5bmFtaWNzIGFuZCBjb25zZXJ2YXRpdmUgZi1mYWN0b3IgbW9kaWZpY2F0aW9uc1xuICpcbiAqIEJhc2VkIG9uIHRoZSB3b3JrIG9mOlxuICogLSBXaWVua2UsIEIuUi4gKDE5OTEpIC0gUkdCTSB0aGVvcnkgYW5kIGFwcGxpY2F0aW9uXG4gKiAtIFdpZW5rZSwgQi5SLiAoMjAwMykgLSBSZWR1Y2VkIGdyYWRpZW50IGJ1YmJsZSBtb2RlbCBpbiBkZXB0aFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJnYm1Gb2xkZWRNb2RlbCA9IHZvaWQgMDtcbmNvbnN0IERlY29tcHJlc3Npb25Nb2RlbF8xID0gcmVxdWlyZShcIi4vRGVjb21wcmVzc2lvbk1vZGVsXCIpO1xuLyoqXG4gKiBSR0JNIChSZWR1Y2VkIEdyYWRpZW50IEJ1YmJsZSBNb2RlbCkgLSBGb2xkZWQgSW1wbGVtZW50YXRpb25cbiAqL1xuY2xhc3MgUmdibUZvbGRlZE1vZGVsIGV4dGVuZHMgRGVjb21wcmVzc2lvbk1vZGVsXzEuRGVjb21wcmVzc2lvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncyA9IHt9KSB7XG4gICAgICAgIC8vIENhbGwgcGFyZW50IGNvbnN0cnVjdG9yIGZpcnN0IChyZXF1aXJlZCBpbiBUeXBlU2NyaXB0KVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJnYm1Db21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5maXJzdFN0b3BEZXB0aCA9IDA7XG4gICAgICAgIHRoaXMuZGl2ZUNvdW50ID0gMTsgLy8gTnVtYmVyIG9mIGRpdmVzIHRvZGF5XG4gICAgICAgIHRoaXMubGFzdFN1cmZhY2VUaW1lID0gMDsgLy8gVGltZSBhdCBzdXJmYWNlIGluIGhvdXJzXG4gICAgICAgIHRoaXMubWF4RGVwdGhSZWFjaGVkID0gMDtcbiAgICAgICAgdGhpcy50b3RhbEJ1YmJsZVZvbHVtZSA9IDA7XG4gICAgICAgIC8vIFJHQk0gdXNlcyBCw7xobG1hbm4gWkgtTDE2QyBhcyBiYXNlIHdpdGggbW9kaWZpY2F0aW9uc1xuICAgICAgICB0aGlzLk5JVFJPR0VOX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICA1LjAsIDguMCwgMTIuNSwgMTguNSwgMjcuMCwgMzguMywgNTQuMywgNzcuMCxcbiAgICAgICAgICAgIDEwOS4wLCAxNDYuMCwgMTg3LjAsIDIzOS4wLCAzMDUuMCwgMzkwLjAsIDQ5OC4wLCA2MzUuMFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLkhFTElVTV9IQUxGX1RJTUVTID0gW1xuICAgICAgICAgICAgMS44OCwgMy4wMiwgNC43MiwgNi45OSwgMTAuMjEsIDE0LjQ4LCAyMC41MywgMjkuMTEsXG4gICAgICAgICAgICA0MS4yMCwgNTUuMTksIDcwLjY5LCA5MC4zNCwgMTE1LjI5LCAxNDcuNDIsIDE4OC4yNCwgMjQwLjAzXG4gICAgICAgIF07XG4gICAgICAgIC8vIE1vZGlmaWVkIELDvGhsbWFubiBNLXZhbHVlcyBmb3IgUkdCTVxuICAgICAgICB0aGlzLk5JVFJPR0VOX01fVkFMVUVTX0EgPSBbXG4gICAgICAgICAgICAxLjI1OTksIDEuMDAwMCwgMC44NjE4LCAwLjc1NjIsIDAuNjY2NywgMC41OTMzLCAwLjUyODIsIDAuNDcxMCxcbiAgICAgICAgICAgIDAuNDE4NywgMC4zNzk4LCAwLjM0OTcsIDAuMzIyMywgMC4yOTcxLCAwLjI3MzcsIDAuMjUyMywgMC4yMzI3XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuTklUUk9HRU5fTV9WQUxVRVNfQiA9IFtcbiAgICAgICAgICAgIDAuNTA1MCwgMC42NTE0LCAwLjcyMjIsIDAuNzgyNSwgMC44MTI2LCAwLjg0MzQsIDAuODY5MywgMC44OTEwLFxuICAgICAgICAgICAgMC45MDkyLCAwLjkyMjIsIDAuOTMxOSwgMC45NDAzLCAwLjk0NzcsIDAuOTU0NCwgMC45NjAyLCAwLjk2NTNcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5IRUxJVU1fTV9WQUxVRVNfQSA9IFtcbiAgICAgICAgICAgIDEuNzQyNCwgMS4zODMwLCAxLjE5MTksIDEuMDQ1OCwgMC45MjIwLCAwLjgyMDUsIDAuNzMwNSwgMC42NTAyLFxuICAgICAgICAgICAgMC41OTUwLCAwLjU1NDUsIDAuNTMzMywgMC41MTg5LCAwLjUxODEsIDAuNTE3NiwgMC41MTcyLCAwLjUxMTlcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5IRUxJVU1fTV9WQUxVRVNfQiA9IFtcbiAgICAgICAgICAgIDAuNDI0NSwgMC41NzQ3LCAwLjY1MjcsIDAuNzIyMywgMC43NTgyLCAwLjc5NTcsIDAuODI3OSwgMC44NTUzLFxuICAgICAgICAgICAgMC44NzU3LCAwLjg5MDMsIDAuODk5NywgMC45MDczLCAwLjkxMjIsIDAuOTE3MSwgMC45MjE3LCAwLjkyNjdcbiAgICAgICAgXTtcbiAgICAgICAgLy8gUkdCTS1zcGVjaWZpYyBjb25zdGFudHNcbiAgICAgICAgdGhpcy5CQVNFX0JVQkJMRV9TRUVEX0NPVU5UID0gMTAwMDsgLy8gU2VlZHMgcGVyIGNvbXBhcnRtZW50XG4gICAgICAgIHRoaXMuQlVCQkxFX0ZPUk1BVElPTl9DT0VGRklDSUVOVCA9IDAuODU7XG4gICAgICAgIHRoaXMuTUlDUk9CVUJCTEVfU1VSVklWQUxfVElNRSA9IDEyMDsgLy8gbWludXRlc1xuICAgICAgICB0aGlzLlJFUEVUSVRJVkVfRElWRV9USFJFU0hPTEQgPSA2OyAvLyBob3Vyc1xuICAgICAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICAgICAgY29uc2VydmF0aXNtOiBzZXR0aW5ncy5jb25zZXJ2YXRpc20gPz8gMixcbiAgICAgICAgICAgIGVuYWJsZVJlcGV0aXRpdmVQZW5hbHR5OiBzZXR0aW5ncy5lbmFibGVSZXBldGl0aXZlUGVuYWx0eSA/PyB0cnVlLFxuICAgICAgICAgICAgLi4uc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBpbnN0YW5jZSB2YXJpYWJsZXMgYWZ0ZXIgc3VwZXIoKVxuICAgICAgICB0aGlzLnJnYm1Db21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5maXJzdFN0b3BEZXB0aCA9IDA7XG4gICAgICAgIHRoaXMuZGl2ZUNvdW50ID0gMTtcbiAgICAgICAgdGhpcy5sYXN0U3VyZmFjZVRpbWUgPSAwO1xuICAgICAgICB0aGlzLm1heERlcHRoUmVhY2hlZCA9IDA7XG4gICAgICAgIHRoaXMudG90YWxCdWJibGVWb2x1bWUgPSAwO1xuICAgICAgICAvLyBWYWxpZGF0ZSBzZXR0aW5nc1xuICAgICAgICB0aGlzLnZhbGlkYXRlU2V0dGluZ3MoKTtcbiAgICAgICAgLy8gUmUtaW5pdGlhbGl6ZSB0aXNzdWUgY29tcGFydG1lbnRzIHdpdGggUkdCTS1zcGVjaWZpYyBkYXRhXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpO1xuICAgIH1cbiAgICB2YWxpZGF0ZVNldHRpbmdzKCkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jb25zZXJ2YXRpc20gPCAwIHx8IHRoaXMuc2V0dGluZ3MuY29uc2VydmF0aXNtID4gNSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSR0JNIGNvbnNlcnZhdGlzbSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXRpYWxpemVUaXNzdWVDb21wYXJ0bWVudHMoKSB7XG4gICAgICAgIHRoaXMudGlzc3VlQ29tcGFydG1lbnRzID0gW107XG4gICAgICAgIHRoaXMucmdibUNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICAvLyBJZiBzZXR0aW5ncyBhcmUgbm90IHlldCBpbml0aWFsaXplZCAoY2FsbGVkIGZyb20gcGFyZW50IGNvbnN0cnVjdG9yKSwgc2tpcCBpbml0aWFsaXphdGlvblxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJnYm1Db21wYXJ0bWVudCA9IHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IGkgKyAxLFxuICAgICAgICAgICAgICAgIG5pdHJvZ2VuSGFsZlRpbWU6IHRoaXMuTklUUk9HRU5fSEFMRl9USU1FU1tpXSxcbiAgICAgICAgICAgICAgICBoZWxpdW1IYWxmVGltZTogdGhpcy5IRUxJVU1fSEFMRl9USU1FU1tpXSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkxvYWRpbmc6IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSwgLy8gU3VyZmFjZSBlcXVpbGlicml1bVxuICAgICAgICAgICAgICAgIGhlbGl1bUxvYWRpbmc6IDAuMCxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbk1WYWx1ZUE6IHRoaXMuTklUUk9HRU5fTV9WQUxVRVNfQVtpXSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbk1WYWx1ZUI6IHRoaXMuTklUUk9HRU5fTV9WQUxVRVNfQltpXSxcbiAgICAgICAgICAgICAgICBoZWxpdW1NVmFsdWVBOiB0aGlzLkhFTElVTV9NX1ZBTFVFU19BW2ldLFxuICAgICAgICAgICAgICAgIGhlbGl1bU1WYWx1ZUI6IHRoaXMuSEVMSVVNX01fVkFMVUVTX0JbaV0sXG4gICAgICAgICAgICAgICAgY29tYmluZWRNVmFsdWVBOiB0aGlzLk5JVFJPR0VOX01fVkFMVUVTX0FbaV0sIC8vIFdpbGwgYmUgdXBkYXRlZFxuICAgICAgICAgICAgICAgIGNvbWJpbmVkTVZhbHVlQjogdGhpcy5OSVRST0dFTl9NX1ZBTFVFU19CW2ldLCAvLyBXaWxsIGJlIHVwZGF0ZWRcbiAgICAgICAgICAgICAgICBmRmFjdG9yOiAxLjAsIC8vIEluaXRpYWwgZi1mYWN0b3IgKG5vIGJ1YmJsZSBtb2RpZmljYXRpb24pXG4gICAgICAgICAgICAgICAgbWF4VGVuc2lvbjogMC43OSAqIHRoaXMuc3VyZmFjZVByZXNzdXJlLFxuICAgICAgICAgICAgICAgIGJ1YmJsZVNlZWRDb3VudDogdGhpcy5CQVNFX0JVQkJMRV9TRUVEX0NPVU5ULFxuICAgICAgICAgICAgICAgIGdldCB0b3RhbExvYWRpbmcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5pdHJvZ2VuTG9hZGluZyArIHRoaXMuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMucHVzaChyZ2JtQ29tcGFydG1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZ2JtQ29tcGFydG1lbnRzLnB1c2gocmdibUNvbXBhcnRtZW50KTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgY29tYmluZWQgTS12YWx1ZXMgYW5kIGYtZmFjdG9yc1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb21iaW5lZE1WYWx1ZXMocmdibUNvbXBhcnRtZW50KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRkZhY3RvcnMocmdibUNvbXBhcnRtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVUaXNzdWVMb2FkaW5ncyh0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCBuaXRyb2dlblBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5uaXRyb2dlbiwgdGhpcy5jdXJyZW50RGl2ZVN0YXRlLmFtYmllbnRQcmVzc3VyZSk7XG4gICAgICAgIGNvbnN0IGhlbGl1bVBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5oZWxpdW0sIHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmUpO1xuICAgICAgICAvLyBUcmFjayBtYXhpbXVtIGRlcHRoIHJlYWNoZWRcbiAgICAgICAgdGhpcy5tYXhEZXB0aFJlYWNoZWQgPSBNYXRoLm1heCh0aGlzLm1heERlcHRoUmVhY2hlZCwgdGhpcy5jdXJyZW50RGl2ZVN0YXRlLmRlcHRoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHJnYm1Db21wYXJ0bWVudCA9IHRoaXMucmdibUNvbXBhcnRtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICghY29tcGFydG1lbnQgfHwgIXJnYm1Db21wYXJ0bWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU3RvcmUgcHJldmlvdXMgbG9hZGluZyBmb3IgYnViYmxlIHRyYWNraW5nXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0xvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgLy8gVXBkYXRlIG5pdHJvZ2VuIGxvYWRpbmcgdXNpbmcgSGFsZGFuZSBlcXVhdGlvblxuICAgICAgICAgICAgY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nID0gdGhpcy5jYWxjdWxhdGVIYWxkYW5lTG9hZGluZyhjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcsIG5pdHJvZ2VuUFAsIGNvbXBhcnRtZW50Lm5pdHJvZ2VuSGFsZlRpbWUsIHRpbWVTdGVwKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBoZWxpdW0gbG9hZGluZyB1c2luZyBIYWxkYW5lIGVxdWF0aW9uXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nID0gdGhpcy5jYWxjdWxhdGVIYWxkYW5lTG9hZGluZyhjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nLCBoZWxpdW1QUCwgY29tcGFydG1lbnQuaGVsaXVtSGFsZlRpbWUsIHRpbWVTdGVwKTtcbiAgICAgICAgICAgIC8vIFRyYWNrIG1heGltdW0gdGVuc2lvbiBmb3IgYnViYmxlIGZvcm1hdGlvblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFRlbnNpb24gPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgcmdibUNvbXBhcnRtZW50Lm1heFRlbnNpb24gPSBNYXRoLm1heChyZ2JtQ29tcGFydG1lbnQubWF4VGVuc2lvbiwgY3VycmVudFRlbnNpb24pO1xuICAgICAgICAgICAgLy8gVXBkYXRlIG1pY3JvYnViYmxlIGR5bmFtaWNzXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1YmJsZUR5bmFtaWNzKHJnYm1Db21wYXJ0bWVudCwgdGltZVN0ZXAsIHByZXZpb3VzTG9hZGluZywgY3VycmVudFRlbnNpb24pO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGNvbWJpbmVkIE0tdmFsdWVzIGFuZCBmLWZhY3RvcnNcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29tYmluZWRNVmFsdWVzKHJnYm1Db21wYXJ0bWVudCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZGYWN0b3JzKHJnYm1Db21wYXJ0bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIHRvdGFsIGJ1YmJsZSB2b2x1bWVcbiAgICAgICAgdGhpcy51cGRhdGVUb3RhbEJ1YmJsZVZvbHVtZSgpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVDZWlsaW5nKCkge1xuICAgICAgICBsZXQgbWF4Q2VpbGluZyA9IDA7XG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZmlyc3Qgc3RvcCBkZXB0aCBpZiBub3QgYWxyZWFkeSBkb25lXG4gICAgICAgIGlmICh0aGlzLmZpcnN0U3RvcERlcHRoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0U3RvcERlcHRoID0gdGhpcy5jYWxjdWxhdGVGaXJzdFN0b3BEZXB0aCgpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29tcGFydG1lbnQgb2YgdGhpcy5yZ2JtQ29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpO1xuICAgICAgICAgICAgbWF4Q2VpbGluZyA9IE1hdGgubWF4KG1heENlaWxpbmcsIGNlaWxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBtYXhDZWlsaW5nKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlRGVjb21wcmVzc2lvblN0b3BzKCkge1xuICAgICAgICBjb25zdCBzdG9wcyA9IFtdO1xuICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCk7XG4gICAgICAgIGlmIChjZWlsaW5nIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9wcztcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxjdWxhdGUgZmlyc3Qgc3RvcCBkZXB0aCBmb3IgUkdCTSBkZWNvbXByZXNzaW9uIHBsYW5uaW5nXG4gICAgICAgIHRoaXMuZmlyc3RTdG9wRGVwdGggPSB0aGlzLmNhbGN1bGF0ZUZpcnN0U3RvcERlcHRoKCk7XG4gICAgICAgIC8vIEdlbmVyYXRlIHN0b3BzIGF0IDNtIGludGVydmFscyBzdGFydGluZyBmcm9tIGNlaWxpbmdcbiAgICAgICAgbGV0IGN1cnJlbnREZXB0aCA9IE1hdGguY2VpbChjZWlsaW5nIC8gMykgKiAzO1xuICAgICAgICB3aGlsZSAoY3VycmVudERlcHRoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcFRpbWUgPSB0aGlzLmNhbGN1bGF0ZVN0b3BUaW1lKGN1cnJlbnREZXB0aCk7XG4gICAgICAgICAgICBpZiAoc3RvcFRpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoOiBjdXJyZW50RGVwdGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHN0b3BUaW1lLFxuICAgICAgICAgICAgICAgICAgICBnYXNNaXg6IHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnREZXB0aCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdG9wcztcbiAgICB9XG4gICAgY2FuQXNjZW5kRGlyZWN0bHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUNlaWxpbmcoKSA8PSAwO1xuICAgIH1cbiAgICBnZXRNb2RlbE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBgUkdCTSAoZm9sZGVkKSAtIEMke3RoaXMuc2V0dGluZ3MuY29uc2VydmF0aXNtfWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBSR0JNIHNldHRpbmdzXG4gICAgICovXG4gICAgZ2V0UmdibVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnNldHRpbmdzIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBSR0JNIHNldHRpbmdzXG4gICAgICovXG4gICAgc2V0UmdibVNldHRpbmdzKG5ld1NldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH07XG4gICAgICAgIHRoaXMudmFsaWRhdGVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLmZpcnN0U3RvcERlcHRoID0gMDsgLy8gUmVzZXQgdG8gcmVjYWxjdWxhdGVcbiAgICAgICAgLy8gUmVpbml0aWFsaXplIGYtZmFjdG9ycyB3aXRoIG5ldyBjb25zZXJ2YXRpc21cbiAgICAgICAgdGhpcy5yZ2JtQ29tcGFydG1lbnRzLmZvckVhY2goY29tcGFydG1lbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGRmFjdG9ycyhjb21wYXJ0bWVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgUkdCTS1zcGVjaWZpYyBjb21wYXJ0bWVudCBkYXRhXG4gICAgICovXG4gICAgZ2V0UmdibUNvbXBhcnRtZW50RGF0YShjb21wYXJ0bWVudE51bWJlcikge1xuICAgICAgICBpZiAoY29tcGFydG1lbnROdW1iZXIgPCAxIHx8IGNvbXBhcnRtZW50TnVtYmVyID4gMTYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29tcGFydG1lbnQgbnVtYmVyIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxNicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBhcnRtZW50ID0gdGhpcy5yZ2JtQ29tcGFydG1lbnRzW2NvbXBhcnRtZW50TnVtYmVyIC0gMV07XG4gICAgICAgIGlmICghY29tcGFydG1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUkdCTSBjb21wYXJ0bWVudCAke2NvbXBhcnRtZW50TnVtYmVyfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5jb21wYXJ0bWVudCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdG90YWwgYnViYmxlIHZvbHVtZSBhY3Jvc3MgYWxsIGNvbXBhcnRtZW50c1xuICAgICAqL1xuICAgIGdldFRvdGFsQnViYmxlVm9sdW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b3RhbEJ1YmJsZVZvbHVtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIERDUyByaXNrIGJhc2VkIG9uIFJHQk0gYnViYmxlIGZvcm1hdGlvbiBhbmQgdGlzc3VlIHN1cGVyc2F0dXJhdGlvblxuICAgICAqL1xuICAgIGNhbGN1bGF0ZURDU1Jpc2soKSB7XG4gICAgICAgIGxldCBtYXhSaXNrID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTY7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLnJnYm1Db21wYXJ0bWVudHNbaSAtIDFdO1xuICAgICAgICAgICAgaWYgKCFjb21wYXJ0bWVudClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsTG9hZGluZyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICBjb25zdCBhbWJpZW50UHJlc3N1cmUgPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuYW1iaWVudFByZXNzdXJlO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIG1vZGlmaWVkIE0tdmFsdWUgd2l0aCBmLWZhY3RvciAodGhpcyBpcyB0aGUgY29yZSBSR0JNIGFwcHJvYWNoKVxuICAgICAgICAgICAgY29uc3QgYmFzZU1WYWx1ZSA9IGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQSAqIGFtYmllbnRQcmVzc3VyZSArIGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQjtcbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkTVZhbHVlID0gYmFzZU1WYWx1ZSAqIGNvbXBhcnRtZW50LmZGYWN0b3I7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgc3VwZXJzYXR1cmF0aW9uIGFuZCByaXNrIHVzaW5nIHB1cmUgUkdCTSBhcHByb2FjaFxuICAgICAgICAgICAgY29uc3Qgc3VwZXJzYXR1cmF0aW9uID0gTWF0aC5tYXgoMCwgdG90YWxMb2FkaW5nIC0gYW1iaWVudFByZXNzdXJlKTtcbiAgICAgICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvblJhdGlvID0gc3VwZXJzYXR1cmF0aW9uIC8gbW9kaWZpZWRNVmFsdWU7XG4gICAgICAgICAgICAvLyBJbmNsdWRlIGJ1YmJsZSB2b2x1bWUgY29udHJpYnV0aW9uIHRvIHJpc2tcbiAgICAgICAgICAgIGNvbnN0IGJ1YmJsZUNvbnRyaWJ1dGlvbiA9IGNvbXBhcnRtZW50LmJ1YmJsZVNlZWRDb3VudCAvIHRoaXMuQkFTRV9CVUJCTEVfU0VFRF9DT1VOVDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsUmlzayA9IHN1cGVyc2F0dXJhdGlvblJhdGlvICogKDEgKyBidWJibGVDb250cmlidXRpb24gKiAwLjEpO1xuICAgICAgICAgICAgbWF4UmlzayA9IE1hdGgubWF4KG1heFJpc2ssIHRvdGFsUmlzayk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHJlcGV0aXRpdmUgZGl2ZSBwZW5hbHR5XG4gICAgICAgIGNvbnN0IHJlcGV0aXRpdmVQZW5hbHR5ID0gdGhpcy5jYWxjdWxhdGVSZXBldGl0aXZlRGl2ZVBlbmFsdHkoKTtcbiAgICAgICAgLy8gQ29udmVydCB0byBwZXJjZW50YWdlIHdpdGggUkdCTS1zcGVjaWZpYyBzY2FsaW5nXG4gICAgICAgIGNvbnN0IHJpc2tQZXJjZW50YWdlID0gTWF0aC5taW4oMTAwLCBtYXhSaXNrICogbWF4UmlzayAqIDQ1ICogKDEgKyByZXBldGl0aXZlUGVuYWx0eSkpO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChyaXNrUGVyY2VudGFnZSAqIDEwKSAvIDEwO1xuICAgIH1cbiAgICB1cGRhdGVDb21iaW5lZE1WYWx1ZXMoY29tcGFydG1lbnQpIHtcbiAgICAgICAgY29uc3QgdG90YWxJbmVydEdhcyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgIGlmICh0b3RhbEluZXJ0R2FzIDw9IDApIHtcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQSA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTVZhbHVlQTtcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQiA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTVZhbHVlQjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxjdWxhdGUgd2VpZ2h0ZWQgTS12YWx1ZXNcbiAgICAgICAgY29uc3Qgbml0cm9nZW5GcmFjdGlvbiA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyAvIHRvdGFsSW5lcnRHYXM7XG4gICAgICAgIGNvbnN0IGhlbGl1bUZyYWN0aW9uID0gY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZyAvIHRvdGFsSW5lcnRHYXM7XG4gICAgICAgIGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQSA9XG4gICAgICAgICAgICAobml0cm9nZW5GcmFjdGlvbiAqIGNvbXBhcnRtZW50Lm5pdHJvZ2VuTVZhbHVlQSkgK1xuICAgICAgICAgICAgICAgIChoZWxpdW1GcmFjdGlvbiAqIGNvbXBhcnRtZW50LmhlbGl1bU1WYWx1ZUEpO1xuICAgICAgICBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUIgPVxuICAgICAgICAgICAgKG5pdHJvZ2VuRnJhY3Rpb24gKiBjb21wYXJ0bWVudC5uaXRyb2dlbk1WYWx1ZUIpICtcbiAgICAgICAgICAgICAgICAoaGVsaXVtRnJhY3Rpb24gKiBjb21wYXJ0bWVudC5oZWxpdW1NVmFsdWVCKTtcbiAgICB9XG4gICAgdXBkYXRlRkZhY3RvcnMoY29tcGFydG1lbnQpIHtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGYtZmFjdG9yIGJhc2VkIG9uIG1pY3JvYnViYmxlIGZvcm1hdGlvblxuICAgICAgICBjb25zdCBiYXNlRmFjdG9yID0gMS4wO1xuICAgICAgICAvLyBDb25zZXJ2YXRpc20gYWRqdXN0bWVudFxuICAgICAgICBjb25zdCBjb25zZXJ2YXRpc21GYWN0b3IgPSAxLjAgLSAodGhpcy5zZXR0aW5ncy5jb25zZXJ2YXRpc20gKiAwLjA1KTtcbiAgICAgICAgLy8gQnViYmxlIHNlZWQgZGVuc2l0eSBlZmZlY3RcbiAgICAgICAgY29uc3Qgc2VlZERlbnNpdHlSYXRpbyA9IGNvbXBhcnRtZW50LmJ1YmJsZVNlZWRDb3VudCAvIHRoaXMuQkFTRV9CVUJCTEVfU0VFRF9DT1VOVDtcbiAgICAgICAgY29uc3QgYnViYmxlRWZmZWN0ID0gTWF0aC5tYXgoMC43LCAxLjAgLSAoc2VlZERlbnNpdHlSYXRpbyAtIDEuMCkgKiAwLjEpO1xuICAgICAgICAvLyBEZXB0aCBlZmZlY3QgLSBkZWVwZXIgZGl2ZXMgY3JlYXRlIG1vcmUgYnViYmxlc1xuICAgICAgICBjb25zdCBkZXB0aEZhY3RvciA9IE1hdGgubWF4KDAuOCwgMS4wIC0gKHRoaXMubWF4RGVwdGhSZWFjaGVkIC8gMTAwKSAqIDAuMSk7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBmaW5hbCBmLWZhY3RvclxuICAgICAgICBjb21wYXJ0bWVudC5mRmFjdG9yID0gYmFzZUZhY3RvciAqIGNvbnNlcnZhdGlzbUZhY3RvciAqIGJ1YmJsZUVmZmVjdCAqIGRlcHRoRmFjdG9yO1xuICAgICAgICBjb21wYXJ0bWVudC5mRmFjdG9yID0gTWF0aC5tYXgoMC42LCBNYXRoLm1pbigxLjAsIGNvbXBhcnRtZW50LmZGYWN0b3IpKTtcbiAgICB9XG4gICAgdXBkYXRlQnViYmxlRHluYW1pY3MoY29tcGFydG1lbnQsIHRpbWVTdGVwLCBwcmV2aW91c0xvYWRpbmcsIGN1cnJlbnRMb2FkaW5nKSB7XG4gICAgICAgIGNvbnN0IGFtYmllbnRQcmVzc3VyZSA9IHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmU7XG4gICAgICAgIC8vIENoZWNrIGZvciBzdXBlcnNhdHVyYXRpb24gYW5kIGJ1YmJsZSBmb3JtYXRpb25cbiAgICAgICAgY29uc3Qgc3VwZXJzYXR1cmF0aW9uID0gTWF0aC5tYXgoMCwgY3VycmVudExvYWRpbmcgLSBhbWJpZW50UHJlc3N1cmUpO1xuICAgICAgICBpZiAoc3VwZXJzYXR1cmF0aW9uID4gMCkge1xuICAgICAgICAgICAgLy8gQnViYmxlIGZvcm1hdGlvbiBkdXJpbmcgc3VwZXJzYXR1cmF0aW9uXG4gICAgICAgICAgICBjb25zdCBmb3JtYXRpb25SYXRlID0gc3VwZXJzYXR1cmF0aW9uICogdGhpcy5CVUJCTEVfRk9STUFUSU9OX0NPRUZGSUNJRU5UO1xuICAgICAgICAgICAgY29uc3QgbmV3QnViYmxlcyA9IGZvcm1hdGlvblJhdGUgKiB0aW1lU3RlcDtcbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmJ1YmJsZVNlZWRDb3VudCArPSBuZXdCdWJibGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQnViYmxlIGRpc3NvbHV0aW9uIHdoZW4gbm90IHN1cGVyc2F0dXJhdGVkXG4gICAgICAgICAgICBjb25zdCBkaXNzb2x1dGlvblJhdGUgPSBjb21wYXJ0bWVudC5idWJibGVTZWVkQ291bnQgKiAwLjAxOyAvLyAxJSBwZXIgbWludXRlXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5idWJibGVTZWVkQ291bnQgLT0gZGlzc29sdXRpb25SYXRlICogdGltZVN0ZXA7XG4gICAgICAgICAgICBjb21wYXJ0bWVudC5idWJibGVTZWVkQ291bnQgPSBNYXRoLm1heCh0aGlzLkJBU0VfQlVCQkxFX1NFRURfQ09VTlQsIGNvbXBhcnRtZW50LmJ1YmJsZVNlZWRDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGltaXQgbWF4aW11bSBidWJibGUgc2VlZHNcbiAgICAgICAgY29tcGFydG1lbnQuYnViYmxlU2VlZENvdW50ID0gTWF0aC5taW4oY29tcGFydG1lbnQuYnViYmxlU2VlZENvdW50LCB0aGlzLkJBU0VfQlVCQkxFX1NFRURfQ09VTlQgKiAxMCk7XG4gICAgfVxuICAgIHVwZGF0ZVRvdGFsQnViYmxlVm9sdW1lKCkge1xuICAgICAgICB0aGlzLnRvdGFsQnViYmxlVm9sdW1lID0gMDtcbiAgICAgICAgdGhpcy5yZ2JtQ29tcGFydG1lbnRzLmZvckVhY2goY29tcGFydG1lbnQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhjZXNzU2VlZHMgPSBNYXRoLm1heCgwLCBjb21wYXJ0bWVudC5idWJibGVTZWVkQ291bnQgLSB0aGlzLkJBU0VfQlVCQkxFX1NFRURfQ09VTlQpO1xuICAgICAgICAgICAgdGhpcy50b3RhbEJ1YmJsZVZvbHVtZSArPSBleGNlc3NTZWVkcyAqIDAuMDAxOyAvLyBBcHByb3hpbWF0ZSB2b2x1bWUgcGVyIHNlZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhbGN1bGF0ZUNvbXBhcnRtZW50Q2VpbGluZyhjb21wYXJ0bWVudCkge1xuICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAvLyBDYWxjdWxhdGUgbW9kaWZpZWQgTS12YWx1ZSB3aXRoIGYtZmFjdG9yIChwdXJlIFJHQk0gYXBwcm9hY2gpXG4gICAgICAgIGNvbnN0IGEgPSBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUE7XG4gICAgICAgIGNvbnN0IGIgPSBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUI7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVkQSA9IGEgKiBjb21wYXJ0bWVudC5mRmFjdG9yO1xuICAgICAgICBjb25zdCBtb2RpZmllZEIgPSBiICogY29tcGFydG1lbnQuZkZhY3RvcjtcbiAgICAgICAgLy8gRGlyZWN0IFJHQk0gY2VpbGluZyBjYWxjdWxhdGlvbiB3aXRob3V0IGdyYWRpZW50IGZhY3RvcnNcbiAgICAgICAgY29uc3QgYWxsb3dlZFByZXNzdXJlID0gKHRvdGFsTG9hZGluZyAtIG1vZGlmaWVkQikgLyBtb2RpZmllZEE7XG4gICAgICAgIGNvbnN0IGNlaWxpbmdEZXB0aCA9IChhbGxvd2VkUHJlc3N1cmUgLSB0aGlzLnN1cmZhY2VQcmVzc3VyZSkgLyAwLjE7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBjZWlsaW5nRGVwdGgpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVGaXJzdFN0b3BEZXB0aCgpIHtcbiAgICAgICAgbGV0IG1heFN0b3BEZXB0aCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgY29tcGFydG1lbnQgb2YgdGhpcy5yZ2JtQ29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgY29uc3QgYSA9IGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQSAqIGNvbXBhcnRtZW50LmZGYWN0b3I7XG4gICAgICAgICAgICBjb25zdCBiID0gY29tcGFydG1lbnQuY29tYmluZWRNVmFsdWVCICogY29tcGFydG1lbnQuZkZhY3RvcjtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxNVmFsdWVQcmVzc3VyZSA9ICh0b3RhbExvYWRpbmcgLSBiKSAvIGE7XG4gICAgICAgICAgICBjb25zdCBzdG9wRGVwdGggPSAoZnVsbE1WYWx1ZVByZXNzdXJlIC0gdGhpcy5zdXJmYWNlUHJlc3N1cmUpIC8gMC4xO1xuICAgICAgICAgICAgbWF4U3RvcERlcHRoID0gTWF0aC5tYXgobWF4U3RvcERlcHRoLCBzdG9wRGVwdGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLmNlaWwobWF4U3RvcERlcHRoIC8gMykgKiAzKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlU3RvcFRpbWUoZGVwdGgpIHtcbiAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ2VpbGluZygpO1xuICAgICAgICBpZiAoZGVwdGggPD0gY2VpbGluZykge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUkdCTS1zcGVjaWZpYyBzdG9wIHRpbWUgY2FsY3VsYXRpb24gaW5jbHVkaW5nIGJ1YmJsZSBjb25zaWRlcmF0aW9uXG4gICAgICAgIGxldCBtYXhTdXBlcnNhdHVyYXRpb24gPSAwO1xuICAgICAgICBsZXQgbWF4QnViYmxlTG9hZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgY29tcGFydG1lbnQgb2YgdGhpcy5yZ2JtQ29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgY29uc3QgbW9kaWZpZWRNVmFsdWUgPSAoY29tcGFydG1lbnQuY29tYmluZWRNVmFsdWVBICogdGhpcy5jYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUoZGVwdGgpICtcbiAgICAgICAgICAgICAgICBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUIpICogY29tcGFydG1lbnQuZkZhY3RvcjtcbiAgICAgICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9ICh0b3RhbExvYWRpbmcgLyBtb2RpZmllZE1WYWx1ZSkgKiAxMDA7XG4gICAgICAgICAgICBjb25zdCBidWJibGVMb2FkID0gY29tcGFydG1lbnQuYnViYmxlU2VlZENvdW50IC8gdGhpcy5CQVNFX0JVQkJMRV9TRUVEX0NPVU5UO1xuICAgICAgICAgICAgbWF4U3VwZXJzYXR1cmF0aW9uID0gTWF0aC5tYXgobWF4U3VwZXJzYXR1cmF0aW9uLCBzdXBlcnNhdHVyYXRpb24pO1xuICAgICAgICAgICAgbWF4QnViYmxlTG9hZCA9IE1hdGgubWF4KG1heEJ1YmJsZUxvYWQsIGJ1YmJsZUxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVzdGltYXRlIHN0b3AgdGltZSBiYXNlZCBvbiBzdXBlcnNhdHVyYXRpb24gYW5kIGJ1YmJsZSBsb2FkXG4gICAgICAgIGNvbnN0IGJhc2VUaW1lID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihtYXhTdXBlcnNhdHVyYXRpb24gLyAxNSkpO1xuICAgICAgICBjb25zdCBidWJibGVFeHRlbnNpb24gPSBNYXRoLmZsb29yKG1heEJ1YmJsZUxvYWQgKiAyKTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDMwLCBiYXNlVGltZSArIGJ1YmJsZUV4dGVuc2lvbik7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVJlcGV0aXRpdmVEaXZlUGVuYWx0eSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVJlcGV0aXRpdmVQZW5hbHR5KSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaW1wbGUgcmVwZXRpdGl2ZSBkaXZlIHBlbmFsdHkgYmFzZWQgb24gZGl2ZSBjb3VudCBhbmQgc3VyZmFjZSBpbnRlcnZhbFxuICAgICAgICBpZiAodGhpcy5kaXZlQ291bnQgPiAxICYmIHRoaXMubGFzdFN1cmZhY2VUaW1lIDwgdGhpcy5SRVBFVElUSVZFX0RJVkVfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICBjb25zdCBwZW5hbHR5ID0gKHRoaXMuZGl2ZUNvdW50IC0gMSkgKiAwLjEgKiAoMSAtIHRoaXMubGFzdFN1cmZhY2VUaW1lIC8gdGhpcy5SRVBFVElUSVZFX0RJVkVfVEhSRVNIT0xEKTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbigwLjMsIHBlbmFsdHkpOyAvLyBNYXggMzAlIHBlbmFsdHlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHJlcGV0aXRpdmUgZGl2ZSBwYXJhbWV0ZXJzXG4gICAgICovXG4gICAgc2V0UmVwZXRpdGl2ZURpdmVQYXJhbXMoZGl2ZUNvdW50LCBzdXJmYWNlVGltZUhvdXJzKSB7XG4gICAgICAgIHRoaXMuZGl2ZUNvdW50ID0gTWF0aC5tYXgoMSwgZGl2ZUNvdW50KTtcbiAgICAgICAgdGhpcy5sYXN0U3VyZmFjZVRpbWUgPSBNYXRoLm1heCgwLCBzdXJmYWNlVGltZUhvdXJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgbW9kZWwgdG8gc3VyZmFjZSBjb25kaXRpb25zXG4gICAgICovXG4gICAgcmVzZXRUb1N1cmZhY2UoKSB7XG4gICAgICAgIHN1cGVyLnJlc2V0VG9TdXJmYWNlKCk7XG4gICAgICAgIHRoaXMubWF4RGVwdGhSZWFjaGVkID0gMDtcbiAgICAgICAgdGhpcy50b3RhbEJ1YmJsZVZvbHVtZSA9IDA7XG4gICAgICAgIHRoaXMuZmlyc3RTdG9wRGVwdGggPSAwO1xuICAgICAgICAvLyBSZXNldCBSR0JNLXNwZWNpZmljIHBhcmFtZXRlcnNcbiAgICAgICAgdGhpcy5yZ2JtQ29tcGFydG1lbnRzLmZvckVhY2goY29tcGFydG1lbnQgPT4ge1xuICAgICAgICAgICAgY29tcGFydG1lbnQuZkZhY3RvciA9IDEuMDtcbiAgICAgICAgICAgIGNvbXBhcnRtZW50Lm1heFRlbnNpb24gPSAwLjc5ICogdGhpcy5zdXJmYWNlUHJlc3N1cmU7XG4gICAgICAgICAgICBjb21wYXJ0bWVudC5idWJibGVTZWVkQ291bnQgPSB0aGlzLkJBU0VfQlVCQkxFX1NFRURfQ09VTlQ7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuUmdibUZvbGRlZE1vZGVsID0gUmdibUZvbGRlZE1vZGVsO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEJ1aGxtYW5uIFpITC0xNkMgRGVjb21wcmVzc2lvbiBBbGdvcml0aG0gd2l0aCBHcmFkaWVudCBGYWN0b3JzXG4gKlxuICogSW1wbGVtZW50YXRpb24gb2YgdGhlIEJ1aGxtYW5uIFpITC0xNkMgZGVjb21wcmVzc2lvbiBtb2RlbCBlbmhhbmNlZCB3aXRoXG4gKiBncmFkaWVudCBmYWN0b3JzIGZvciBtb3JlIGNvbnNlcnZhdGl2ZSBkZWNvbXByZXNzaW9uIHByb2ZpbGVzLlxuICpcbiAqIEJhc2VkIG9uIHRoZSB3b3JrIG9mOlxuICogLSBCw7xobG1hbm4sIEEuQS4gKDE5ODQpIC0gT3JpZ2luYWwgWkhMIGFsZ29yaXRobVxuICogLSBCYWtlciwgRS5DLiAoMTk5OCkgLSBHcmFkaWVudCBmYWN0b3JzIG1vZGlmaWNhdGlvblxuICogLSBIZW5uZXNzeSwgVC4gKDIwMDgpIC0gWkhMLTE2QyByZWZpbmVtZW50c1xuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJ1aGxtYW5uTW9kZWwgPSB2b2lkIDA7XG5jb25zdCBEZWNvbXByZXNzaW9uTW9kZWxfMSA9IHJlcXVpcmUoXCIuL0RlY29tcHJlc3Npb25Nb2RlbFwiKTtcbi8qKlxuICogQnVobG1hbm4gWkhMLTE2QyBEZWNvbXByZXNzaW9uIE1vZGVsIHdpdGggR3JhZGllbnQgRmFjdG9yc1xuICovXG5jbGFzcyBCdWhsbWFubk1vZGVsIGV4dGVuZHMgRGVjb21wcmVzc2lvbk1vZGVsXzEuRGVjb21wcmVzc2lvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihncmFkaWVudEZhY3RvcnMgPSB7IGxvdzogMzAsIGhpZ2g6IDg1IH0pIHtcbiAgICAgICAgLy8gVmFsaWRhdGUgZ3JhZGllbnQgZmFjdG9ycyBiZWZvcmUgY2FsbGluZyBzdXBlcigpXG4gICAgICAgIGlmIChncmFkaWVudEZhY3RvcnMubG93IDwgMCB8fCBncmFkaWVudEZhY3RvcnMubG93ID4gMTAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dyYWRpZW50IGZhY3RvciBsb3cgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwMCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFkaWVudEZhY3RvcnMuaGlnaCA8IDAgfHwgZ3JhZGllbnRGYWN0b3JzLmhpZ2ggPiAxMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR3JhZGllbnQgZmFjdG9yIGhpZ2ggbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwMCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFkaWVudEZhY3RvcnMubG93ID4gZ3JhZGllbnRGYWN0b3JzLmhpZ2gpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR3JhZGllbnQgZmFjdG9yIGxvdyBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIGdyYWRpZW50IGZhY3RvciBoaWdoJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5idWhsbWFubkNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmZpcnN0U3RvcERlcHRoID0gMDsgLy8gQ2FsY3VsYXRlZCBkdXJpbmcgZGVjb21wcmVzc2lvbiBwbGFubmluZ1xuICAgICAgICAvLyBCdWhsbWFubiBaSEwtMTZDIGNvbXBhcnRtZW50IGhhbGYtdGltZXMgKG1pbnV0ZXMpXG4gICAgICAgIHRoaXMuTklUUk9HRU5fSEFMRl9USU1FUyA9IFtcbiAgICAgICAgICAgIDUuMCwgOC4wLCAxMi41LCAxOC41LCAyNy4wLCAzOC4zLCA1NC4zLCA3Ny4wLFxuICAgICAgICAgICAgMTA5LjAsIDE0Ni4wLCAxODcuMCwgMjM5LjAsIDMwNS4wLCAzOTAuMCwgNDk4LjAsIDYzNS4wXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuSEVMSVVNX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICAxLjg4LCAzLjAyLCA0LjcyLCA2Ljk5LCAxMC4yMSwgMTQuNDgsIDIwLjUzLCAyOS4xMSxcbiAgICAgICAgICAgIDQxLjIwLCA1NS4xOSwgNzAuNjksIDkwLjM0LCAxMTUuMjksIDE0Ny40MiwgMTg4LjI0LCAyNDAuMDNcbiAgICAgICAgXTtcbiAgICAgICAgLy8gQnVobG1hbm4gWkhMLTE2QyBNLXZhbHVlIGNvZWZmaWNpZW50cyBmb3Igbml0cm9nZW5cbiAgICAgICAgdGhpcy5OSVRST0dFTl9NX1ZBTFVFU19BID0gW1xuICAgICAgICAgICAgMS4yNTk5LCAxLjAwMDAsIDAuODYxOCwgMC43NTYyLCAwLjY2NjcsIDAuNTkzMywgMC41MjgyLCAwLjQ3MTAsXG4gICAgICAgICAgICAwLjQxODcsIDAuMzc5OCwgMC4zNDk3LCAwLjMyMjMsIDAuMjk3MSwgMC4yNzM3LCAwLjI1MjMsIDAuMjMyN1xuICAgICAgICBdO1xuICAgICAgICB0aGlzLk5JVFJPR0VOX01fVkFMVUVTX0IgPSBbXG4gICAgICAgICAgICAwLjUwNTAsIDAuNjUxNCwgMC43MjIyLCAwLjc4MjUsIDAuODEyNiwgMC44NDM0LCAwLjg2OTMsIDAuODkxMCxcbiAgICAgICAgICAgIDAuOTA5MiwgMC45MjIyLCAwLjkzMTksIDAuOTQwMywgMC45NDc3LCAwLjk1NDQsIDAuOTYwMiwgMC45NjUzXG4gICAgICAgIF07XG4gICAgICAgIC8vIEJ1aGxtYW5uIFpITC0xNkMgTS12YWx1ZSBjb2VmZmljaWVudHMgZm9yIGhlbGl1bVxuICAgICAgICB0aGlzLkhFTElVTV9NX1ZBTFVFU19BID0gW1xuICAgICAgICAgICAgMS43NDI0LCAxLjM4MzAsIDEuMTkxOSwgMS4wNDU4LCAwLjkyMjAsIDAuODIwNSwgMC43MzA1LCAwLjY1MDIsXG4gICAgICAgICAgICAwLjU5NTAsIDAuNTU0NSwgMC41MzMzLCAwLjUxODksIDAuNTE4MSwgMC41MTc2LCAwLjUxNzIsIDAuNTExOVxuICAgICAgICBdO1xuICAgICAgICB0aGlzLkhFTElVTV9NX1ZBTFVFU19CID0gW1xuICAgICAgICAgICAgMC40MjQ1LCAwLjU3NDcsIDAuNjUyNywgMC43MjIzLCAwLjc1ODIsIDAuNzk1NywgMC44Mjc5LCAwLjg1NTMsXG4gICAgICAgICAgICAwLjg3NTcsIDAuODkwMywgMC44OTk3LCAwLjkwNzMsIDAuOTEyMiwgMC45MTcxLCAwLjkyMTcsIDAuOTI2N1xuICAgICAgICBdO1xuICAgICAgICB0aGlzLmdyYWRpZW50RmFjdG9ycyA9IGdyYWRpZW50RmFjdG9ycztcbiAgICB9XG4gICAgaW5pdGlhbGl6ZVRpc3N1ZUNvbXBhcnRtZW50cygpIHtcbiAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5idWhsbWFubkNvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICAvLyBVc2UgaGFyZGNvZGVkIGFycmF5cyB0byBhdm9pZCBpbml0aWFsaXphdGlvbiBpc3N1ZXNcbiAgICAgICAgY29uc3Qgbml0cm9nZW5UaW1lcyA9IFtcbiAgICAgICAgICAgIDUuMCwgOC4wLCAxMi41LCAxOC41LCAyNy4wLCAzOC4zLCA1NC4zLCA3Ny4wLFxuICAgICAgICAgICAgMTA5LjAsIDE0Ni4wLCAxODcuMCwgMjM5LjAsIDMwNS4wLCAzOTAuMCwgNDk4LjAsIDYzNS4wXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGhlbGl1bVRpbWVzID0gW1xuICAgICAgICAgICAgMS44OCwgMy4wMiwgNC43MiwgNi45OSwgMTAuMjEsIDE0LjQ4LCAyMC41MywgMjkuMTEsXG4gICAgICAgICAgICA0MS4yMCwgNTUuMTksIDcwLjY5LCA5MC4zNCwgMTE1LjI5LCAxNDcuNDIsIDE4OC4yNCwgMjQwLjAzXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IG5pdHJvZ2VuQVZhbHVlcyA9IFtcbiAgICAgICAgICAgIDEuMjU5OSwgMS4wMDAwLCAwLjg2MTgsIDAuNzU2MiwgMC42NjY3LCAwLjU5MzMsIDAuNTI4MiwgMC40NzEwLFxuICAgICAgICAgICAgMC40MTg3LCAwLjM3OTgsIDAuMzQ5NywgMC4zMjIzLCAwLjI5NzEsIDAuMjczNywgMC4yNTIzLCAwLjIzMjdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3Qgbml0cm9nZW5CVmFsdWVzID0gW1xuICAgICAgICAgICAgMC41MDUwLCAwLjY1MTQsIDAuNzIyMiwgMC43ODI1LCAwLjgxMjYsIDAuODQzNCwgMC44NjkzLCAwLjg5MTAsXG4gICAgICAgICAgICAwLjkwOTIsIDAuOTIyMiwgMC45MzE5LCAwLjk0MDMsIDAuOTQ3NywgMC45NTQ0LCAwLjk2MDIsIDAuOTY1M1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBoZWxpdW1BVmFsdWVzID0gW1xuICAgICAgICAgICAgMS43NDI0LCAxLjM4MzAsIDEuMTkxOSwgMS4wNDU4LCAwLjkyMjAsIDAuODIwNSwgMC43MzA1LCAwLjY1MDIsXG4gICAgICAgICAgICAwLjU5NTAsIDAuNTU0NSwgMC41MzMzLCAwLjUxODksIDAuNTE4MSwgMC41MTc2LCAwLjUxNzIsIDAuNTExOVxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBoZWxpdW1CVmFsdWVzID0gW1xuICAgICAgICAgICAgMC40MjQ1LCAwLjU3NDcsIDAuNjUyNywgMC43MjIzLCAwLjc1ODIsIDAuNzk1NywgMC44Mjc5LCAwLjg1NTMsXG4gICAgICAgICAgICAwLjg3NTcsIDAuODkwMywgMC44OTk3LCAwLjkwNzMsIDAuOTEyMiwgMC45MTcxLCAwLjkyMTcsIDAuOTI2N1xuICAgICAgICBdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1aGxtYW5uQ29tcGFydG1lbnQgPSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBpICsgMSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkhhbGZUaW1lOiBuaXRyb2dlblRpbWVzW2ldLFxuICAgICAgICAgICAgICAgIGhlbGl1bUhhbGZUaW1lOiBoZWxpdW1UaW1lc1tpXSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkxvYWRpbmc6IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSwgLy8gU3VyZmFjZSBlcXVpbGlicml1bVxuICAgICAgICAgICAgICAgIGhlbGl1bUxvYWRpbmc6IDAuMCxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbk1WYWx1ZUE6IG5pdHJvZ2VuQVZhbHVlc1tpXSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbk1WYWx1ZUI6IG5pdHJvZ2VuQlZhbHVlc1tpXSxcbiAgICAgICAgICAgICAgICBoZWxpdW1NVmFsdWVBOiBoZWxpdW1BVmFsdWVzW2ldLFxuICAgICAgICAgICAgICAgIGhlbGl1bU1WYWx1ZUI6IGhlbGl1bUJWYWx1ZXNbaV0sXG4gICAgICAgICAgICAgICAgY29tYmluZWRNVmFsdWVBOiBuaXRyb2dlbkFWYWx1ZXNbaV0sIC8vIFdpbGwgYmUgdXBkYXRlZCB3aGVuIGdhcyBtaXggY2hhbmdlc1xuICAgICAgICAgICAgICAgIGNvbWJpbmVkTVZhbHVlQjogbml0cm9nZW5CVmFsdWVzW2ldLCAvLyBXaWxsIGJlIHVwZGF0ZWQgd2hlbiBnYXMgbWl4IGNoYW5nZXNcbiAgICAgICAgICAgICAgICBnZXQgdG90YWxMb2FkaW5nKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uaXRyb2dlbkxvYWRpbmcgKyB0aGlzLmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgc2FtZSBvYmplY3QgZm9yIGJvdGggYXJyYXlzIHRvIG1haW50YWluIHN5bmNcbiAgICAgICAgICAgIHRoaXMudGlzc3VlQ29tcGFydG1lbnRzLnB1c2goYnVobG1hbm5Db21wYXJ0bWVudCk7XG4gICAgICAgICAgICB0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzLnB1c2goYnVobG1hbm5Db21wYXJ0bWVudCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgY29tYmluZWQgTS12YWx1ZXMgYWZ0ZXIgYWRkaW5nIHRvIGFycmF5c1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb21iaW5lZE1WYWx1ZXMoYnVobG1hbm5Db21wYXJ0bWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVGlzc3VlTG9hZGluZ3ModGltZVN0ZXApIHtcbiAgICAgICAgLy8gRW5zdXJlIGNvbXBhcnRtZW50cyBhcmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgaWYgKCF0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cyB8fCB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgICF0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzIHx8IHRoaXMuYnVobG1hbm5Db21wYXJ0bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVUaXNzdWVDb21wYXJ0bWVudHMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuaXRyb2dlblBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5uaXRyb2dlbik7XG4gICAgICAgIGNvbnN0IGhlbGl1bVBQID0gdGhpcy5jYWxjdWxhdGVQYXJ0aWFsUHJlc3N1cmUodGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peC5oZWxpdW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGlzc3VlQ29tcGFydG1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wYXJ0bWVudCA9IHRoaXMudGlzc3VlQ29tcGFydG1lbnRzW2ldO1xuICAgICAgICAgICAgY29uc3QgYnVobG1hbm5Db21wYXJ0bWVudCA9IHRoaXMuYnVobG1hbm5Db21wYXJ0bWVudHNbaV07XG4gICAgICAgICAgICBpZiAoIWNvbXBhcnRtZW50IHx8ICFidWhsbWFubkNvbXBhcnRtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIFNraXAgaWYgY29tcGFydG1lbnQgaXMgbm90IHByb3Blcmx5IGluaXRpYWxpemVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVcGRhdGUgbml0cm9nZW4gbG9hZGluZyB1c2luZyBIYWxkYW5lIGVxdWF0aW9uXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZywgbml0cm9nZW5QUCwgY29tcGFydG1lbnQubml0cm9nZW5IYWxmVGltZSwgdGltZVN0ZXApO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGhlbGl1bSBsb2FkaW5nIHVzaW5nIEhhbGRhbmUgZXF1YXRpb25cbiAgICAgICAgICAgIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcsIGhlbGl1bVBQLCBjb21wYXJ0bWVudC5oZWxpdW1IYWxmVGltZSwgdGltZVN0ZXApO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGNvbWJpbmVkIE0tdmFsdWVzIGJhc2VkIG9uIGN1cnJlbnQgZ2FzIGxvYWRpbmdzXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbWJpbmVkTVZhbHVlcyhidWhsbWFubkNvbXBhcnRtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVDZWlsaW5nKCkge1xuICAgICAgICBsZXQgbWF4Q2VpbGluZyA9IDA7XG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZmlyc3Qgc3RvcCBkZXB0aCBpZiBub3QgYWxyZWFkeSBkb25lXG4gICAgICAgIGlmICh0aGlzLmZpcnN0U3RvcERlcHRoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0U3RvcERlcHRoID0gdGhpcy5jYWxjdWxhdGVGaXJzdFN0b3BEZXB0aCgpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29tcGFydG1lbnQgb2YgdGhpcy5idWhsbWFubkNvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ29tcGFydG1lbnRDZWlsaW5nKGNvbXBhcnRtZW50KTtcbiAgICAgICAgICAgIG1heENlaWxpbmcgPSBNYXRoLm1heChtYXhDZWlsaW5nLCBjZWlsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgbWF4Q2VpbGluZyk7XG4gICAgfVxuICAgIGNhbGN1bGF0ZURlY29tcHJlc3Npb25TdG9wcygpIHtcbiAgICAgICAgY29uc3Qgc3RvcHMgPSBbXTtcbiAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ2VpbGluZygpO1xuICAgICAgICBpZiAoY2VpbGluZyA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcHM7IC8vIE5vIGRlY29tcHJlc3Npb24gcmVxdWlyZWRcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxjdWxhdGUgZmlyc3Qgc3RvcCBkZXB0aCBmb3IgZ3JhZGllbnQgZmFjdG9yIGNhbGN1bGF0aW9uc1xuICAgICAgICB0aGlzLmZpcnN0U3RvcERlcHRoID0gdGhpcy5jYWxjdWxhdGVGaXJzdFN0b3BEZXB0aCgpO1xuICAgICAgICAvLyBHZW5lcmF0ZSBzdG9wcyBhdCAzbSBpbnRlcnZhbHMgc3RhcnRpbmcgZnJvbSBjZWlsaW5nXG4gICAgICAgIGxldCBjdXJyZW50RGVwdGggPSBNYXRoLmNlaWwoY2VpbGluZyAvIDMpICogMztcbiAgICAgICAgd2hpbGUgKGN1cnJlbnREZXB0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3BUaW1lID0gdGhpcy5jYWxjdWxhdGVTdG9wVGltZShjdXJyZW50RGVwdGgpO1xuICAgICAgICAgICAgaWYgKHN0b3BUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIHN0b3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkZXB0aDogY3VycmVudERlcHRoLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBzdG9wVGltZSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzTWl4OiB0aGlzLmN1cnJlbnREaXZlU3RhdGUuZ2FzTWl4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50RGVwdGggLT0gMztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcHM7XG4gICAgfVxuICAgIGNhbkFzY2VuZERpcmVjdGx5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCkgPD0gMDtcbiAgICB9XG4gICAgZ2V0TW9kZWxOYW1lKCkge1xuICAgICAgICByZXR1cm4gYEJ1aGxtYW5uIFpITC0xNkMgKEdGICR7dGhpcy5ncmFkaWVudEZhY3RvcnMubG93fS8ke3RoaXMuZ3JhZGllbnRGYWN0b3JzLmhpZ2h9KWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBncmFkaWVudCBmYWN0b3JzXG4gICAgICovXG4gICAgZ2V0R3JhZGllbnRGYWN0b3JzKCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLmdyYWRpZW50RmFjdG9ycyB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgZ3JhZGllbnQgZmFjdG9yc1xuICAgICAqL1xuICAgIHNldEdyYWRpZW50RmFjdG9ycyhncmFkaWVudEZhY3RvcnMpIHtcbiAgICAgICAgaWYgKGdyYWRpZW50RmFjdG9ycy5sb3cgPCAwIHx8IGdyYWRpZW50RmFjdG9ycy5sb3cgPiAxMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR3JhZGllbnQgZmFjdG9yIGxvdyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyYWRpZW50RmFjdG9ycy5oaWdoIDwgMCB8fCBncmFkaWVudEZhY3RvcnMuaGlnaCA+IDEwMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHcmFkaWVudCBmYWN0b3IgaGlnaCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyYWRpZW50RmFjdG9ycy5sb3cgPiBncmFkaWVudEZhY3RvcnMuaGlnaCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHcmFkaWVudCBmYWN0b3IgbG93IGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gZ3JhZGllbnQgZmFjdG9yIGhpZ2gnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdyYWRpZW50RmFjdG9ycyA9IGdyYWRpZW50RmFjdG9ycztcbiAgICAgICAgdGhpcy5maXJzdFN0b3BEZXB0aCA9IDA7IC8vIFJlc2V0IHRvIHJlY2FsY3VsYXRlXG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBNLXZhbHVlIGZvciBhIGNvbXBhcnRtZW50IGF0IGEgZ2l2ZW4gZGVwdGhcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVNVmFsdWUoY29tcGFydG1lbnROdW1iZXIsIGRlcHRoKSB7XG4gICAgICAgIGlmIChjb21wYXJ0bWVudE51bWJlciA8IDEgfHwgY29tcGFydG1lbnROdW1iZXIgPiAxNikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb21wYXJ0bWVudCBudW1iZXIgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDE2Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW5zdXJlIGNvbXBhcnRtZW50cyBhcmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgaWYgKCF0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzIHx8IHRoaXMuYnVobG1hbm5Db21wYXJ0bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVUaXNzdWVDb21wYXJ0bWVudHMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wYXJ0bWVudCA9IHRoaXMuYnVobG1hbm5Db21wYXJ0bWVudHNbY29tcGFydG1lbnROdW1iZXIgLSAxXTtcbiAgICAgICAgaWYgKCFjb21wYXJ0bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wYXJ0bWVudCAke2NvbXBhcnRtZW50TnVtYmVyfSBub3QgZm91bmQuIEF2YWlsYWJsZSBjb21wYXJ0bWVudHM6ICR7dGhpcy5idWhsbWFubkNvbXBhcnRtZW50cy5sZW5ndGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW1iaWVudFByZXNzdXJlID0gdGhpcy5jYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUoZGVwdGgpO1xuICAgICAgICByZXR1cm4gKGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQSAqIGFtYmllbnRQcmVzc3VyZSkgKyBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBncmFkaWVudCBmYWN0b3IgYWRqdXN0ZWQgTS12YWx1ZSBhdCBhIGdpdmVuIGRlcHRoXG4gICAgICovXG4gICAgY2FsY3VsYXRlR3JhZGllbnRGYWN0b3JNVmFsdWUoY29tcGFydG1lbnROdW1iZXIsIGRlcHRoKSB7XG4gICAgICAgIGlmIChjb21wYXJ0bWVudE51bWJlciA8IDEgfHwgY29tcGFydG1lbnROdW1iZXIgPiAxNikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb21wYXJ0bWVudCBudW1iZXIgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDE2Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW1iaWVudFByZXNzdXJlID0gdGhpcy5jYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUoZGVwdGgpO1xuICAgICAgICBjb25zdCBmdWxsTVZhbHVlID0gdGhpcy5jYWxjdWxhdGVNVmFsdWUoY29tcGFydG1lbnROdW1iZXIsIGRlcHRoKTtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGdyYWRpZW50IGZhY3RvciBiYXNlZCBvbiBkZXB0aFxuICAgICAgICBjb25zdCBncmFkaWVudEZhY3RvciA9IHRoaXMuZ2V0R3JhZGllbnRGYWN0b3JBdERlcHRoKGRlcHRoKTtcbiAgICAgICAgLy8gQXBwbHkgZ3JhZGllbnQgZmFjdG9yOiBNLXZhbHVlJyA9IGFtYmllbnQgKyBHRiAqIChNLXZhbHVlIC0gYW1iaWVudClcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYW1iaWVudFByZXNzdXJlICsgKGdyYWRpZW50RmFjdG9yIC8gMTAwKSAqIChmdWxsTVZhbHVlIC0gYW1iaWVudFByZXNzdXJlKTtcbiAgICAgICAgLy8gRW5zdXJlIEdGIE0tdmFsdWUgaXMgbm90IG1vcmUgcGVybWlzc2l2ZSB0aGFuIGZ1bGwgTS12YWx1ZVxuICAgICAgICByZXR1cm4gTWF0aC5taW4ocmVzdWx0LCBmdWxsTVZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IEJ1aGxtYW5uLXNwZWNpZmljIGNvbXBhcnRtZW50IGRhdGFcbiAgICAgKi9cbiAgICBnZXRCdWhsbWFubkNvbXBhcnRtZW50RGF0YShjb21wYXJ0bWVudE51bWJlcikge1xuICAgICAgICBpZiAoY29tcGFydG1lbnROdW1iZXIgPCAxIHx8IGNvbXBhcnRtZW50TnVtYmVyID4gMTYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29tcGFydG1lbnQgbnVtYmVyIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxNicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSBjb21wYXJ0bWVudHMgYXJlIGluaXRpYWxpemVkXG4gICAgICAgIGlmICghdGhpcy5idWhsbWFubkNvbXBhcnRtZW50cyB8fCB0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzW2NvbXBhcnRtZW50TnVtYmVyIC0gMV07XG4gICAgICAgIGlmICghY29tcGFydG1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcGFydG1lbnQgJHtjb21wYXJ0bWVudE51bWJlcn0gbm90IGZvdW5kLiBBdmFpbGFibGUgY29tcGFydG1lbnRzOiAke3RoaXMuYnVobG1hbm5Db21wYXJ0bWVudHMubGVuZ3RofWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IC4uLmNvbXBhcnRtZW50IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBzdXBlcnNhdHVyYXRpb24gcGVyY2VudGFnZSBmb3IgYSBjb21wYXJ0bWVudFxuICAgICAqL1xuICAgIGNhbGN1bGF0ZVN1cGVyc2F0dXJhdGlvbihjb21wYXJ0bWVudE51bWJlcikge1xuICAgICAgICBpZiAoY29tcGFydG1lbnROdW1iZXIgPCAxIHx8IGNvbXBhcnRtZW50TnVtYmVyID4gMTYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29tcGFydG1lbnQgbnVtYmVyIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxNicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSBjb21wYXJ0bWVudHMgYXJlIGluaXRpYWxpemVkXG4gICAgICAgIGlmICghdGhpcy5idWhsbWFubkNvbXBhcnRtZW50cyB8fCB0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzW2NvbXBhcnRtZW50TnVtYmVyIC0gMV07XG4gICAgICAgIGlmICghY29tcGFydG1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcGFydG1lbnQgJHtjb21wYXJ0bWVudE51bWJlcn0gbm90IGZvdW5kLiBBdmFpbGFibGUgY29tcGFydG1lbnRzOiAke3RoaXMuYnVobG1hbm5Db21wYXJ0bWVudHMubGVuZ3RofWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1WYWx1ZSA9IHRoaXMuY2FsY3VsYXRlR3JhZGllbnRGYWN0b3JNVmFsdWUoY29tcGFydG1lbnROdW1iZXIsIHRoaXMuY3VycmVudERpdmVTdGF0ZS5kZXB0aCk7XG4gICAgICAgIGNvbnN0IHRvdGFsTG9hZGluZyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCAodG90YWxMb2FkaW5nIC8gbVZhbHVlKSAqIDEwMCk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbWJpbmVkTVZhbHVlcyhjb21wYXJ0bWVudCkge1xuICAgICAgICBpZiAoIWNvbXBhcnRtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIFNraXAgaWYgY29tcGFydG1lbnQgaXMgdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG90YWxJbmVydEdhcyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgIGlmICh0b3RhbEluZXJ0R2FzIDw9IDApIHtcbiAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gbml0cm9nZW4gdmFsdWVzIGlmIG5vIGluZXJ0IGdhcyBsb2FkaW5nXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUEgPSBjb21wYXJ0bWVudC5uaXRyb2dlbk1WYWx1ZUE7XG4gICAgICAgICAgICBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUIgPSBjb21wYXJ0bWVudC5uaXRyb2dlbk1WYWx1ZUI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHdlaWdodGVkIE0tdmFsdWVzIGJhc2VkIG9uIGN1cnJlbnQgZ2FzIGxvYWRpbmdzXG4gICAgICAgIGNvbnN0IG5pdHJvZ2VuRnJhY3Rpb24gPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgLyB0b3RhbEluZXJ0R2FzO1xuICAgICAgICBjb25zdCBoZWxpdW1GcmFjdGlvbiA9IGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcgLyB0b3RhbEluZXJ0R2FzO1xuICAgICAgICBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUEgPVxuICAgICAgICAgICAgKG5pdHJvZ2VuRnJhY3Rpb24gKiBjb21wYXJ0bWVudC5uaXRyb2dlbk1WYWx1ZUEpICtcbiAgICAgICAgICAgICAgICAoaGVsaXVtRnJhY3Rpb24gKiBjb21wYXJ0bWVudC5oZWxpdW1NVmFsdWVBKTtcbiAgICAgICAgY29tcGFydG1lbnQuY29tYmluZWRNVmFsdWVCID1cbiAgICAgICAgICAgIChuaXRyb2dlbkZyYWN0aW9uICogY29tcGFydG1lbnQubml0cm9nZW5NVmFsdWVCKSArXG4gICAgICAgICAgICAgICAgKGhlbGl1bUZyYWN0aW9uICogY29tcGFydG1lbnQuaGVsaXVtTVZhbHVlQik7XG4gICAgfVxuICAgIGNhbGN1bGF0ZUNvbXBhcnRtZW50Q2VpbGluZyhjb21wYXJ0bWVudCkge1xuICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAvLyBDYWxjdWxhdGUgY2VpbGluZyB1c2luZyB0aGUgZ3JhZGllbnQgZmFjdG9yIGFkanVzdGVkIE0tdmFsdWVcbiAgICAgICAgLy8gUmVhcnJhbmdlIE0tdmFsdWUgZXF1YXRpb24gdG8gc29sdmUgZm9yIHByZXNzdXJlOlxuICAgICAgICAvLyBNID0gKGEgKiBQKSArIGIsIHNvIFAgPSAoTSAtIGIpIC8gYVxuICAgICAgICBjb25zdCBncmFkaWVudEZhY3RvckF0Q2VpbGluZyA9IHRoaXMuZ2V0R3JhZGllbnRGYWN0b3JBdERlcHRoKDApOyAvLyBVc2UgR0YtaGlnaCBmb3IgY2VpbGluZ1xuICAgICAgICAvLyBGb3IgY2VpbGluZyBjYWxjdWxhdGlvbiwgd2UgdXNlIHRoZSBmb3JtdWxhOlxuICAgICAgICAvLyBQX2NlaWxpbmcgPSAoUF90aXNzdWUgLSBiKSAvIChhICsgKEdGLzEwMCkgKiAoMSAtIGEpKVxuICAgICAgICAvLyBTaW1wbGlmaWVkIGZvciBkaXJlY3QgY2FsY3VsYXRpb25cbiAgICAgICAgY29uc3QgYSA9IGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQTtcbiAgICAgICAgY29uc3QgYiA9IGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQjtcbiAgICAgICAgLy8gQXBwbHkgZ3JhZGllbnQgZmFjdG9yIHRvIGNhbGN1bGF0ZSBhbGxvd2VkIHByZXNzdXJlXG4gICAgICAgIGNvbnN0IGFsbG93ZWRQcmVzc3VyZSA9ICh0b3RhbExvYWRpbmcgLSBiKSAvIGE7XG4gICAgICAgIGNvbnN0IGNlaWxpbmdEZXB0aCA9IChhbGxvd2VkUHJlc3N1cmUgLSB0aGlzLnN1cmZhY2VQcmVzc3VyZSkgLyAwLjE7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBjZWlsaW5nRGVwdGgpO1xuICAgIH1cbiAgICBnZXRHcmFkaWVudEZhY3RvckF0RGVwdGgoZGVwdGgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlyc3RTdG9wRGVwdGggPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JhZGllbnRGYWN0b3JzLmhpZ2g7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBHRi1sb3cgYXQgZmlyc3Qgc3RvcCBhbmQgR0YtaGlnaCBhdCBzdXJmYWNlXG4gICAgICAgIGNvbnN0IGRlcHRoUmF0aW8gPSBkZXB0aCAvIHRoaXMuZmlyc3RTdG9wRGVwdGg7XG4gICAgICAgIHJldHVybiB0aGlzLmdyYWRpZW50RmFjdG9ycy5oaWdoICtcbiAgICAgICAgICAgICh0aGlzLmdyYWRpZW50RmFjdG9ycy5sb3cgLSB0aGlzLmdyYWRpZW50RmFjdG9ycy5oaWdoKSAqIGRlcHRoUmF0aW87XG4gICAgfVxuICAgIGNhbGN1bGF0ZUZpcnN0U3RvcERlcHRoKCkge1xuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRlZXBlc3Qgc3RvcCByZXF1aXJlZCBieSBhbnkgY29tcGFydG1lbnQgdXNpbmcgZnVsbCBNLXZhbHVlc1xuICAgICAgICBsZXQgbWF4U3RvcERlcHRoID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBjb21wYXJ0bWVudCBvZiB0aGlzLmJ1aGxtYW5uQ29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgY29uc3QgYSA9IGNvbXBhcnRtZW50LmNvbWJpbmVkTVZhbHVlQTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBjb21wYXJ0bWVudC5jb21iaW5lZE1WYWx1ZUI7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgZGVwdGggd2hlcmUgdGlzc3VlIHByZXNzdXJlIGVxdWFscyBNLXZhbHVlIChubyBncmFkaWVudCBmYWN0b3IpXG4gICAgICAgICAgICBjb25zdCBmdWxsTVZhbHVlUHJlc3N1cmUgPSAodG90YWxMb2FkaW5nIC0gYikgLyBhO1xuICAgICAgICAgICAgY29uc3Qgc3RvcERlcHRoID0gKGZ1bGxNVmFsdWVQcmVzc3VyZSAtIHRoaXMuc3VyZmFjZVByZXNzdXJlKSAvIDAuMTtcbiAgICAgICAgICAgIG1heFN0b3BEZXB0aCA9IE1hdGgubWF4KG1heFN0b3BEZXB0aCwgc3RvcERlcHRoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKG1heFN0b3BEZXB0aCAvIDMpICogMyk7IC8vIFJvdW5kIHVwIHRvIDNtIGludGVydmFsc1xuICAgIH1cbiAgICBjYWxjdWxhdGVTdG9wVGltZShkZXB0aCkge1xuICAgICAgICAvLyBTaW1wbGlmaWVkIHN0b3AgdGltZSBjYWxjdWxhdGlvblxuICAgICAgICAvLyBJbiBhIGZ1bGwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgaW52b2x2ZSBpdGVyYXRpdmUgY2FsY3VsYXRpb25cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSB0aW1lIG5lZWRlZCBmb3IgdGlzc3VlcyB0byBvZmYtZ2FzIHN1ZmZpY2llbnRseVxuICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCk7XG4gICAgICAgIGlmIChkZXB0aCA8PSBjZWlsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gMDsgLy8gTm8gc3RvcCBuZWVkZWQgYXQgdGhpcyBkZXB0aFxuICAgICAgICB9XG4gICAgICAgIC8vIEJhc2ljIHN0b3AgdGltZSBlc3RpbWF0aW9uIGJhc2VkIG9uIHN1cGVyc2F0dXJhdGlvblxuICAgICAgICBsZXQgbWF4U3VwZXJzYXR1cmF0aW9uID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTY7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc3VwZXJzYXR1cmF0aW9uID0gdGhpcy5jYWxjdWxhdGVTdXBlcnNhdHVyYXRpb24oaSk7XG4gICAgICAgICAgICBtYXhTdXBlcnNhdHVyYXRpb24gPSBNYXRoLm1heChtYXhTdXBlcnNhdHVyYXRpb24sIHN1cGVyc2F0dXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXN0aW1hdGUgc3RvcCB0aW1lIGJhc2VkIG9uIHN1cGVyc2F0dXJhdGlvbiBsZXZlbFxuICAgICAgICBpZiAobWF4U3VwZXJzYXR1cmF0aW9uID4gMTIwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oMzAsIE1hdGgubWF4KDMsIE1hdGguZmxvb3IobWF4U3VwZXJzYXR1cmF0aW9uIC8gMTApKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWF4U3VwZXJzYXR1cmF0aW9uID4gMTA1KSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oMTUsIE1hdGgubWF4KDIsIE1hdGguZmxvb3IobWF4U3VwZXJzYXR1cmF0aW9uIC8gMTUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWF4U3VwZXJzYXR1cmF0aW9uID4gMTAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oNSwgTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihtYXhTdXBlcnNhdHVyYXRpb24gLyAyMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTsgLy8gTWluaW11bSBzdG9wIHRpbWVcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIERDUyByaXNrIGFzIGEgcGVyY2VudGFnZSBiYXNlZCBvbiBCdWhsbWFubiBNLXZhbHVlcyBhbmQgdGlzc3VlIHN1cGVyc2F0dXJhdGlvblxuICAgICAqIFVzZXMgdGhlIG1heGltdW0gc3VwZXJzYXR1cmF0aW9uIGFjcm9zcyBhbGwgY29tcGFydG1lbnRzXG4gICAgICogQHJldHVybnMgRENTIHJpc2sgYXMgYSBwZXJjZW50YWdlICgwLTEwMClcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVEQ1NSaXNrKCkge1xuICAgICAgICBsZXQgbWF4U3VwZXJzYXR1cmF0aW9uUmF0aW8gPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAxNjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wYXJ0bWVudCA9IHRoaXMuYnVobG1hbm5Db21wYXJ0bWVudHNbaSAtIDFdO1xuICAgICAgICAgICAgaWYgKCFjb21wYXJ0bWVudClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsTG9hZGluZyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICBjb25zdCBhbWJpZW50UHJlc3N1cmUgPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuYW1iaWVudFByZXNzdXJlO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIE0tdmFsdWUgYXQgY3VycmVudCBkZXB0aFxuICAgICAgICAgICAgY29uc3QgbVZhbHVlID0gY29tcGFydG1lbnQuY29tYmluZWRNVmFsdWVBICogYW1iaWVudFByZXNzdXJlICsgY29tcGFydG1lbnQuY29tYmluZWRNVmFsdWVCO1xuICAgICAgICAgICAgLy8gQXBwbHkgZ3JhZGllbnQgZmFjdG9yc1xuICAgICAgICAgICAgY29uc3QgZWZmZWN0aXZlR3JhZGllbnRGYWN0b3IgPSB0aGlzLmdldEdyYWRpZW50RmFjdG9yQXREZXB0aCh0aGlzLmN1cnJlbnREaXZlU3RhdGUuZGVwdGgpO1xuICAgICAgICAgICAgY29uc3QgYWxsb3dhYmxlU3VwZXJzYXR1cmF0aW9uID0gbVZhbHVlICogKGVmZmVjdGl2ZUdyYWRpZW50RmFjdG9yIC8gMTAwKTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBzdXBlcnNhdHVyYXRpb24gcmF0aW9cbiAgICAgICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9IE1hdGgubWF4KDAsIHRvdGFsTG9hZGluZyAtIGFtYmllbnRQcmVzc3VyZSk7XG4gICAgICAgICAgICBjb25zdCBzdXBlcnNhdHVyYXRpb25SYXRpbyA9IHN1cGVyc2F0dXJhdGlvbiAvIGFsbG93YWJsZVN1cGVyc2F0dXJhdGlvbjtcbiAgICAgICAgICAgIG1heFN1cGVyc2F0dXJhdGlvblJhdGlvID0gTWF0aC5tYXgobWF4U3VwZXJzYXR1cmF0aW9uUmF0aW8sIHN1cGVyc2F0dXJhdGlvblJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb252ZXJ0IHRvIHBlcmNlbnRhZ2Ugd2l0aCBleHBvbmVudGlhbCBzY2FsaW5nIGZvciBoaWdoZXIgcmlzayBsZXZlbHNcbiAgICAgICAgY29uc3Qgcmlza1BlcmNlbnRhZ2UgPSBNYXRoLm1pbigxMDAsIG1heFN1cGVyc2F0dXJhdGlvblJhdGlvICogbWF4U3VwZXJzYXR1cmF0aW9uUmF0aW8gKiA1MCk7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJpc2tQZXJjZW50YWdlICogMTApIC8gMTA7IC8vIFJvdW5kIHRvIDEgZGVjaW1hbCBwbGFjZVxuICAgIH1cbn1cbmV4cG9ydHMuQnVobG1hbm5Nb2RlbCA9IEJ1aGxtYW5uTW9kZWw7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogTk1SSTk4IChMaW5lYXIgRXhwb25lbnRpYWwgTW9kZWwpIERlY29tcHJlc3Npb24gQWxnb3JpdGhtIEltcGxlbWVudGF0aW9uXG4gKlxuICogSW1wbGVtZW50YXRpb24gb2YgdGhlIE5NUkk5OCBMaW5lYXIgRXhwb25lbnRpYWwgTW9kZWwgKExFTSkgZGVjb21wcmVzc2lvbiBhbGdvcml0aG0sXG4gKiBkZXZlbG9wZWQgYnkgdGhlIFUuUy4gTmF2eSBNZWRpY2FsIFJlc2VhcmNoIEluc3RpdHV0ZS4gVGhpcyBtb2RlbCB1c2VzIHRocmVlXG4gKiB0aXNzdWUgY29tcGFydG1lbnRzIHdpdGggbGluZWFyLWV4cG9uZW50aWFsIGtpbmV0aWNzIGFuZCBpbmNvcnBvcmF0ZXMgb3h5Z2VuXG4gKiBhcyBhIHBhcnRpY2lwYXRpbmcgZ2FzIGluIGRlY29tcHJlc3Npb24gY2FsY3VsYXRpb25zLlxuICpcbiAqIEtleSBGZWF0dXJlczpcbiAqIC0gVGhyZWUgdGlzc3VlIGNvbXBhcnRtZW50cyAoZmFzdCwgaW50ZXJtZWRpYXRlLCBzbG93KVxuICogLSBMaW5lYXItZXhwb25lbnRpYWwgZ2FzIGtpbmV0aWNzIChleHBvbmVudGlhbCB1cHRha2UsIGxpbmVhci1leHBvbmVudGlhbCBlbGltaW5hdGlvbilcbiAqIC0gT3h5Z2VuIHRyYWNraW5nIGFuZCBEQ1MgcmlzayBjb250cmlidXRpb25cbiAqIC0gUHJvYmFiaWxpc3RpYyBEQ1MgcmlzayBhc3Nlc3NtZW50XG4gKiAtIEVuaGFuY2VkIHNhZmV0eSBtYXJnaW5zIGZvciByZWNyZWF0aW9uYWwgZGl2aW5nXG4gKlxuICogQmFzZWQgb246XG4gKiAtIFUuUy4gTmF2eSBNZWRpY2FsIFJlc2VhcmNoIEluc3RpdHV0ZSByZXNlYXJjaFxuICogLSBMaW5lYXIgRXhwb25lbnRpYWwgTW9kZWwgKExFTSkgZnJhbWV3b3JrXG4gKiAtIE5NUkk5OCBkYXRhIHNldCB2YWxpZGF0aW9uXG4gKiAtIFByb2JhYmlsaXN0aWMgZGVjb21wcmVzc2lvbiBtb2RlbGluZ1xuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk5tcmk5OE1vZGVsID0gdm9pZCAwO1xuY29uc3QgRGVjb21wcmVzc2lvbk1vZGVsXzEgPSByZXF1aXJlKFwiLi9EZWNvbXByZXNzaW9uTW9kZWxcIik7XG4vKipcbiAqIE5NUkk5OCBMaW5lYXIgRXhwb25lbnRpYWwgTW9kZWwgSW1wbGVtZW50YXRpb25cbiAqL1xuY2xhc3MgTm1yaTk4TW9kZWwgZXh0ZW5kcyBEZWNvbXByZXNzaW9uTW9kZWxfMS5EZWNvbXByZXNzaW9uTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5ubXJpOThDb21wYXJ0bWVudHMgPSBbXTtcbiAgICAgICAgLy8gTk1SSTk4IHRocmVlLWNvbXBhcnRtZW50IGhhbGYtdGltZXMgKG1pbnV0ZXMpXG4gICAgICAgIC8vIEJhc2VkIG9uIExpbmVhciBFeHBvbmVudGlhbCBNb2RlbCByZXNlYXJjaFxuICAgICAgICB0aGlzLk5JVFJPR0VOX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICA4LjAsIC8vIEZhc3QgY29tcGFydG1lbnQgKGJsb29kL2JyYWluKVxuICAgICAgICAgICAgNDAuMCwgLy8gSW50ZXJtZWRpYXRlIGNvbXBhcnRtZW50IChtdXNjbGUpXG4gICAgICAgICAgICAxMjAuMCAvLyBTbG93IGNvbXBhcnRtZW50IChmYXQvYm9uZSlcbiAgICAgICAgXTtcbiAgICAgICAgLy8gSGVsaXVtIGhhbGYtdGltZXMgKGFwcHJveGltYXRlbHkgMi42NXggZmFzdGVyIHRoYW4gbml0cm9nZW4pXG4gICAgICAgIHRoaXMuSEVMSVVNX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICAzLjAsIC8vIEZhc3QgY29tcGFydG1lbnQgZm9yIGhlbGl1bVxuICAgICAgICAgICAgMTUuMSwgLy8gSW50ZXJtZWRpYXRlIGNvbXBhcnRtZW50IGZvciBoZWxpdW1cbiAgICAgICAgICAgIDQ1LjMgLy8gU2xvdyBjb21wYXJ0bWVudCBmb3IgaGVsaXVtXG4gICAgICAgIF07XG4gICAgICAgIC8vIE94eWdlbiBoYWxmLXRpbWVzIChzaW1pbGFyIHRvIG5pdHJvZ2VuIGJ1dCBzbGlnaHRseSBmYXN0ZXIgbWV0YWJvbGlzbSlcbiAgICAgICAgdGhpcy5PWFlHRU5fSEFMRl9USU1FUyA9IFtcbiAgICAgICAgICAgIDYuMCwgLy8gRmFzdCBjb21wYXJ0bWVudCBmb3Igb3h5Z2VuXG4gICAgICAgICAgICAzMC4wLCAvLyBJbnRlcm1lZGlhdGUgY29tcGFydG1lbnQgZm9yIG94eWdlblxuICAgICAgICAgICAgOTAuMCAvLyBTbG93IGNvbXBhcnRtZW50IGZvciBveHlnZW5cbiAgICAgICAgXTtcbiAgICAgICAgLy8gTS12YWx1ZXMgKG1heGltdW0gYWxsb3dhYmxlIHRvdGFsIGdhcyBsb2FkaW5nKSBpbiBiYXIgYWJzb2x1dGVcbiAgICAgICAgdGhpcy5NX1ZBTFVFUyA9IFtcbiAgICAgICAgICAgIDEuNiwgLy8gRmFzdCBjb21wYXJ0bWVudFxuICAgICAgICAgICAgMS4yLCAvLyBJbnRlcm1lZGlhdGUgY29tcGFydG1lbnQgIFxuICAgICAgICAgICAgMS4wIC8vIFNsb3cgY29tcGFydG1lbnRcbiAgICAgICAgXTtcbiAgICAgICAgLy8gTGluZWFyIGVsaW1pbmF0aW9uIHNsb3BlIGZhY3RvcnNcbiAgICAgICAgdGhpcy5MSU5FQVJfU0xPUEVTID0gW1xuICAgICAgICAgICAgMC44LCAvLyBGYXN0IGNvbXBhcnRtZW50IChhZ2dyZXNzaXZlIGVsaW1pbmF0aW9uKVxuICAgICAgICAgICAgMC41LCAvLyBJbnRlcm1lZGlhdGUgY29tcGFydG1lbnQgKG1vZGVyYXRlKVxuICAgICAgICAgICAgMC4zIC8vIFNsb3cgY29tcGFydG1lbnQgKGNvbnNlcnZhdGl2ZSBlbGltaW5hdGlvbilcbiAgICAgICAgXTtcbiAgICAgICAgLy8gQ3Jvc3NvdmVyIHByZXNzdXJlcyBmb3IgbGluZWFyIGVsaW1pbmF0aW9uIChiYXIgYWJvdmUgYW1iaWVudClcbiAgICAgICAgdGhpcy5DUk9TU09WRVJfUFJFU1NVUkVTID0gW1xuICAgICAgICAgICAgMC41LCAvLyBGYXN0IGNvbXBhcnRtZW50XG4gICAgICAgICAgICAwLjMsIC8vIEludGVybWVkaWF0ZSBjb21wYXJ0bWVudFxuICAgICAgICAgICAgMC4yIC8vIFNsb3cgY29tcGFydG1lbnRcbiAgICAgICAgXTtcbiAgICAgICAgLy8gT3h5Z2VuIHRocmVzaG9sZHMgZm9yIERDUyByaXNrIGNvbnRyaWJ1dGlvbiAoYmFyIHBhcnRpYWwgcHJlc3N1cmUpXG4gICAgICAgIHRoaXMuT1hZR0VOX1RIUkVTSE9MRFMgPSBbXG4gICAgICAgICAgICAxLjQsIC8vIEZhc3QgY29tcGFydG1lbnQgKGNhbiBoYW5kbGUgaGlnaGVyIE8yKVxuICAgICAgICAgICAgMS4wLCAvLyBJbnRlcm1lZGlhdGUgY29tcGFydG1lbnRcbiAgICAgICAgICAgIDAuOCAvLyBTbG93IGNvbXBhcnRtZW50IChtb3N0IHNlbnNpdGl2ZSB0byBPMilcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgY29uc2VydmF0aXNtOiAzLCAvLyBNb2RlcmF0ZSBjb25zZXJ2YXRpc20gYnkgZGVmYXVsdFxuICAgICAgICAgICAgbWF4RGNzUmlzazogMi4wLCAvLyAyJSBtYXhpbXVtIERDUyByaXNrXG4gICAgICAgICAgICBzYWZldHlGYWN0b3I6IDEuMiwgLy8gMjAlIGFkZGl0aW9uYWwgc2FmZXR5IG1hcmdpblxuICAgICAgICAgICAgZW5hYmxlT3h5Z2VuVHJhY2tpbmc6IHRydWUsIC8vIEVuYWJsZSBveHlnZW4gdHJhY2tpbmdcbiAgICAgICAgICAgIC4uLnBhcmFtZXRlcnNcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVmFsaWRhdGUgcGFyYW1ldGVyc1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuY29uc2VydmF0aXNtID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oNSwgdGhpcy5wYXJhbWV0ZXJzLmNvbnNlcnZhdGlzbSkpO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMubWF4RGNzUmlzayA9IE1hdGgubWF4KDAuMSwgTWF0aC5taW4oMTAuMCwgdGhpcy5wYXJhbWV0ZXJzLm1heERjc1Jpc2spKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNhZmV0eUZhY3RvciA9IE1hdGgubWF4KDEuMCwgTWF0aC5taW4oMi4wLCB0aGlzLnBhcmFtZXRlcnMuc2FmZXR5RmFjdG9yKSk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGlzc3VlIGNvbXBhcnRtZW50cyBhZnRlciBwYXJhbWV0ZXJzIGFyZSBzZXRcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCk7XG4gICAgfVxuICAgIGluaXRpYWxpemVUaXNzdWVDb21wYXJ0bWVudHMoKSB7XG4gICAgICAgIHRoaXMudGlzc3VlQ29tcGFydG1lbnRzID0gW107XG4gICAgICAgIHRoaXMubm1yaTk4Q29tcGFydG1lbnRzID0gW107XG4gICAgICAgIC8vIEVuc3VyZSBhcnJheXMgYXJlIHByb3Blcmx5IGRlZmluZWRcbiAgICAgICAgaWYgKCF0aGlzLk5JVFJPR0VOX0hBTEZfVElNRVMgfHwgIXRoaXMuSEVMSVVNX0hBTEZfVElNRVMgfHxcbiAgICAgICAgICAgICF0aGlzLk9YWUdFTl9IQUxGX1RJTUVTIHx8ICF0aGlzLk1fVkFMVUVTIHx8ICF0aGlzLkxJTkVBUl9TTE9QRVMgfHxcbiAgICAgICAgICAgICF0aGlzLkNST1NTT1ZFUl9QUkVTU1VSRVMgfHwgIXRoaXMuT1hZR0VOX1RIUkVTSE9MRFMpIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBpbml0aWFsaXphdGlvbiBpZiBhcnJheXMgYXJlIG5vdCByZWFkeVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuaXRyb2dlbkhhbGZUaW1lID0gdGhpcy5OSVRST0dFTl9IQUxGX1RJTUVTW2ldO1xuICAgICAgICAgICAgY29uc3QgaGVsaXVtSGFsZlRpbWUgPSB0aGlzLkhFTElVTV9IQUxGX1RJTUVTW2ldO1xuICAgICAgICAgICAgY29uc3Qgb3h5Z2VuSGFsZlRpbWUgPSB0aGlzLk9YWUdFTl9IQUxGX1RJTUVTW2ldO1xuICAgICAgICAgICAgY29uc3QgbVZhbHVlID0gdGhpcy5NX1ZBTFVFU1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVhclNsb3BlID0gdGhpcy5MSU5FQVJfU0xPUEVTW2ldO1xuICAgICAgICAgICAgY29uc3QgY3Jvc3NvdmVyUHJlc3N1cmUgPSB0aGlzLkNST1NTT1ZFUl9QUkVTU1VSRVNbaV07XG4gICAgICAgICAgICBjb25zdCBveHlnZW5UaHJlc2hvbGQgPSB0aGlzLk9YWUdFTl9USFJFU0hPTERTW2ldO1xuICAgICAgICAgICAgaWYgKG5pdHJvZ2VuSGFsZlRpbWUgPT09IHVuZGVmaW5lZCB8fCBoZWxpdW1IYWxmVGltZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgb3h5Z2VuSGFsZlRpbWUgPT09IHVuZGVmaW5lZCB8fCBtVmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGxpbmVhclNsb3BlID09PSB1bmRlZmluZWQgfHwgY3Jvc3NvdmVyUHJlc3N1cmUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIG94eWdlblRocmVzaG9sZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7IC8vIFNraXAgaWYgdmFsdWVzIGFyZSB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJhc2VDb21wYXJ0bWVudCA9IHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IGkgKyAxLFxuICAgICAgICAgICAgICAgIG5pdHJvZ2VuSGFsZlRpbWU6IG5pdHJvZ2VuSGFsZlRpbWUsXG4gICAgICAgICAgICAgICAgaGVsaXVtSGFsZlRpbWU6IGhlbGl1bUhhbGZUaW1lLFxuICAgICAgICAgICAgICAgIG5pdHJvZ2VuTG9hZGluZzogMC43OSAqIHRoaXMuc3VyZmFjZVByZXNzdXJlLCAvLyBTdXJmYWNlIGVxdWlsaWJyaXVtXG4gICAgICAgICAgICAgICAgaGVsaXVtTG9hZGluZzogMC4wLFxuICAgICAgICAgICAgICAgIGdldCB0b3RhbExvYWRpbmcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5pdHJvZ2VuTG9hZGluZyArIHRoaXMuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgbm1yaTk4Q29tcGFydG1lbnQgPSB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZUNvbXBhcnRtZW50LFxuICAgICAgICAgICAgICAgIG94eWdlbkxvYWRpbmc6IDAuMjEgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSwgLy8gU3VyZmFjZSBveHlnZW4gZXF1aWxpYnJpdW1cbiAgICAgICAgICAgICAgICBsaW5lYXJTbG9wZTogbGluZWFyU2xvcGUsXG4gICAgICAgICAgICAgICAgY3Jvc3NvdmVyUHJlc3N1cmU6IGNyb3Nzb3ZlclByZXNzdXJlLFxuICAgICAgICAgICAgICAgIG1WYWx1ZTogbVZhbHVlLFxuICAgICAgICAgICAgICAgIG94eWdlblRocmVzaG9sZDogb3h5Z2VuVGhyZXNob2xkLFxuICAgICAgICAgICAgICAgIGdldCB0b3RhbExvYWRpbmcoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5pdHJvZ2VuTG9hZGluZyArIHRoaXMuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMucHVzaChiYXNlQ29tcGFydG1lbnQpO1xuICAgICAgICAgICAgdGhpcy5ubXJpOThDb21wYXJ0bWVudHMucHVzaChubXJpOThDb21wYXJ0bWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVGlzc3VlTG9hZGluZ3ModGltZVN0ZXApIHtcbiAgICAgICAgY29uc3Qgbml0cm9nZW5QUCA9IHRoaXMuY2FsY3VsYXRlUGFydGlhbFByZXNzdXJlKHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXgubml0cm9nZW4pO1xuICAgICAgICBjb25zdCBoZWxpdW1QUCA9IHRoaXMuY2FsY3VsYXRlUGFydGlhbFByZXNzdXJlKHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXguaGVsaXVtKTtcbiAgICAgICAgY29uc3Qgb3h5Z2VuUFAgPSB0aGlzLmNhbGN1bGF0ZVBhcnRpYWxQcmVzc3VyZSh0aGlzLmN1cnJlbnREaXZlU3RhdGUuZ2FzTWl4Lm94eWdlbik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcnRtZW50ID0gdGhpcy50aXNzdWVDb21wYXJ0bWVudHNbaV07XG4gICAgICAgICAgICBjb25zdCBubXJpOThDb21wYXJ0bWVudCA9IHRoaXMubm1yaTk4Q29tcGFydG1lbnRzW2ldO1xuICAgICAgICAgICAgLy8gVXBkYXRlIG5pdHJvZ2VuIGxvYWRpbmcgdXNpbmcgbGluZWFyLWV4cG9uZW50aWFsIG1vZGVsXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUxpbmVhckV4cG9uZW50aWFsTG9hZGluZyhjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcsIG5pdHJvZ2VuUFAsIGNvbXBhcnRtZW50Lm5pdHJvZ2VuSGFsZlRpbWUsIG5tcmk5OENvbXBhcnRtZW50LmxpbmVhclNsb3BlLCBubXJpOThDb21wYXJ0bWVudC5jcm9zc292ZXJQcmVzc3VyZSwgdGltZVN0ZXApO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGhlbGl1bSBsb2FkaW5nIHVzaW5nIGxpbmVhci1leHBvbmVudGlhbCBtb2RlbFxuICAgICAgICAgICAgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZyA9IHRoaXMuY2FsY3VsYXRlTGluZWFyRXhwb25lbnRpYWxMb2FkaW5nKGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmcsIGhlbGl1bVBQLCBjb21wYXJ0bWVudC5oZWxpdW1IYWxmVGltZSwgbm1yaTk4Q29tcGFydG1lbnQubGluZWFyU2xvcGUsIG5tcmk5OENvbXBhcnRtZW50LmNyb3Nzb3ZlclByZXNzdXJlLCB0aW1lU3RlcCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgb3h5Z2VuIGxvYWRpbmcgaWYgZW5hYmxlZFxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1ldGVycy5lbmFibGVPeHlnZW5UcmFja2luZykge1xuICAgICAgICAgICAgICAgIG5tcmk5OENvbXBhcnRtZW50Lm94eWdlbkxvYWRpbmcgPSB0aGlzLmNhbGN1bGF0ZUxpbmVhckV4cG9uZW50aWFsTG9hZGluZyhubXJpOThDb21wYXJ0bWVudC5veHlnZW5Mb2FkaW5nLCBveHlnZW5QUCwgdGhpcy5PWFlHRU5fSEFMRl9USU1FU1tpXSwgbm1yaTk4Q29tcGFydG1lbnQubGluZWFyU2xvcGUsIG5tcmk5OENvbXBhcnRtZW50LmNyb3Nzb3ZlclByZXNzdXJlLCB0aW1lU3RlcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FsY3VsYXRlQ2VpbGluZygpIHtcbiAgICAgICAgbGV0IG1heENlaWxpbmcgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMubm1yaTk4Q29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpO1xuICAgICAgICAgICAgbWF4Q2VpbGluZyA9IE1hdGgubWF4KG1heENlaWxpbmcsIGNlaWxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBtYXhDZWlsaW5nKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlRGVjb21wcmVzc2lvblN0b3BzKCkge1xuICAgICAgICBjb25zdCBzdG9wcyA9IFtdO1xuICAgICAgICBjb25zdCBjZWlsaW5nID0gdGhpcy5jYWxjdWxhdGVDZWlsaW5nKCk7XG4gICAgICAgIGlmIChjZWlsaW5nIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9wczsgLy8gTm8gZGVjb21wcmVzc2lvbiByZXF1aXJlZFxuICAgICAgICB9XG4gICAgICAgIC8vIEdlbmVyYXRlIHN0b3BzIGF0IDNtIGludGVydmFscyBzdGFydGluZyBmcm9tIGNlaWxpbmdcbiAgICAgICAgbGV0IGN1cnJlbnREZXB0aCA9IE1hdGguY2VpbChjZWlsaW5nIC8gMykgKiAzO1xuICAgICAgICB3aGlsZSAoY3VycmVudERlcHRoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3RvcFRpbWUgPSB0aGlzLmNhbGN1bGF0ZVN0b3BUaW1lKGN1cnJlbnREZXB0aCk7XG4gICAgICAgICAgICBpZiAoc3RvcFRpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoOiBjdXJyZW50RGVwdGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHN0b3BUaW1lLFxuICAgICAgICAgICAgICAgICAgICBnYXNNaXg6IHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnREZXB0aCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdG9wcztcbiAgICB9XG4gICAgY2FuQXNjZW5kRGlyZWN0bHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUNlaWxpbmcoKSA8PSAwO1xuICAgIH1cbiAgICBnZXRNb2RlbE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBgTk1SSTk4IExFTSAoQ29uc2VydmF0aXNtOiAke3RoaXMucGFyYW1ldGVycy5jb25zZXJ2YXRpc219LCBSaXNrOiAke3RoaXMucGFyYW1ldGVycy5tYXhEY3NSaXNrfSUpYDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRpc3N1ZSBsb2FkaW5nIHVzaW5nIHRoZSBMaW5lYXIgRXhwb25lbnRpYWwgTW9kZWxcbiAgICAgKiBFeHBvbmVudGlhbCB1cHRha2UsIGxpbmVhci1leHBvbmVudGlhbCBlbGltaW5hdGlvblxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUxpbmVhckV4cG9uZW50aWFsTG9hZGluZyhpbml0aWFsTG9hZGluZywgcGFydGlhbFByZXNzdXJlLCBoYWxmVGltZSwgbGluZWFyU2xvcGUsIGNyb3Nzb3ZlclByZXNzdXJlLCB0aW1lU3RlcCkge1xuICAgICAgICBjb25zdCBhbWJpZW50UHJlc3N1cmUgPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuYW1iaWVudFByZXNzdXJlO1xuICAgICAgICBjb25zdCBzdXBlcnNhdHVyYXRpb24gPSBpbml0aWFsTG9hZGluZyAtIGFtYmllbnRQcmVzc3VyZTtcbiAgICAgICAgLy8gR2FzIHVwdGFrZTogYWx3YXlzIGV4cG9uZW50aWFsIChzdGFuZGFyZCBIYWxkYW5lKVxuICAgICAgICBpZiAocGFydGlhbFByZXNzdXJlID49IGluaXRpYWxMb2FkaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVIYWxkYW5lTG9hZGluZyhpbml0aWFsTG9hZGluZywgcGFydGlhbFByZXNzdXJlLCBoYWxmVGltZSwgdGltZVN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdhcyBlbGltaW5hdGlvbjogbGluZWFyLWV4cG9uZW50aWFsIG1vZGVsXG4gICAgICAgIGlmIChzdXBlcnNhdHVyYXRpb24gPiBjcm9zc292ZXJQcmVzc3VyZSkge1xuICAgICAgICAgICAgLy8gTGluZWFyIGVsaW1pbmF0aW9uIHBoYXNlXG4gICAgICAgICAgICBjb25zdCBsaW5lYXJSYXRlID0gbGluZWFyU2xvcGUgKiAoc3VwZXJzYXR1cmF0aW9uIC0gY3Jvc3NvdmVyUHJlc3N1cmUpIC8gaGFsZlRpbWU7XG4gICAgICAgICAgICBjb25zdCBuZXdMb2FkaW5nID0gaW5pdGlhbExvYWRpbmcgLSAobGluZWFyUmF0ZSAqIHRpbWVTdGVwKTtcbiAgICAgICAgICAgIC8vIERvbid0IGdvIGJlbG93IGNyb3Nzb3ZlciBwb2ludFxuICAgICAgICAgICAgY29uc3QgY3Jvc3NvdmVyTG9hZGluZyA9IGFtYmllbnRQcmVzc3VyZSArIGNyb3Nzb3ZlclByZXNzdXJlO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KG5ld0xvYWRpbmcsIGNyb3Nzb3ZlckxvYWRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhwb25lbnRpYWwgZWxpbWluYXRpb24gcGhhc2UgKHN0YW5kYXJkIEhhbGRhbmUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVIYWxkYW5lTG9hZGluZyhpbml0aWFsTG9hZGluZywgcGFydGlhbFByZXNzdXJlLCBoYWxmVGltZSwgdGltZVN0ZXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBkZWNvbXByZXNzaW9uIGNlaWxpbmcgZm9yIGEgc3BlY2lmaWMgY29tcGFydG1lbnRcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpIHtcbiAgICAgICAgbGV0IHRvdGFsTG9hZGluZyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgIC8vIEFkZCBveHlnZW4gY29udHJpYnV0aW9uIGlmIGFib3ZlIHRocmVzaG9sZFxuICAgICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzLmVuYWJsZU94eWdlblRyYWNraW5nICYmXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5veHlnZW5Mb2FkaW5nID4gY29tcGFydG1lbnQub3h5Z2VuVGhyZXNob2xkKSB7XG4gICAgICAgICAgICB0b3RhbExvYWRpbmcgKz0gKGNvbXBhcnRtZW50Lm94eWdlbkxvYWRpbmcgLSBjb21wYXJ0bWVudC5veHlnZW5UaHJlc2hvbGQpICogMC41OyAvLyBSZWR1Y2VkIG94eWdlbiBjb250cmlidXRpb25cbiAgICAgICAgfVxuICAgICAgICAvLyBBcHBseSBjb25zZXJ2YXRpc20gYW5kIHNhZmV0eSBmYWN0b3JzXG4gICAgICAgIGNvbnN0IGNvbnNlcnZhdGlzbUZhY3RvciA9IDEuMCAtICh0aGlzLnBhcmFtZXRlcnMuY29uc2VydmF0aXNtICogMC4xKTsgLy8gMCUgdG8gNTAlIHJlZHVjdGlvblxuICAgICAgICBjb25zdCBzYWZldHlGYWN0b3IgPSAxLjAgLyB0aGlzLnBhcmFtZXRlcnMuc2FmZXR5RmFjdG9yOyAvLyBTYWZldHkgZmFjdG9yIHJlZHVjZXMgYWxsb3dhYmxlIGxvYWRpbmdcbiAgICAgICAgY29uc3QgYWxsb3dhYmxlTG9hZGluZyA9IGNvbXBhcnRtZW50Lm1WYWx1ZSAqIGNvbnNlcnZhdGlzbUZhY3RvciAqIHNhZmV0eUZhY3RvcjtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGNlaWxpbmcgcHJlc3N1cmVcbiAgICAgICAgY29uc3QgY2VpbGluZ1ByZXNzdXJlID0gdG90YWxMb2FkaW5nIC0gYWxsb3dhYmxlTG9hZGluZztcbiAgICAgICAgY29uc3QgY2VpbGluZ0RlcHRoID0gKGNlaWxpbmdQcmVzc3VyZSAtIHRoaXMuc3VyZmFjZVByZXNzdXJlKSAqIDEwO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgY2VpbGluZ0RlcHRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHJlcXVpcmVkIHN0b3AgdGltZSBhdCBhIGdpdmVuIGRlcHRoXG4gICAgICovXG4gICAgY2FsY3VsYXRlU3RvcFRpbWUoZGVwdGgpIHtcbiAgICAgICAgY29uc3QgYW1iaWVudFByZXNzdXJlID0gdGhpcy5jYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUoZGVwdGgpO1xuICAgICAgICBsZXQgbWF4U3RvcFRpbWUgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMubm1yaTk4Q29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBsZXQgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgICAgIC8vIEluY2x1ZGUgb3h5Z2VuIGlmIGFib3ZlIHRocmVzaG9sZFxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1ldGVycy5lbmFibGVPeHlnZW5UcmFja2luZyAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcnRtZW50Lm94eWdlbkxvYWRpbmcgPiBjb21wYXJ0bWVudC5veHlnZW5UaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0b3RhbExvYWRpbmcgKz0gKGNvbXBhcnRtZW50Lm94eWdlbkxvYWRpbmcgLSBjb21wYXJ0bWVudC5veHlnZW5UaHJlc2hvbGQpICogMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29uc2VydmF0aXNtRmFjdG9yID0gMS4wIC0gKHRoaXMucGFyYW1ldGVycy5jb25zZXJ2YXRpc20gKiAwLjEpO1xuICAgICAgICAgICAgY29uc3Qgc2FmZXR5RmFjdG9yID0gMS4wIC8gdGhpcy5wYXJhbWV0ZXJzLnNhZmV0eUZhY3RvcjsgLy8gU2FmZXR5IGZhY3RvciByZWR1Y2VzIGFsbG93YWJsZSBsb2FkaW5nXG4gICAgICAgICAgICBjb25zdCBhbGxvd2FibGVMb2FkaW5nID0gY29tcGFydG1lbnQubVZhbHVlICogY29uc2VydmF0aXNtRmFjdG9yICogc2FmZXR5RmFjdG9yO1xuICAgICAgICAgICAgY29uc3QgbWF4QWxsb3dhYmxlQXREZXB0aCA9IGFsbG93YWJsZUxvYWRpbmcgKyBhbWJpZW50UHJlc3N1cmU7XG4gICAgICAgICAgICBpZiAodG90YWxMb2FkaW5nID4gbWF4QWxsb3dhYmxlQXREZXB0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2Vzc0xvYWRpbmcgPSB0b3RhbExvYWRpbmcgLSBtYXhBbGxvd2FibGVBdERlcHRoO1xuICAgICAgICAgICAgICAgIC8vIEVzdGltYXRlIHRpbWUgdXNpbmcgbGluZWFyIGVsaW1pbmF0aW9uIGlmIGluIGxpbmVhciBwaGFzZVxuICAgICAgICAgICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9IHRvdGFsTG9hZGluZyAtIGFtYmllbnRQcmVzc3VyZTtcbiAgICAgICAgICAgICAgICBpZiAoc3VwZXJzYXR1cmF0aW9uID4gY29tcGFydG1lbnQuY3Jvc3NvdmVyUHJlc3N1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZWFyUmF0ZSA9IGNvbXBhcnRtZW50LmxpbmVhclNsb3BlICpcbiAgICAgICAgICAgICAgICAgICAgICAgIChzdXBlcnNhdHVyYXRpb24gLSBjb21wYXJ0bWVudC5jcm9zc292ZXJQcmVzc3VyZSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFydG1lbnQubml0cm9nZW5IYWxmVGltZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXN0aW1hdGVkVGltZSA9IGV4Y2Vzc0xvYWRpbmcgLyBsaW5lYXJSYXRlO1xuICAgICAgICAgICAgICAgICAgICBtYXhTdG9wVGltZSA9IE1hdGgubWF4KG1heFN0b3BUaW1lLCBlc3RpbWF0ZWRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cG9uZW50aWFsIHBoYXNlIGVzdGltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwb25lbnRpYWxUaW1lID0gY29tcGFydG1lbnQubml0cm9nZW5IYWxmVGltZSAqIE1hdGgubG9nKDIpICpcbiAgICAgICAgICAgICAgICAgICAgICAgIChleGNlc3NMb2FkaW5nIC8gKHRvdGFsTG9hZGluZyAtIGFtYmllbnRQcmVzc3VyZSArIDAuMSkpO1xuICAgICAgICAgICAgICAgICAgICBtYXhTdG9wVGltZSA9IE1hdGgubWF4KG1heFN0b3BUaW1lLCBleHBvbmVudGlhbFRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSb3VuZCB1cCB0byBuZWFyZXN0IG1pbnV0ZSwgd2l0aCBtaW5pbXVtIDEgbWludXRlIGFuZCBtYXhpbXVtIDMwIG1pbnV0ZXMgcGVyIHN0b3BcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDEsIE1hdGgubWluKDMwLCBNYXRoLmNlaWwobWF4U3RvcFRpbWUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBEQ1MgcmlzayBhcyBhIHBlcmNlbnRhZ2UgdXNpbmcgTk1SSTk4IHByb2JhYmlsaXN0aWMgbW9kZWxcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVEQ1NSaXNrKCkge1xuICAgICAgICBsZXQgbWF4Umlza0ZhY3RvciA9IDA7XG4gICAgICAgIGxldCBveHlnZW5SaXNrRmFjdG9yID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBjb21wYXJ0bWVudCBvZiB0aGlzLm5tcmk5OENvbXBhcnRtZW50cykge1xuICAgICAgICAgICAgbGV0IHRvdGFsTG9hZGluZyA9IGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyArIGNvbXBhcnRtZW50LmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW5lcnQgZ2FzIHJpc2tcbiAgICAgICAgICAgIGNvbnN0IGNvbnNlcnZhdGlzbUZhY3RvciA9IDEuMCAtICh0aGlzLnBhcmFtZXRlcnMuY29uc2VydmF0aXNtICogMC4xKTtcbiAgICAgICAgICAgIGNvbnN0IHNhZmV0eUZhY3RvciA9IDEuMCAvIHRoaXMucGFyYW1ldGVycy5zYWZldHlGYWN0b3I7IC8vIFNhZmV0eSBmYWN0b3IgcmVkdWNlcyBhbGxvd2FibGUgbG9hZGluZ1xuICAgICAgICAgICAgY29uc3QgYWxsb3dhYmxlTG9hZGluZyA9IGNvbXBhcnRtZW50Lm1WYWx1ZSAqIGNvbnNlcnZhdGlzbUZhY3RvciAqIHNhZmV0eUZhY3RvcjtcbiAgICAgICAgICAgIGNvbnN0IG1heEFsbG93YWJsZUxvYWRpbmcgPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuYW1iaWVudFByZXNzdXJlICsgYWxsb3dhYmxlTG9hZGluZztcbiAgICAgICAgICAgIGlmICh0b3RhbExvYWRpbmcgPiBtYXhBbGxvd2FibGVMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhjZWVkYW5jZSA9IHRvdGFsTG9hZGluZyAtIG1heEFsbG93YWJsZUxvYWRpbmc7XG4gICAgICAgICAgICAgICAgY29uc3Qgcmlza0ZhY3RvciA9IGV4Y2VlZGFuY2UgLyBhbGxvd2FibGVMb2FkaW5nO1xuICAgICAgICAgICAgICAgIG1heFJpc2tGYWN0b3IgPSBNYXRoLm1heChtYXhSaXNrRmFjdG9yLCByaXNrRmFjdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBveHlnZW4gdG94aWNpdHkgcmlzayBpZiBlbmFibGVkXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzLmVuYWJsZU94eWdlblRyYWNraW5nICYmXG4gICAgICAgICAgICAgICAgY29tcGFydG1lbnQub3h5Z2VuTG9hZGluZyA+IGNvbXBhcnRtZW50Lm94eWdlblRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG94eWdlbkV4Y2VzcyA9IGNvbXBhcnRtZW50Lm94eWdlbkxvYWRpbmcgLSBjb21wYXJ0bWVudC5veHlnZW5UaHJlc2hvbGQ7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3h5Z2VuUmlzayA9IG94eWdlbkV4Y2VzcyAvIGNvbXBhcnRtZW50Lm94eWdlblRocmVzaG9sZDtcbiAgICAgICAgICAgICAgICBveHlnZW5SaXNrRmFjdG9yID0gTWF0aC5tYXgob3h5Z2VuUmlza0ZhY3Rvciwgb3h5Z2VuUmlzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29tYmluZSBpbmVydCBnYXMgYW5kIG94eWdlbiByaXNrc1xuICAgICAgICBjb25zdCBjb21iaW5lZFJpc2tGYWN0b3IgPSBtYXhSaXNrRmFjdG9yICsgKG94eWdlblJpc2tGYWN0b3IgKiAwLjMpOyAvLyBPeHlnZW4gY29udHJpYnV0ZXMgMzAlIHdlaWdodFxuICAgICAgICBjb25zdCByaXNrUGVyY2VudGFnZSA9IE1hdGgubWluKDEwMCwgY29tYmluZWRSaXNrRmFjdG9yICogdGhpcy5wYXJhbWV0ZXJzLm1heERjc1Jpc2sgKiAxMDApO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChyaXNrUGVyY2VudGFnZSAqIDEwKSAvIDEwOyAvLyBSb3VuZCB0byAxIGRlY2ltYWwgcGxhY2VcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IE5NUkk5OC1zcGVjaWZpYyBjb21wYXJ0bWVudCBkYXRhXG4gICAgICovXG4gICAgZ2V0Tm1yaTk4Q29tcGFydG1lbnREYXRhKGNvbXBhcnRtZW50TnVtYmVyKSB7XG4gICAgICAgIGlmIChjb21wYXJ0bWVudE51bWJlciA8IDEgfHwgY29tcGFydG1lbnROdW1iZXIgPiAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05NUkk5OCBoYXMgb25seSAzIGNvbXBhcnRtZW50cyAoMS0zKScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMubm1yaTk4Q29tcGFydG1lbnRzW2NvbXBhcnRtZW50TnVtYmVyIC0gMV0gfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBOTVJJOTggY29tcGFydG1lbnQgZGF0YVxuICAgICAqL1xuICAgIGdldEFsbE5tcmk5OENvbXBhcnRtZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm1yaTk4Q29tcGFydG1lbnRzLm1hcChjb21wID0+ICh7IC4uLmNvbXAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBhbGdvcml0aG0gcGFyYW1ldGVyc1xuICAgICAqL1xuICAgIGdldFBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMucGFyYW1ldGVycyB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYWxnb3JpdGhtIHBhcmFtZXRlcnNcbiAgICAgKi9cbiAgICB1cGRhdGVQYXJhbWV0ZXJzKG5ld1BhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgLi4udGhpcy5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgLi4ubmV3UGFyYW1ldGVyc1xuICAgICAgICB9O1xuICAgICAgICAvLyBWYWxpZGF0ZSB1cGRhdGVkIHBhcmFtZXRlcnNcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmNvbnNlcnZhdGlzbSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIHRoaXMucGFyYW1ldGVycy5jb25zZXJ2YXRpc20pKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLm1heERjc1Jpc2sgPSBNYXRoLm1heCgwLjEsIE1hdGgubWluKDEwLjAsIHRoaXMucGFyYW1ldGVycy5tYXhEY3NSaXNrKSk7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5zYWZldHlGYWN0b3IgPSBNYXRoLm1heCgxLjAsIE1hdGgubWluKDIuMCwgdGhpcy5wYXJhbWV0ZXJzLnNhZmV0eUZhY3RvcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZGV0YWlsZWQgbW9kZWwgc3RhdHVzIGZvciBkZWJ1Z2dpbmcvbW9uaXRvcmluZ1xuICAgICAqL1xuICAgIGdldE1vZGVsU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcGFydG1lbnRzOiB0aGlzLmdldEFsbE5tcmk5OENvbXBhcnRtZW50cygpLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdGhpcy5nZXRQYXJhbWV0ZXJzKCksXG4gICAgICAgICAgICBjZWlsaW5nOiB0aGlzLmNhbGN1bGF0ZUNlaWxpbmcoKSxcbiAgICAgICAgICAgIGRjc1Jpc2s6IHRoaXMuY2FsY3VsYXRlRENTUmlzaygpLFxuICAgICAgICAgICAgY2FuQXNjZW5kOiB0aGlzLmNhbkFzY2VuZERpcmVjdGx5KClcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLk5tcmk5OE1vZGVsID0gTm1yaTk4TW9kZWw7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogVlZhbC0xOCBUaGFsbWFubiBEZWNvbXByZXNzaW9uIEFsZ29yaXRobSBJbXBsZW1lbnRhdGlvblxuICpcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBWVmFsLTE4IChWVkFMIDE4KSBUaGFsbWFubiBkZWNvbXByZXNzaW9uIG1vZGVsLFxuICogd2hpY2ggdXNlcyBhIGxpbmVhci1leHBvbmVudGlhbCBhcHByb2FjaCB3aXRoIHRocmVlIHRpc3N1ZSBjb21wYXJ0bWVudHMuXG4gKiBPcmlnaW5hbGx5IGRlc2lnbmVkIGluIDE5ODAgZm9yIHRoZSBVUyBOYXZ5IE1rMTUgcmVicmVhdGhlci5cbiAqXG4gKiBLZXkgRmVhdHVyZXM6XG4gKiAtIFRocmVlIHRpc3N1ZSBjb21wYXJ0bWVudHMgKGZhc3QsIGludGVybWVkaWF0ZSwgc2xvdylcbiAqIC0gRXhwb25lbnRpYWwgZ2FzIHVwdGFrZVxuICogLSBMaW5lYXItZXhwb25lbnRpYWwgZ2FzIHdhc2hvdXQgd2l0aCBjcm9zc292ZXIgcHJlc3N1cmVcbiAqIC0gVXNlZCBhcyBiYXNpcyBmb3IgVVMgTmF2eSBkaXZpbmcgdGFibGVzXG4gKlxuICogQmFzZWQgb24gdGhlIHdvcmsgb2Y6XG4gKiAtIENhcHQuIEVkd2FyZCBELiBUaGFsbWFubiwgTUQsIFVTTiAoMTk4MClcbiAqIC0gTmF2YWwgTWVkaWNhbCBSZXNlYXJjaCBJbnN0aXR1dGUgTGluZWFyIEV4cG9uZW50aWFsIChOTVJJIExFMSBQREEpIGRhdGEgc2V0XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVlZhbDE4VGhhbG1hbm5Nb2RlbCA9IHZvaWQgMDtcbmNvbnN0IERlY29tcHJlc3Npb25Nb2RlbF8xID0gcmVxdWlyZShcIi4vRGVjb21wcmVzc2lvbk1vZGVsXCIpO1xuLyoqXG4gKiBWVmFsLTE4IFRoYWxtYW5uIERlY29tcHJlc3Npb24gTW9kZWwgSW1wbGVtZW50YXRpb25cbiAqL1xuY2xhc3MgVlZhbDE4VGhhbG1hbm5Nb2RlbCBleHRlbmRzIERlY29tcHJlc3Npb25Nb2RlbF8xLkRlY29tcHJlc3Npb25Nb2RlbCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZ2YWwxOENvbXBhcnRtZW50cyA9IFtdO1xuICAgICAgICAvLyBWVmFsLTE4IHRocmVlIGNvbXBhcnRtZW50IGhhbGYtdGltZXMgKG1pbnV0ZXMpXG4gICAgICAgIC8vIEJhc2VkIG9uIE5NUkkgTEUxIFBEQSBkYXRhIHNldFxuICAgICAgICB0aGlzLkNPTVBBUlRNRU5UX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICAxLjUsIC8vIEZhc3QgY29tcGFydG1lbnRcbiAgICAgICAgICAgIDUxLjAsIC8vIEludGVybWVkaWF0ZSBjb21wYXJ0bWVudCAodXNlcyBsaW5lYXIga2luZXRpY3MpXG4gICAgICAgICAgICA0ODguMCAvLyBTbG93IGNvbXBhcnRtZW50XG4gICAgICAgIF07XG4gICAgICAgIC8vIEhlbGl1bSBoYWxmLXRpbWVzIChmYXN0ZXIgZGlmZnVzaW9uLCB+Mi42NXggZmFzdGVyIHRoYW4gbml0cm9nZW4pXG4gICAgICAgIHRoaXMuSEVMSVVNX0hBTEZfVElNRVMgPSBbXG4gICAgICAgICAgICAwLjU3LCAvLyBGYXN0IGNvbXBhcnRtZW50IGZvciBoZWxpdW1cbiAgICAgICAgICAgIDE5LjIsIC8vIEludGVybWVkaWF0ZSBjb21wYXJ0bWVudCBmb3IgaGVsaXVtXG4gICAgICAgICAgICAxODQuMiAvLyBTbG93IGNvbXBhcnRtZW50IGZvciBoZWxpdW1cbiAgICAgICAgXTtcbiAgICAgICAgLy8gTS12YWx1ZXMgZm9yIGVhY2ggY29tcGFydG1lbnQgKHByZXNzdXJlIGdyYWRpZW50cyBpbiBiYXIpXG4gICAgICAgIHRoaXMuTV9WQUxVRVMgPSBbXG4gICAgICAgICAgICAxLjYsIC8vIEZhc3QgY29tcGFydG1lbnRcbiAgICAgICAgICAgIDEuMCwgLy8gSW50ZXJtZWRpYXRlIGNvbXBhcnRtZW50XG4gICAgICAgICAgICAwLjY1IC8vIFNsb3cgY29tcGFydG1lbnRcbiAgICAgICAgXTtcbiAgICAgICAgLy8gQ3Jvc3NvdmVyIHByZXNzdXJlcyBmb3IgbGluZWFyIGtpbmV0aWNzIChiYXIgYWJvdmUgYW1iaWVudClcbiAgICAgICAgdGhpcy5DUk9TU09WRVJfUFJFU1NVUkVTID0gW1xuICAgICAgICAgICAgMC40LCAvLyBGYXN0IGNvbXBhcnRtZW50XG4gICAgICAgICAgICAwLjIsIC8vIEludGVybWVkaWF0ZSBjb21wYXJ0bWVudCAocHJpbWFyeSBsaW5lYXIga2luZXRpY3MpXG4gICAgICAgICAgICAwLjEgLy8gU2xvdyBjb21wYXJ0bWVudFxuICAgICAgICBdO1xuICAgICAgICAvLyBMaW5lYXIgc2xvcGUgZmFjdG9ycyBmb3Igd2FzaG91dCBwaGFzZVxuICAgICAgICB0aGlzLkxJTkVBUl9TTE9QRVMgPSBbXG4gICAgICAgICAgICAwLjUsIC8vIEZhc3QgY29tcGFydG1lbnRcbiAgICAgICAgICAgIDAuMywgLy8gSW50ZXJtZWRpYXRlIGNvbXBhcnRtZW50IChwcmltYXJ5IGxpbmVhciBraW5ldGljcylcbiAgICAgICAgICAgIDAuNyAvLyBTbG93IGNvbXBhcnRtZW50XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgIG1heERjc1Jpc2s6IDMuNSwgLy8gMy41JSBtYXggRENTIHJpc2sgYXMgcGVyIE5hdnkgdGVzdGluZ1xuICAgICAgICAgICAgc2FmZXR5RmFjdG9yOiAxLjAsIC8vIFNhZmV0eSBmYWN0b3IgKDEuMCA9IG5vIGFkZGl0aW9uYWwgc2FmZXR5KVxuICAgICAgICAgICAgZ3JhZGllbnRGYWN0b3JMb3c6IDAuMzAsIC8vIENvbnNlcnZhdGl2ZSBncmFkaWVudCBmYWN0b3IgYXQgZGVwdGhcbiAgICAgICAgICAgIGdyYWRpZW50RmFjdG9ySGlnaDogMC44NSwgLy8gQ29uc2VydmF0aXZlIGdyYWRpZW50IGZhY3RvciBhdCBzdXJmYWNlXG4gICAgICAgICAgICAuLi5wYXJhbWV0ZXJzXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlLWluaXRpYWxpemUgY29tcGFydG1lbnRzIG5vdyB0aGF0IGFsbCBwcm9wZXJ0aWVzIGFyZSBzZXRcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVGlzc3VlQ29tcGFydG1lbnRzKCk7XG4gICAgfVxuICAgIGluaXRpYWxpemVUaXNzdWVDb21wYXJ0bWVudHMoKSB7XG4gICAgICAgIHRoaXMudGlzc3VlQ29tcGFydG1lbnRzID0gW107XG4gICAgICAgIHRoaXMudnZhbDE4Q29tcGFydG1lbnRzID0gW107XG4gICAgICAgIC8vIEVuc3VyZSBhcnJheXMgYXJlIHByb3Blcmx5IGRlZmluZWRcbiAgICAgICAgaWYgKCF0aGlzLkNPTVBBUlRNRU5UX0hBTEZfVElNRVMgfHwgIXRoaXMuSEVMSVVNX0hBTEZfVElNRVMgfHxcbiAgICAgICAgICAgICF0aGlzLkNST1NTT1ZFUl9QUkVTU1VSRVMgfHwgIXRoaXMuTV9WQUxVRVMgfHwgIXRoaXMuTElORUFSX1NMT1BFUykge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIGluaXRpYWxpemF0aW9uIGlmIGFycmF5cyBhcmUgbm90IHJlYWR5XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5pdHJvZ2VuSGFsZlRpbWUgPSB0aGlzLkNPTVBBUlRNRU5UX0hBTEZfVElNRVNbaV07XG4gICAgICAgICAgICBjb25zdCBoZWxpdW1IYWxmVGltZSA9IHRoaXMuSEVMSVVNX0hBTEZfVElNRVNbaV07XG4gICAgICAgICAgICBjb25zdCBjcm9zc292ZXJQcmVzc3VyZSA9IHRoaXMuQ1JPU1NPVkVSX1BSRVNTVVJFU1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG1WYWx1ZSA9IHRoaXMuTV9WQUxVRVNbaV07XG4gICAgICAgICAgICBjb25zdCBsaW5lYXJTbG9wZSA9IHRoaXMuTElORUFSX1NMT1BFU1tpXTtcbiAgICAgICAgICAgIGlmIChuaXRyb2dlbkhhbGZUaW1lID09PSB1bmRlZmluZWQgfHwgaGVsaXVtSGFsZlRpbWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGNyb3Nzb3ZlclByZXNzdXJlID09PSB1bmRlZmluZWQgfHwgbVZhbHVlID09PSB1bmRlZmluZWQgfHwgbGluZWFyU2xvcGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIGlmIHZhbHVlcyBhcmUgdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBiYXNlQ29tcGFydG1lbnQgPSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBpICsgMSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkhhbGZUaW1lOiBuaXRyb2dlbkhhbGZUaW1lLFxuICAgICAgICAgICAgICAgIGhlbGl1bUhhbGZUaW1lOiBoZWxpdW1IYWxmVGltZSxcbiAgICAgICAgICAgICAgICBuaXRyb2dlbkxvYWRpbmc6IDAuNzkgKiB0aGlzLnN1cmZhY2VQcmVzc3VyZSwgLy8gU3VyZmFjZSBlcXVpbGlicml1bVxuICAgICAgICAgICAgICAgIGhlbGl1bUxvYWRpbmc6IDAuMCxcbiAgICAgICAgICAgICAgICBnZXQgdG90YWxMb2FkaW5nKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uaXRyb2dlbkxvYWRpbmcgKyB0aGlzLmhlbGl1bUxvYWRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHZ2YWwxOENvbXBhcnRtZW50ID0ge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VDb21wYXJ0bWVudCxcbiAgICAgICAgICAgICAgICBjcm9zc292ZXJQcmVzc3VyZTogY3Jvc3NvdmVyUHJlc3N1cmUsXG4gICAgICAgICAgICAgICAgbVZhbHVlOiBtVmFsdWUsXG4gICAgICAgICAgICAgICAgbGluZWFyU2xvcGU6IGxpbmVhclNsb3BlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50aXNzdWVDb21wYXJ0bWVudHMucHVzaChiYXNlQ29tcGFydG1lbnQpO1xuICAgICAgICAgICAgdGhpcy52dmFsMThDb21wYXJ0bWVudHMucHVzaCh2dmFsMThDb21wYXJ0bWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVGlzc3VlTG9hZGluZ3ModGltZVN0ZXApIHtcbiAgICAgICAgY29uc3Qgbml0cm9nZW5QUCA9IHRoaXMuY2FsY3VsYXRlUGFydGlhbFByZXNzdXJlKHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXgubml0cm9nZW4pO1xuICAgICAgICBjb25zdCBoZWxpdW1QUCA9IHRoaXMuY2FsY3VsYXRlUGFydGlhbFByZXNzdXJlKHRoaXMuY3VycmVudERpdmVTdGF0ZS5nYXNNaXguaGVsaXVtKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY29tcGFydG1lbnQgPSB0aGlzLnRpc3N1ZUNvbXBhcnRtZW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHZ2YWwxOENvbXBhcnRtZW50ID0gdGhpcy52dmFsMThDb21wYXJ0bWVudHNbaV07XG4gICAgICAgICAgICAvLyBVcGRhdGUgbml0cm9nZW4gbG9hZGluZyB1c2luZyBsaW5lYXItZXhwb25lbnRpYWwgbW9kZWxcbiAgICAgICAgICAgIGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZyA9IHRoaXMuY2FsY3VsYXRlTGluZWFyRXhwb25lbnRpYWxMb2FkaW5nKGNvbXBhcnRtZW50Lm5pdHJvZ2VuTG9hZGluZywgbml0cm9nZW5QUCwgY29tcGFydG1lbnQubml0cm9nZW5IYWxmVGltZSwgdnZhbDE4Q29tcGFydG1lbnQuY3Jvc3NvdmVyUHJlc3N1cmUsIHZ2YWwxOENvbXBhcnRtZW50LmxpbmVhclNsb3BlLCB0aW1lU3RlcCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaGVsaXVtIGxvYWRpbmcgdXNpbmcgbGluZWFyLWV4cG9uZW50aWFsIG1vZGVsXG4gICAgICAgICAgICBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nID0gdGhpcy5jYWxjdWxhdGVMaW5lYXJFeHBvbmVudGlhbExvYWRpbmcoY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZywgaGVsaXVtUFAsIGNvbXBhcnRtZW50LmhlbGl1bUhhbGZUaW1lLCB2dmFsMThDb21wYXJ0bWVudC5jcm9zc292ZXJQcmVzc3VyZSwgdnZhbDE4Q29tcGFydG1lbnQubGluZWFyU2xvcGUsIHRpbWVTdGVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVDZWlsaW5nKCkge1xuICAgICAgICBsZXQgbWF4Q2VpbGluZyA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgdnZhbDE4Q29tcGFydG1lbnQgb2YgdGhpcy52dmFsMThDb21wYXJ0bWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlaWxpbmcgPSB0aGlzLmNhbGN1bGF0ZUNvbXBhcnRtZW50Q2VpbGluZyh2dmFsMThDb21wYXJ0bWVudCk7XG4gICAgICAgICAgICBtYXhDZWlsaW5nID0gTWF0aC5tYXgobWF4Q2VpbGluZywgY2VpbGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIG1heENlaWxpbmcpO1xuICAgIH1cbiAgICBjYWxjdWxhdGVEZWNvbXByZXNzaW9uU3RvcHMoKSB7XG4gICAgICAgIGNvbnN0IHN0b3BzID0gW107XG4gICAgICAgIGNvbnN0IGNlaWxpbmcgPSB0aGlzLmNhbGN1bGF0ZUNlaWxpbmcoKTtcbiAgICAgICAgaWYgKGNlaWxpbmcgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0b3BzOyAvLyBObyBkZWNvbXByZXNzaW9uIHJlcXVpcmVkXG4gICAgICAgIH1cbiAgICAgICAgLy8gR2VuZXJhdGUgc3RvcHMgYXQgM20gaW50ZXJ2YWxzIHN0YXJ0aW5nIGZyb20gY2VpbGluZ1xuICAgICAgICBsZXQgY3VycmVudERlcHRoID0gTWF0aC5jZWlsKGNlaWxpbmcgLyAzKSAqIDM7XG4gICAgICAgIHdoaWxlIChjdXJyZW50RGVwdGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzdG9wVGltZSA9IHRoaXMuY2FsY3VsYXRlU3RvcFRpbWUoY3VycmVudERlcHRoKTtcbiAgICAgICAgICAgIGlmIChzdG9wVGltZSA+IDApIHtcbiAgICAgICAgICAgICAgICBzdG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGg6IGN1cnJlbnREZXB0aCxcbiAgICAgICAgICAgICAgICAgICAgdGltZTogc3RvcFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIGdhc01peDogdGhpcy5jdXJyZW50RGl2ZVN0YXRlLmdhc01peFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudERlcHRoIC09IDM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0b3BzO1xuICAgIH1cbiAgICBjYW5Bc2NlbmREaXJlY3RseSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlQ2VpbGluZygpIDw9IDA7XG4gICAgfVxuICAgIGdldE1vZGVsTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIGBWVmFsLTE4IFRoYWxtYW5uIChSaXNrOiAke3RoaXMucGFyYW1ldGVycy5tYXhEY3NSaXNrfSUpYDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRpc3N1ZSBsb2FkaW5nIHVzaW5nIHRoZSBWVmFsLTE4IGxpbmVhci1leHBvbmVudGlhbCBtb2RlbFxuICAgICAqXG4gICAgICogQHBhcmFtIGluaXRpYWxMb2FkaW5nIEluaXRpYWwgdGlzc3VlIGxvYWRpbmcgaW4gYmFyXG4gICAgICogQHBhcmFtIHBhcnRpYWxQcmVzc3VyZSBQYXJ0aWFsIHByZXNzdXJlIG9mIGluc3BpcmVkIGdhcyBpbiBiYXJcbiAgICAgKiBAcGFyYW0gaGFsZlRpbWUgSGFsZi10aW1lIGluIG1pbnV0ZXNcbiAgICAgKiBAcGFyYW0gY3Jvc3NvdmVyUHJlc3N1cmUgQ3Jvc3NvdmVyIHByZXNzdXJlIGZvciBsaW5lYXIga2luZXRpY3MgaW4gYmFyXG4gICAgICogQHBhcmFtIGxpbmVhclNsb3BlIExpbmVhciBzbG9wZSBmYWN0b3IgZm9yIHdhc2hvdXRcbiAgICAgKiBAcGFyYW0gdGltZVN0ZXAgVGltZSBzdGVwIGluIG1pbnV0ZXNcbiAgICAgKiBAcmV0dXJucyBOZXcgdGlzc3VlIGxvYWRpbmcgaW4gYmFyXG4gICAgICovXG4gICAgY2FsY3VsYXRlTGluZWFyRXhwb25lbnRpYWxMb2FkaW5nKGluaXRpYWxMb2FkaW5nLCBwYXJ0aWFsUHJlc3N1cmUsIGhhbGZUaW1lLCBjcm9zc292ZXJQcmVzc3VyZSwgbGluZWFyU2xvcGUsIHRpbWVTdGVwKSB7XG4gICAgICAgIGNvbnN0IGFtYmllbnRQcmVzc3VyZSA9IHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmU7XG4gICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9IGluaXRpYWxMb2FkaW5nIC0gYW1iaWVudFByZXNzdXJlO1xuICAgICAgICAvLyBHYXMgdXB0YWtlOiBhbHdheXMgZXhwb25lbnRpYWwgKEhhbGRhbmUgbW9kZWwpXG4gICAgICAgIGlmIChwYXJ0aWFsUHJlc3N1cmUgPj0gaW5pdGlhbExvYWRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGluaXRpYWxMb2FkaW5nLCBwYXJ0aWFsUHJlc3N1cmUsIGhhbGZUaW1lLCB0aW1lU3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2FzIHdhc2hvdXQ6IGxpbmVhci1leHBvbmVudGlhbCBtb2RlbFxuICAgICAgICAvLyBJZiBzdXBlcnNhdHVyYXRpb24gZXhjZWVkcyBjcm9zc292ZXIgcHJlc3N1cmUsIHVzZSBsaW5lYXIga2luZXRpY3NcbiAgICAgICAgaWYgKHN1cGVyc2F0dXJhdGlvbiA+IGNyb3Nzb3ZlclByZXNzdXJlKSB7XG4gICAgICAgICAgICAvLyBMaW5lYXIgd2FzaG91dCBwaGFzZVxuICAgICAgICAgICAgY29uc3QgbGluZWFyUmF0ZSA9IGxpbmVhclNsb3BlICogKHN1cGVyc2F0dXJhdGlvbiAtIGNyb3Nzb3ZlclByZXNzdXJlKSAvIGhhbGZUaW1lO1xuICAgICAgICAgICAgY29uc3QgbmV3TG9hZGluZyA9IGluaXRpYWxMb2FkaW5nIC0gKGxpbmVhclJhdGUgKiB0aW1lU3RlcCk7XG4gICAgICAgICAgICAvLyBFbnN1cmUgd2UgZG9uJ3QgZ28gYmVsb3cgdGhlIGNyb3Nzb3ZlciBwb2ludFxuICAgICAgICAgICAgY29uc3QgY3Jvc3NvdmVyTG9hZGluZyA9IGFtYmllbnRQcmVzc3VyZSArIGNyb3Nzb3ZlclByZXNzdXJlO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KG5ld0xvYWRpbmcsIGNyb3Nzb3ZlckxvYWRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhwb25lbnRpYWwgd2FzaG91dCBwaGFzZSAoc3RhbmRhcmQgSGFsZGFuZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUhhbGRhbmVMb2FkaW5nKGluaXRpYWxMb2FkaW5nLCBwYXJ0aWFsUHJlc3N1cmUsIGhhbGZUaW1lLCB0aW1lU3RlcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBkZWNvbXByZXNzaW9uIGNlaWxpbmcgZm9yIGEgc3BlY2lmaWMgY29tcGFydG1lbnRcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVDb21wYXJ0bWVudENlaWxpbmcoY29tcGFydG1lbnQpIHtcbiAgICAgICAgY29uc3QgdG90YWxMb2FkaW5nID0gY29tcGFydG1lbnQubml0cm9nZW5Mb2FkaW5nICsgY29tcGFydG1lbnQuaGVsaXVtTG9hZGluZztcbiAgICAgICAgLy8gQXBwbHkgZ3JhZGllbnQgZmFjdG9ycyBmb3IgY29uc2VydmF0aXZlIGRlY29tcHJlc3Npb25cbiAgICAgICAgY29uc3QgZ3JhZGllbnRGYWN0b3IgPSB0aGlzLmludGVycG9sYXRlR3JhZGllbnRGYWN0b3IoKTtcbiAgICAgICAgY29uc3QgYWxsb3dhYmxlR3JhZGllbnQgPSBjb21wYXJ0bWVudC5tVmFsdWUgKiBncmFkaWVudEZhY3RvciAqIHRoaXMucGFyYW1ldGVycy5zYWZldHlGYWN0b3I7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBjZWlsaW5nIHByZXNzdXJlXG4gICAgICAgIGNvbnN0IGNlaWxpbmdQcmVzc3VyZSA9IHRvdGFsTG9hZGluZyAtIGFsbG93YWJsZUdyYWRpZW50O1xuICAgICAgICBjb25zdCBjZWlsaW5nRGVwdGggPSAoY2VpbGluZ1ByZXNzdXJlIC0gdGhpcy5zdXJmYWNlUHJlc3N1cmUpIC8gMC4xO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgY2VpbGluZ0RlcHRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJwb2xhdGUgZ3JhZGllbnQgZmFjdG9yIGJhc2VkIG9uIGN1cnJlbnQgZGVwdGhcbiAgICAgKi9cbiAgICBpbnRlcnBvbGF0ZUdyYWRpZW50RmFjdG9yKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50RGVwdGggPSB0aGlzLmN1cnJlbnREaXZlU3RhdGUuZGVwdGg7XG4gICAgICAgIC8vIEZvciBzaW1wbGljaXR5LCB1c2UgZ3JhZGllbnQgZmFjdG9yIGhpZ2ggKHN1cmZhY2UgdmFsdWUpXG4gICAgICAgIC8vIEluIGEgZnVsbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBpbnRlcnBvbGF0ZSBiZXR3ZWVuIEdGIExvdyBhbmQgR0YgSGlnaFxuICAgICAgICAvLyBiYXNlZCBvbiB0aGUgY3VycmVudCBkZXB0aCByZWxhdGl2ZSB0byB0aGUgZmlyc3QgZGVjb21wcmVzc2lvbiBzdG9wXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ3JhZGllbnRGYWN0b3JIaWdoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgcmVxdWlyZWQgc3RvcCB0aW1lIGF0IGEgZ2l2ZW4gZGVwdGhcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVTdG9wVGltZShkZXB0aCkge1xuICAgICAgICAvLyBTaW1wbGlmaWVkIHN0b3AgdGltZSBjYWxjdWxhdGlvblxuICAgICAgICAvLyBJbiBwcmFjdGljZSwgdGhpcyB3b3VsZCBpbnZvbHZlIGl0ZXJhdGl2ZSBjYWxjdWxhdGlvbiB0byBkZXRlcm1pbmVcbiAgICAgICAgLy8gdGhlIHRpbWUgbmVlZGVkIGZvciBjb250cm9sbGluZyBjb21wYXJ0bWVudHMgdG8gb2ZmLWdhcyBzdWZmaWNpZW50bHlcbiAgICAgICAgY29uc3QgY2VpbGluZyA9IHRoaXMuY2FsY3VsYXRlQ2VpbGluZygpO1xuICAgICAgICBpZiAoZGVwdGggPD0gY2VpbGluZykge1xuICAgICAgICAgICAgcmV0dXJuIDA7IC8vIE5vIHN0b3AgbmVlZGVkIGF0IHRoaXMgZGVwdGhcbiAgICAgICAgfVxuICAgICAgICAvLyBCYXNpYyBzdG9wIHRpbWUgZXN0aW1hdGlvbiBiYXNlZCBvbiBWVmFsLTE4IGNoYXJhY3RlcmlzdGljc1xuICAgICAgICAvLyBUaGUgaW50ZXJtZWRpYXRlIGNvbXBhcnRtZW50ICg1MSBtaW4pIHR5cGljYWxseSBjb250cm9scyBkZWNvbXByZXNzaW9uXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsaW5nQ29tcGFydG1lbnQgPSB0aGlzLnZ2YWwxOENvbXBhcnRtZW50c1sxXTsgLy8gSW50ZXJtZWRpYXRlIGNvbXBhcnRtZW50XG4gICAgICAgIGNvbnN0IHN1cGVyc2F0dXJhdGlvbiA9IGNvbnRyb2xsaW5nQ29tcGFydG1lbnQudG90YWxMb2FkaW5nIC0gdGhpcy5jYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUoZGVwdGgpO1xuICAgICAgICAvLyBFc3RpbWF0ZSB0aW1lIGJhc2VkIG9uIGxpbmVhciB3YXNob3V0IHJhdGUgaWYgaW4gbGluZWFyIHBoYXNlXG4gICAgICAgIGlmIChzdXBlcnNhdHVyYXRpb24gPiBjb250cm9sbGluZ0NvbXBhcnRtZW50LmNyb3Nzb3ZlclByZXNzdXJlKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lYXJSYXRlID0gY29udHJvbGxpbmdDb21wYXJ0bWVudC5saW5lYXJTbG9wZSAqXG4gICAgICAgICAgICAgICAgKHN1cGVyc2F0dXJhdGlvbiAtIGNvbnRyb2xsaW5nQ29tcGFydG1lbnQuY3Jvc3NvdmVyUHJlc3N1cmUpIC9cbiAgICAgICAgICAgICAgICBjb250cm9sbGluZ0NvbXBhcnRtZW50Lm5pdHJvZ2VuSGFsZlRpbWU7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5taW4oMzAsIHN1cGVyc2F0dXJhdGlvbiAvIGxpbmVhclJhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeHBvbmVudGlhbCBwaGFzZSAtIGJhc2ljIGVzdGltYXRpb25cbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDEsIE1hdGgubWluKDE1LCBzdXBlcnNhdHVyYXRpb24gKiAxMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgVlZhbC0xOCBzcGVjaWZpYyBjb21wYXJ0bWVudCBkYXRhXG4gICAgICovXG4gICAgZ2V0VlZhbDE4Q29tcGFydG1lbnREYXRhKGNvbXBhcnRtZW50TnVtYmVyKSB7XG4gICAgICAgIGlmIChjb21wYXJ0bWVudE51bWJlciA8IDEgfHwgY29tcGFydG1lbnROdW1iZXIgPiAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZWYWwtMTggaGFzIG9ubHkgMyBjb21wYXJ0bWVudHMgKDEtMyknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi50aGlzLnZ2YWwxOENvbXBhcnRtZW50c1tjb21wYXJ0bWVudE51bWJlciAtIDFdIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgVlZhbC0xOCBjb21wYXJ0bWVudCBkYXRhXG4gICAgICovXG4gICAgZ2V0QWxsVlZhbDE4Q29tcGFydG1lbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52dmFsMThDb21wYXJ0bWVudHMubWFwKGNvbXAgPT4gKHsgLi4uY29tcCB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IGFsZ29yaXRobSBwYXJhbWV0ZXJzXG4gICAgICovXG4gICAgZ2V0UGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5wYXJhbWV0ZXJzIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGdvcml0aG0gcGFyYW1ldGVyc1xuICAgICAqL1xuICAgIHVwZGF0ZVBhcmFtZXRlcnMobmV3UGFyYW1ldGVycykge1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAuLi5uZXdQYXJhbWV0ZXJzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBEQ1MgcmlzayBhcyBhIHBlcmNlbnRhZ2UgYmFzZWQgb24gVlZhbC0xOCBtb2RlbCBwYXJhbWV0ZXJzXG4gICAgICogVXNlcyBncmFkaWVudCBmYWN0b3IgZXhjZWVkYW5jZSBhbmQgdGlzc3VlIHN1cGVyc2F0dXJhdGlvblxuICAgICAqIEByZXR1cm5zIERDUyByaXNrIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApXG4gICAgICovXG4gICAgY2FsY3VsYXRlRENTUmlzaygpIHtcbiAgICAgICAgbGV0IG1heFJpc2tGYWN0b3IgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBhcnRtZW50IG9mIHRoaXMudnZhbDE4Q29tcGFydG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0b3RhbExvYWRpbmcgPSBjb21wYXJ0bWVudC5uaXRyb2dlbkxvYWRpbmcgKyBjb21wYXJ0bWVudC5oZWxpdW1Mb2FkaW5nO1xuICAgICAgICAgICAgY29uc3QgZ3JhZGllbnRGYWN0b3IgPSB0aGlzLmludGVycG9sYXRlR3JhZGllbnRGYWN0b3IoKTtcbiAgICAgICAgICAgIGNvbnN0IGFsbG93YWJsZUdyYWRpZW50ID0gY29tcGFydG1lbnQubVZhbHVlICogZ3JhZGllbnRGYWN0b3IgKiB0aGlzLnBhcmFtZXRlcnMuc2FmZXR5RmFjdG9yO1xuICAgICAgICAgICAgY29uc3QgbWF4QWxsb3dhYmxlTG9hZGluZyA9IHRoaXMuY3VycmVudERpdmVTdGF0ZS5hbWJpZW50UHJlc3N1cmUgKyBhbGxvd2FibGVHcmFkaWVudDtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSByaXNrIGZhY3RvciBhcyBleGNlZWRhbmNlIG92ZXIgYWxsb3dhYmxlIGxvYWRpbmdcbiAgICAgICAgICAgIGlmICh0b3RhbExvYWRpbmcgPiBtYXhBbGxvd2FibGVMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhjZWVkYW5jZSA9IHRvdGFsTG9hZGluZyAtIG1heEFsbG93YWJsZUxvYWRpbmc7XG4gICAgICAgICAgICAgICAgY29uc3Qgcmlza0ZhY3RvciA9IGV4Y2VlZGFuY2UgLyBhbGxvd2FibGVHcmFkaWVudDtcbiAgICAgICAgICAgICAgICBtYXhSaXNrRmFjdG9yID0gTWF0aC5tYXgobWF4Umlza0ZhY3Rvciwgcmlza0ZhY3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29udmVydCByaXNrIGZhY3RvciB0byBwZXJjZW50YWdlLCBzY2FsaW5nIHdpdGggbWF4IERDUyByaXNrIHBhcmFtZXRlclxuICAgICAgICBjb25zdCByaXNrUGVyY2VudGFnZSA9IE1hdGgubWluKDEwMCwgbWF4Umlza0ZhY3RvciAqIHRoaXMucGFyYW1ldGVycy5tYXhEY3NSaXNrKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocmlza1BlcmNlbnRhZ2UgKiAxMCkgLyAxMDsgLy8gUm91bmQgdG8gMSBkZWNpbWFsIHBsYWNlXG4gICAgfVxufVxuZXhwb3J0cy5WVmFsMThUaGFsbWFubk1vZGVsID0gVlZhbDE4VGhhbG1hbm5Nb2RlbDtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQnJvd3NlciBlbnRyeSBwb2ludCBmb3IgRGVjb21wcmVzc2lvbiBTaW11bGF0b3JcbiAqIEV4cG9ydHMgYWxsIG1vZGVscyBhbmQgdXRpbGl0aWVzIHRvIHRoZSBnbG9iYWwgd2luZG93LkRlY29tcHJlc3Npb25TaW11bGF0b3IgbmFtZXNwYWNlXG4gKiBUaGlzIHJlcGxhY2VzIHRoZSBtYW51YWwgYnVuZGxlLmpzIGZpbGUgd2l0aCBhIHByb3Blcmx5IGNvbXBpbGVkIFR5cGVTY3JpcHQgYnVpbGRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgRGVjb21wcmVzc2lvbk1vZGVsXzEgPSByZXF1aXJlKFwiLi9tb2RlbHMvRGVjb21wcmVzc2lvbk1vZGVsXCIpO1xuY29uc3QgQnVobG1hbm5Nb2RlbF8xID0gcmVxdWlyZShcIi4vbW9kZWxzL0J1aGxtYW5uTW9kZWxcIik7XG5jb25zdCBWcG1CTW9kZWxfMSA9IHJlcXVpcmUoXCIuL21vZGVscy9WcG1CTW9kZWxcIik7XG5jb25zdCBCdm1Nb2RlbF8xID0gcmVxdWlyZShcIi4vbW9kZWxzL0J2bU1vZGVsXCIpO1xuY29uc3QgVlZhbDE4VGhhbG1hbm5Nb2RlbF8xID0gcmVxdWlyZShcIi4vbW9kZWxzL1ZWYWwxOFRoYWxtYW5uTW9kZWxcIik7XG5jb25zdCBSZ2JtRm9sZGVkTW9kZWxfMSA9IHJlcXVpcmUoXCIuL21vZGVscy9SZ2JtRm9sZGVkTW9kZWxcIik7XG5jb25zdCBUYmRtTW9kZWxfMSA9IHJlcXVpcmUoXCIuL21vZGVscy9UYmRtTW9kZWxcIik7XG5jb25zdCBObXJpOThNb2RlbF8xID0gcmVxdWlyZShcIi4vbW9kZWxzL05tcmk5OE1vZGVsXCIpO1xuLy8gSW5pdGlhbGl6ZSBnbG9iYWwgbmFtZXNwYWNlXG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvciA9IHt9O1xuLy8gRXhwb3J0IGFsbCBtb2RlbCBjbGFzc2VzXG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5EZWNvbXByZXNzaW9uTW9kZWwgPSBEZWNvbXByZXNzaW9uTW9kZWxfMS5EZWNvbXByZXNzaW9uTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5CdWhsbWFubk1vZGVsID0gQnVobG1hbm5Nb2RlbF8xLkJ1aGxtYW5uTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5WcG1CTW9kZWwgPSBWcG1CTW9kZWxfMS5WcG1CTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5Cdm1Nb2RlbCA9IEJ2bU1vZGVsXzEuQnZtTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5WVmFsMThUaGFsbWFubk1vZGVsID0gVlZhbDE4VGhhbG1hbm5Nb2RlbF8xLlZWYWwxOFRoYWxtYW5uTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5SZ2JtRm9sZGVkTW9kZWwgPSBSZ2JtRm9sZGVkTW9kZWxfMS5SZ2JtRm9sZGVkTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5UYmRtTW9kZWwgPSBUYmRtTW9kZWxfMS5UYmRtTW9kZWw7XG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5ObXJpOThNb2RlbCA9IE5tcmk5OE1vZGVsXzEuTm1yaTk4TW9kZWw7XG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIG1vZGVscyAobWFpbnRhaW5zIGNvbXBhdGliaWxpdHkgd2l0aCBleGlzdGluZyBzaW11bGF0aW9uLmpzKVxud2luZG93LkRlY29tcHJlc3Npb25TaW11bGF0b3IuY3JlYXRlTW9kZWwgPSBmdW5jdGlvbiAodHlwZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSAnYnVobG1hbm4nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWhsbWFubk1vZGVsXzEuQnVobG1hbm5Nb2RlbCh7XG4gICAgICAgICAgICAgICAgbG93OiBvcHRpb25zLmdyYWRpZW50RmFjdG9yTG93IHx8IDMwLFxuICAgICAgICAgICAgICAgIGhpZ2g6IG9wdGlvbnMuZ3JhZGllbnRGYWN0b3JIaWdoIHx8IDg1XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY2FzZSAndnBtYic6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZwbUJNb2RlbF8xLlZwbUJNb2RlbChvcHRpb25zLmNvbnNlcnZhdGlzbSB8fCAyKTtcbiAgICAgICAgY2FzZSAnYnZtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnZtTW9kZWxfMS5Cdm1Nb2RlbCh7XG4gICAgICAgICAgICAgICAgY29uc2VydmF0aXNtOiBvcHRpb25zLmNvbnNlcnZhdGlzbSB8fCAyLFxuICAgICAgICAgICAgICAgIG1heERjc1Jpc2s6IG9wdGlvbnMubWF4RGNzUmlzayB8fCA1LjBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICd2dmFsMTgnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWVmFsMThUaGFsbWFubk1vZGVsXzEuVlZhbDE4VGhhbG1hbm5Nb2RlbCh7XG4gICAgICAgICAgICAgICAgbWF4RGNzUmlzazogb3B0aW9ucy5kY3NSaXNrUGVyY2VudCB8fCAyLjMsXG4gICAgICAgICAgICAgICAgZ3JhZGllbnRGYWN0b3JMb3c6IG9wdGlvbnMuZ3JhZGllbnRGYWN0b3JMb3cgfHwgMC4zMCxcbiAgICAgICAgICAgICAgICBncmFkaWVudEZhY3RvckhpZ2g6IG9wdGlvbnMuZ3JhZGllbnRGYWN0b3JIaWdoIHx8IDAuODVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICdyZ2JtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmdibUZvbGRlZE1vZGVsXzEuUmdibUZvbGRlZE1vZGVsKHtcbiAgICAgICAgICAgICAgICBjb25zZXJ2YXRpc206IG9wdGlvbnMuY29uc2VydmF0aXNtIHx8IDJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICd0YmRtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGJkbU1vZGVsXzEuVGJkbU1vZGVsKHtcbiAgICAgICAgICAgICAgICBjb25zZXJ2YXRpc21GYWN0b3I6IG9wdGlvbnMuY29uc2VydmF0aXNtRmFjdG9yIHx8IDEuMCxcbiAgICAgICAgICAgICAgICBib2R5VGVtcGVyYXR1cmU6IG9wdGlvbnMuYm9keVRlbXBlcmF0dXJlIHx8IDM3LjBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICdubXJpOTgnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBObXJpOThNb2RlbF8xLk5tcmk5OE1vZGVsKHtcbiAgICAgICAgICAgICAgICBjb25zZXJ2YXRpc206IG9wdGlvbnMuY29uc2VydmF0aXNtIHx8IDMsXG4gICAgICAgICAgICAgICAgbWF4RGNzUmlzazogb3B0aW9ucy5tYXhEY3NSaXNrIHx8IDIuMCxcbiAgICAgICAgICAgICAgICBzYWZldHlGYWN0b3I6IG9wdGlvbnMuc2FmZXR5RmFjdG9yIHx8IDEuMixcbiAgICAgICAgICAgICAgICBlbmFibGVPeHlnZW5UcmFja2luZzogb3B0aW9ucy5lbmFibGVPeHlnZW5UcmFja2luZyAhPT0gZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1vZGVsIHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG59O1xuLy8gVXRpbGl0eSBmdW5jdGlvbnMgZm9yIHRoZSBVSSAobWFpbnRhaW5zIGNvbXBhdGliaWxpdHkpXG53aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvci5jcmVhdGVHYXNNaXggPSBmdW5jdGlvbiAob3h5Z2VuLCBoZWxpdW0pIHtcbiAgICBjb25zdCBvMiA9IG94eWdlbiAvIDEwMDtcbiAgICBjb25zdCBoZSA9IGhlbGl1bSAvIDEwMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBveHlnZW46IG8yLFxuICAgICAgICBoZWxpdW06IGhlLFxuICAgICAgICBuaXRyb2dlbjogMSAtIG8yIC0gaGVcbiAgICB9O1xufTtcbndpbmRvdy5EZWNvbXByZXNzaW9uU2ltdWxhdG9yLmRlcHRoVG9QcmVzc3VyZSA9IGZ1bmN0aW9uIChkZXB0aCkge1xuICAgIHJldHVybiAxLjAxMyArIChkZXB0aCAvIDEwLjApOyAvLyAxIGJhciBzdXJmYWNlICsgMSBiYXIgcGVyIDEwbVxufTtcbndpbmRvdy5EZWNvbXByZXNzaW9uU2ltdWxhdG9yLmZvcm1hdFRpbWUgPSBmdW5jdGlvbiAobWludXRlcykge1xuICAgIGNvbnN0IGhycyA9IE1hdGguZmxvb3IobWludXRlcyAvIDYwKTtcbiAgICBjb25zdCBtaW5zID0gTWF0aC5yb3VuZChtaW51dGVzICUgNjApO1xuICAgIHJldHVybiBocnMgPiAwID8gaHJzICsgJzonICsgbWlucy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgOiBtaW5zICsgJyBtaW4nO1xufTtcbndpbmRvdy5EZWNvbXByZXNzaW9uU2ltdWxhdG9yLmZvcm1hdFRpbWVISE1NID0gZnVuY3Rpb24gKG1pbnV0ZXMpIHtcbiAgICBjb25zdCBocnMgPSBNYXRoLmZsb29yKG1pbnV0ZXMgLyA2MCk7XG4gICAgY29uc3QgbWlucyA9IE1hdGgucm91bmQobWludXRlcyAlIDYwKTtcbiAgICByZXR1cm4gaHJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArICc6JyArIG1pbnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xufTtcbi8vIExvZyB0aGF0IHRoZSBtb2R1bGUgaGFzIGxvYWRlZCBzdWNjZXNzZnVsbHlcbmNvbnNvbGUubG9nKCfwn6S/IERlY29tcHJlc3Npb24gU2ltdWxhdG9yIGxvYWRlZCBzdWNjZXNzZnVsbHkgZnJvbSBUeXBlU2NyaXB0IGJ1aWxkJyk7XG5jb25zb2xlLmxvZygnQXZhaWxhYmxlIG1vZGVsczonLCBPYmplY3Qua2V5cyh3aW5kb3cuRGVjb21wcmVzc2lvblNpbXVsYXRvcikuZmlsdGVyKGtleSA9PiBrZXkuZW5kc1dpdGgoJ01vZGVsJykpKTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkJ2bU1vZGVsIiwiRGVjb21wcmVzc2lvbk1vZGVsXzEiLCJEZWNvbXByZXNzaW9uTW9kZWwiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJzdXBlciIsInRoaXMiLCJXQVRFUl9WQVBPUl9QUkVTU1VSRSIsIlBSRVNTVVJFX09USEVSX0dBU0VTIiwiTklUUk9HRU5fSEFMRl9USU1FUyIsIkhFTElVTV9IQUxGX1RJTUVTIiwiRElGRlVTSU9OX01PRElGSUVSUyIsIk1FQ0hBTklDQUxfUkVTSVNUQU5DRSIsIlJJU0tfV0VJR0hUSU5HUyIsImNvbnNlcnZhdGlzbUxldmVsIiwiTWF0aCIsIm1heCIsIm1pbiIsIm1heERjc1Jpc2siLCJjb25zZXJ2YXRpc20iLCJidWJibGVWb2x1bWVQYXJhbWV0ZXJzIiwiY3JpdGljYWxCdWJibGVWb2x1bWUiLCJmb3JtYXRpb25SYXRlQ29uc3RhbnQiLCJyZXNvbHV0aW9uUmF0ZUNvbnN0YW50Iiwic3VyZmFjZVRlbnNpb25GYWN0b3IiLCJ0ZW1wZXJhdHVyZUZhY3RvciIsImluaXRpYWxpemVUaXNzdWVDb21wYXJ0bWVudHMiLCJ0aXNzdWVDb21wYXJ0bWVudHMiLCJidm1Db21wYXJ0bWVudHMiLCJpIiwibml0cm9nZW5IYWxmVGltZSIsImhlbGl1bUhhbGZUaW1lIiwiZGlmZnVzaW9uTW9kaWZpZXIiLCJtZWNoYW5pY2FsUmVzaXN0YW5jZSIsInJpc2tXZWlnaHRpbmciLCJ1bmRlZmluZWQiLCJFcnJvciIsImJhc2VDb21wYXJ0bWVudCIsIm51bWJlciIsIm5pdHJvZ2VuTG9hZGluZyIsInN1cmZhY2VQcmVzc3VyZSIsImhlbGl1bUxvYWRpbmciLCJ0b3RhbExvYWRpbmciLCJidm1Db21wYXJ0bWVudCIsImJ1YmJsZVZvbHVtZSIsImJ1YmJsZUZvcm1hdGlvblJhdGUiLCJidWJibGVSZXNvbHV0aW9uUmF0ZSIsInB1c2giLCJ1cGRhdGVUaXNzdWVMb2FkaW5ncyIsInRpbWVTdGVwIiwibml0cm9nZW5QUCIsImNhbGN1bGF0ZVBhcnRpYWxQcmVzc3VyZSIsImN1cnJlbnREaXZlU3RhdGUiLCJnYXNNaXgiLCJuaXRyb2dlbiIsImhlbGl1bVBQIiwiaGVsaXVtIiwibGVuZ3RoIiwibW9kaWZpZWROaXRyb2dlbkhhbGZUaW1lIiwiY2FsY3VsYXRlSGFsZGFuZUxvYWRpbmciLCJtb2RpZmllZEhlbGl1bUhhbGZUaW1lIiwidXBkYXRlQnViYmxlVm9sdW1lIiwiY2FsY3VsYXRlQ2VpbGluZyIsIm1heENlaWxpbmciLCJjZWlsaW5nIiwiY2FsY3VsYXRlQ29tcGFydG1lbnRDZWlsaW5nIiwiY2FsY3VsYXRlRGVjb21wcmVzc2lvblN0b3BzIiwic3RvcHMiLCJjdXJyZW50RGVwdGgiLCJjZWlsIiwic3RvcFRpbWUiLCJjYWxjdWxhdGVTdG9wVGltZSIsImRlcHRoIiwidGltZSIsImNhbkFzY2VuZERpcmVjdGx5IiwiY2FsY3VsYXRlRENTUmlzayIsImdldE1vZGVsTmFtZSIsImdldE1heERjc1Jpc2siLCJzZXRNYXhEY3NSaXNrIiwiY2FsY3VsYXRlVG90YWxEY3NSaXNrIiwid2VpZ2h0ZWRSaXNrIiwiY29tcGFydG1lbnQiLCJjYWxjdWxhdGVDb21wYXJ0bWVudFJpc2siLCJnZXRCdm1Db21wYXJ0bWVudERhdGEiLCJjb21wYXJ0bWVudE51bWJlciIsImNhbGN1bGF0ZUJ1YmJsZVZvbHVtZSIsImN1cnJlbnRQcmVzc3VyZSIsImFtYmllbnRQcmVzc3VyZSIsInN1cGVyc2F0dXJhdGlvbiIsInZvbHVtZUNoYW5nZSIsImNvbnNlcnZhdGlzbUZhY3RvciIsImNlaWxpbmdEZXB0aCIsImNhbGN1bGF0ZUFsbG93YWJsZVByZXNzdXJlRHJvcCIsInZvbHVtZVJhdGlvIiwibWF4VGltZU5lZWRlZCIsInJpc2tGYWN0b3IiLCJ0YXJnZXRCdWJibGVWb2x1bWUiLCJ0aW1lTmVlZGVkIiwiZ2V0QWNjZXB0YWJsZVJpc2tUaHJlc2hvbGQiLCJ0b3RhbFJpc2siLCJyaXNrUGVyY2VudGFnZSIsInJvdW5kIiwicmVzZXRUb1N1cmZhY2UiLCJmb3JFYWNoIiwib3h5Z2VuIiwidXBkYXRlRGl2ZVN0YXRlIiwibmV3U3RhdGUiLCJjYWxjdWxhdGVBbWJpZW50UHJlc3N1cmUiLCJnZXRUaXNzdWVDb21wYXJ0bWVudHMiLCJnZXREaXZlU3RhdGUiLCJnYXNGcmFjdGlvbiIsImluaXRpYWxMb2FkaW5nIiwicGFydGlhbFByZXNzdXJlIiwiaGFsZlRpbWUiLCJrIiwibG9nIiwiZXhwIiwiVGJkbU1vZGVsIiwicGFyYW1ldGVycyIsInRiZG1QYXJhbXMiLCJib2R5VGVtcGVyYXR1cmUiLCJhdG1vc3BoZXJpY1ByZXNzdXJlIiwidGVtcGVyYXR1cmVBZGp1c3RtZW50RmFjdG9yIiwibWV0YWJvbGljQnViYmxlUmF0ZSIsInN1cmZhY2VUZW5zaW9uUGFyYW1ldGVyIiwidGJkbUNvbXBhcnRtZW50cyIsIkJVQkJMRV9OVUNMRUFUSU9OX1RIUkVTSE9MRFMiLCJCVUJCTEVfRUxJTUlOQVRJT05fUkFURVMiLCJUSVNTVUVfUEVSRlVTSU9OX1JBVEVTIiwiQlVCQkxFX0ZPUk1BVElPTl9DT0VGRklDSUVOVFMiLCJ0YmRtUGFyYW1ldGVycyIsIm5pdHJvZ2VuVGltZXMiLCJoZWxpdW1UaW1lcyIsImJ1YmJsZU51Y2xlYXRpb25UaHJlc2hvbGRzIiwiYnViYmxlRWxpbWluYXRpb25SYXRlcyIsInRpc3N1ZVBlcmZ1c2lvblJhdGVzIiwiYnViYmxlRm9ybWF0aW9uQ29lZmZpY2llbnRzIiwibnVtQ29tcGFydG1lbnRzIiwidGJkbUNvbXBhcnRtZW50IiwiYnViYmxlTnVjbGVhdGlvblRocmVzaG9sZCIsImJ1YmJsZVZvbHVtZUZyYWN0aW9uIiwiYnViYmxlRWxpbWluYXRpb25SYXRlIiwiYnViYmxlRm9ybWF0aW9uQ29lZmZpY2llbnQiLCJtYXhCdWJibGVWb2x1bWVGcmFjdGlvbiIsInRpc3N1ZVBlcmZ1c2lvbiIsIm1ldGFib2xpY0NvZWZmaWNpZW50IiwidXBkYXRlQnViYmxlRHluYW1pY3MiLCJjYWxjdWxhdGVCdWJibGVSaXNrIiwibWF4UmlzayIsIm51Y2xlYXRpb25SaXNrIiwiYnViYmxlVm9sdW1lUmlzayIsImFkanVzdGVkUmlzayIsIm1heEJ1YmJsZVJpc2siLCJidWJibGVSaXNrIiwiZ2V0VGJkbUNvbXBhcnRtZW50RGF0YSIsInVwZGF0ZVBhcmFtZXRlcnMiLCJnZXRQYXJhbWV0ZXJzIiwiYnViYmxlRm9ybWF0aW9uIiwiZWxpbWluYXRpb25SYXRlIiwiYnViYmxlRWxpbWluYXRpb24iLCJzdXJmYWNlVGVuc2lvbkVmZmVjdCIsImFsbG93YWJsZVByZXNzdXJlIiwibWF4U3RvcFRpbWUiLCJ0YXJnZXRQcmVzc3VyZSIsIm9mZkdhc3NpbmdUaW1lIiwiYnViYmxlRWxpbWluYXRpb25UaW1lIiwiY29tYmluZWRTdG9wVGltZSIsIlZwbUJNb2RlbCIsIlNVUkZBQ0VfVEVOU0lPTl9HUkFESUVOVCIsImJ1YmJsZVBhcmFtZXRlcnMiLCJzdXJmYWNlVGVuc2lvbiIsInNraW5Db21wcmVzc2lvbkdhbW1hIiwiY3JpdGljYWxWb2x1bWVMYW1iZGEiLCJyZWdlbmVyYXRpb25UaW1lQ29uc3RhbnQiLCJ2cG1CQ29tcGFydG1lbnRzIiwidnBtQkNvbXBhcnRtZW50IiwiaW5pdGlhbENyaXRpY2FsUmFkaXVzIiwiY2FsY3VsYXRlSW5pdGlhbENyaXRpY2FsUmFkaXVzIiwiYWRqdXN0ZWRDcml0aWNhbFJhZGl1cyIsIm1heENydXNoaW5nUHJlc3N1cmUiLCJvbnNldE9mSW1wZXJtZWFiaWxpdHkiLCJjYWxjdWxhdGVCdWJibGVDb3VudCIsImV4Y2Vzc1ByZXNzdXJlIiwiY3JpdGljYWxSYWRpdXMiLCJidWJibGVSYWRpdXMiLCJjYWxjdWxhdGVCdWJibGVSYWRpdXMiLCJQSSIsInBvdyIsImJ1YmJsZUNvdW50IiwiZ2V0VnBtQkNvbXBhcnRtZW50RGF0YSIsInJhZGl1cyIsInJhZGl1c0dyb3d0aEZhY3RvciIsInNocmlua2FnZVJhdGUiLCJjYWxjdWxhdGVBbGxvd2FibGVTdXBlcnNhdHVyYXRpb24iLCJzYWZlQ3JpdGljYWxSYWRpdXMiLCJwcmVzc3VyZVJhdGlvIiwiZGVwdGhEaWZmZXJlbmNlIiwibWF4Umlza0ZhY3RvciIsImFsbG93YWJsZVN1cGVyc2F0dXJhdGlvbiIsImNvbXBhcnRtZW50UmlzayIsImxvZzEwIiwiUmdibUZvbGRlZE1vZGVsIiwic2V0dGluZ3MiLCJyZ2JtQ29tcGFydG1lbnRzIiwiZmlyc3RTdG9wRGVwdGgiLCJkaXZlQ291bnQiLCJsYXN0U3VyZmFjZVRpbWUiLCJtYXhEZXB0aFJlYWNoZWQiLCJ0b3RhbEJ1YmJsZVZvbHVtZSIsIk5JVFJPR0VOX01fVkFMVUVTX0EiLCJOSVRST0dFTl9NX1ZBTFVFU19CIiwiSEVMSVVNX01fVkFMVUVTX0EiLCJIRUxJVU1fTV9WQUxVRVNfQiIsIkJBU0VfQlVCQkxFX1NFRURfQ09VTlQiLCJCVUJCTEVfRk9STUFUSU9OX0NPRUZGSUNJRU5UIiwiTUlDUk9CVUJCTEVfU1VSVklWQUxfVElNRSIsIlJFUEVUSVRJVkVfRElWRV9USFJFU0hPTEQiLCJlbmFibGVSZXBldGl0aXZlUGVuYWx0eSIsInZhbGlkYXRlU2V0dGluZ3MiLCJyZ2JtQ29tcGFydG1lbnQiLCJuaXRyb2dlbk1WYWx1ZUEiLCJuaXRyb2dlbk1WYWx1ZUIiLCJoZWxpdW1NVmFsdWVBIiwiaGVsaXVtTVZhbHVlQiIsImNvbWJpbmVkTVZhbHVlQSIsImNvbWJpbmVkTVZhbHVlQiIsImZGYWN0b3IiLCJtYXhUZW5zaW9uIiwiYnViYmxlU2VlZENvdW50IiwidXBkYXRlQ29tYmluZWRNVmFsdWVzIiwidXBkYXRlRkZhY3RvcnMiLCJwcmV2aW91c0xvYWRpbmciLCJjdXJyZW50VGVuc2lvbiIsInVwZGF0ZVRvdGFsQnViYmxlVm9sdW1lIiwiY2FsY3VsYXRlRmlyc3RTdG9wRGVwdGgiLCJnZXRSZ2JtU2V0dGluZ3MiLCJzZXRSZ2JtU2V0dGluZ3MiLCJuZXdTZXR0aW5ncyIsImdldFJnYm1Db21wYXJ0bWVudERhdGEiLCJnZXRUb3RhbEJ1YmJsZVZvbHVtZSIsIm1vZGlmaWVkTVZhbHVlIiwicmVwZXRpdGl2ZVBlbmFsdHkiLCJjYWxjdWxhdGVSZXBldGl0aXZlRGl2ZVBlbmFsdHkiLCJ0b3RhbEluZXJ0R2FzIiwibml0cm9nZW5GcmFjdGlvbiIsImhlbGl1bUZyYWN0aW9uIiwic2VlZERlbnNpdHlSYXRpbyIsImJ1YmJsZUVmZmVjdCIsImRlcHRoRmFjdG9yIiwiY3VycmVudExvYWRpbmciLCJuZXdCdWJibGVzIiwiZGlzc29sdXRpb25SYXRlIiwiZXhjZXNzU2VlZHMiLCJhIiwiYiIsIm1vZGlmaWVkQSIsIm1heFN0b3BEZXB0aCIsInN0b3BEZXB0aCIsIm1heFN1cGVyc2F0dXJhdGlvbiIsIm1heEJ1YmJsZUxvYWQiLCJidWJibGVMb2FkIiwiYmFzZVRpbWUiLCJmbG9vciIsImJ1YmJsZUV4dGVuc2lvbiIsInBlbmFsdHkiLCJzZXRSZXBldGl0aXZlRGl2ZVBhcmFtcyIsInN1cmZhY2VUaW1lSG91cnMiLCJCdWhsbWFubk1vZGVsIiwiZ3JhZGllbnRGYWN0b3JzIiwibG93IiwiaGlnaCIsImJ1aGxtYW5uQ29tcGFydG1lbnRzIiwibml0cm9nZW5BVmFsdWVzIiwibml0cm9nZW5CVmFsdWVzIiwiaGVsaXVtQVZhbHVlcyIsImhlbGl1bUJWYWx1ZXMiLCJidWhsbWFubkNvbXBhcnRtZW50IiwiZ2V0R3JhZGllbnRGYWN0b3JzIiwic2V0R3JhZGllbnRGYWN0b3JzIiwiY2FsY3VsYXRlTVZhbHVlIiwiY2FsY3VsYXRlR3JhZGllbnRGYWN0b3JNVmFsdWUiLCJmdWxsTVZhbHVlIiwicmVzdWx0IiwiZ2V0R3JhZGllbnRGYWN0b3JBdERlcHRoIiwiZ2V0QnVobG1hbm5Db21wYXJ0bWVudERhdGEiLCJjYWxjdWxhdGVTdXBlcnNhdHVyYXRpb24iLCJtVmFsdWUiLCJkZXB0aFJhdGlvIiwibWF4U3VwZXJzYXR1cmF0aW9uUmF0aW8iLCJzdXBlcnNhdHVyYXRpb25SYXRpbyIsIk5tcmk5OE1vZGVsIiwibm1yaTk4Q29tcGFydG1lbnRzIiwiT1hZR0VOX0hBTEZfVElNRVMiLCJNX1ZBTFVFUyIsIkxJTkVBUl9TTE9QRVMiLCJDUk9TU09WRVJfUFJFU1NVUkVTIiwiT1hZR0VOX1RIUkVTSE9MRFMiLCJzYWZldHlGYWN0b3IiLCJlbmFibGVPeHlnZW5UcmFja2luZyIsIm94eWdlbkhhbGZUaW1lIiwibGluZWFyU2xvcGUiLCJjcm9zc292ZXJQcmVzc3VyZSIsIm94eWdlblRocmVzaG9sZCIsIm5tcmk5OENvbXBhcnRtZW50Iiwib3h5Z2VuTG9hZGluZyIsIm94eWdlblBQIiwiY2FsY3VsYXRlTGluZWFyRXhwb25lbnRpYWxMb2FkaW5nIiwibmV3TG9hZGluZyIsImNyb3Nzb3ZlckxvYWRpbmciLCJtYXhBbGxvd2FibGVBdERlcHRoIiwiZXhjZXNzTG9hZGluZyIsImVzdGltYXRlZFRpbWUiLCJleHBvbmVudGlhbFRpbWUiLCJveHlnZW5SaXNrRmFjdG9yIiwiYWxsb3dhYmxlTG9hZGluZyIsIm1heEFsbG93YWJsZUxvYWRpbmciLCJveHlnZW5SaXNrIiwiY29tYmluZWRSaXNrRmFjdG9yIiwiZ2V0Tm1yaTk4Q29tcGFydG1lbnREYXRhIiwiZ2V0QWxsTm1yaTk4Q29tcGFydG1lbnRzIiwibWFwIiwiY29tcCIsIm5ld1BhcmFtZXRlcnMiLCJnZXRNb2RlbFN0YXR1cyIsImNvbXBhcnRtZW50cyIsImRjc1Jpc2siLCJjYW5Bc2NlbmQiLCJWVmFsMThUaGFsbWFubk1vZGVsIiwidnZhbDE4Q29tcGFydG1lbnRzIiwiQ09NUEFSVE1FTlRfSEFMRl9USU1FUyIsImdyYWRpZW50RmFjdG9yTG93IiwiZ3JhZGllbnRGYWN0b3JIaWdoIiwidnZhbDE4Q29tcGFydG1lbnQiLCJncmFkaWVudEZhY3RvciIsImludGVycG9sYXRlR3JhZGllbnRGYWN0b3IiLCJjb250cm9sbGluZ0NvbXBhcnRtZW50IiwibGluZWFyUmF0ZSIsImdldFZWYWwxOENvbXBhcnRtZW50RGF0YSIsImdldEFsbFZWYWwxOENvbXBhcnRtZW50cyIsImFsbG93YWJsZUdyYWRpZW50IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIkJ1aGxtYW5uTW9kZWxfMSIsIlZwbUJNb2RlbF8xIiwiQnZtTW9kZWxfMSIsIlZWYWwxOFRoYWxtYW5uTW9kZWxfMSIsIlJnYm1Gb2xkZWRNb2RlbF8xIiwiVGJkbU1vZGVsXzEiLCJObXJpOThNb2RlbF8xIiwid2luZG93IiwiRGVjb21wcmVzc2lvblNpbXVsYXRvciIsImNyZWF0ZU1vZGVsIiwidHlwZSIsInRvTG93ZXJDYXNlIiwiZGNzUmlza1BlcmNlbnQiLCJjcmVhdGVHYXNNaXgiLCJvMiIsImhlIiwiZGVwdGhUb1ByZXNzdXJlIiwiZm9ybWF0VGltZSIsIm1pbnV0ZXMiLCJocnMiLCJtaW5zIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImZvcm1hdFRpbWVISE1NIiwiY29uc29sZSIsImtleXMiLCJmaWx0ZXIiLCJrZXkiLCJlbmRzV2l0aCJdLCJzb3VyY2VSb290IjoiIn0=